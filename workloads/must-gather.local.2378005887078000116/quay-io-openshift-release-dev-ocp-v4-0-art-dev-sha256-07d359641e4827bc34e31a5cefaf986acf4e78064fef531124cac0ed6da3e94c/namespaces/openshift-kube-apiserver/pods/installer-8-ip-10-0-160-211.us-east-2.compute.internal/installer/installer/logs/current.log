2023-01-09T04:53:47.091544813Z I0109 04:53:47.091375       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc00027bea0 cert-dir:0xc00068a0a0 cert-secrets:0xc00027be00 configmaps:0xc00027b9a0 namespace:0xc00027b7c0 optional-cert-configmaps:0xc00068a000 optional-cert-secrets:0xc00027bf40 optional-configmaps:0xc00027bae0 optional-secrets:0xc00027ba40 pod:0xc00027b860 pod-manifest-dir:0xc00027bc20 resource-dir:0xc00027bb80 revision:0xc00027b720 secrets:0xc00027b900 v:0xc00068bb80] [0xc00068bb80 0xc00027b720 0xc00027b7c0 0xc00027b860 0xc00027bb80 0xc00027bc20 0xc00027b9a0 0xc00027bae0 0xc00027b900 0xc00027ba40 0xc00068a0a0 0xc00027bea0 0xc00068a000 0xc00027be00 0xc00027bf40] [] map[add-dir-header:0xc00068b400 alsologtostderr:0xc00068b4a0 cert-configmaps:0xc00027bea0 cert-dir:0xc00068a0a0 cert-secrets:0xc00027be00 configmaps:0xc00027b9a0 help:0xc0004cc280 kubeconfig:0xc00027b680 log-backtrace-at:0xc00068b5e0 log-dir:0xc00068b680 log-file:0xc00068b720 log-file-max-size:0xc00068b7c0 log-flush-frequency:0xc00068b540 logtostderr:0xc00068b860 namespace:0xc00027b7c0 one-output:0xc00068b900 optional-cert-configmaps:0xc00068a000 optional-cert-secrets:0xc00027bf40 optional-configmaps:0xc00027bae0 optional-secrets:0xc00027ba40 pod:0xc00027b860 pod-manifest-dir:0xc00027bc20 pod-manifests-lock-file:0xc00027bd60 resource-dir:0xc00027bb80 revision:0xc00027b720 secrets:0xc00027b900 skip-headers:0xc00068b9a0 skip-log-headers:0xc00068ba40 stderrthreshold:0xc00068bae0 timeout-duration:0xc00027bcc0 v:0xc00068bb80 vmodule:0xc00068bd60] [0xc00027b680 0xc00027b720 0xc00027b7c0 0xc00027b860 0xc00027b900 0xc00027b9a0 0xc00027ba40 0xc00027bae0 0xc00027bb80 0xc00027bc20 0xc00027bcc0 0xc00027bd60 0xc00027be00 0xc00027bea0 0xc00027bf40 0xc00068a000 0xc00068a0a0 0xc00068b400 0xc00068b4a0 0xc00068b5e0 0xc00068b680 0xc00068b720 0xc00068b7c0 0xc00068b540 0xc00068b860 0xc00068b900 0xc00068b9a0 0xc00068ba40 0xc00068bae0 0xc00068bb80 0xc00068bd60 0xc0004cc280] [0xc00068b400 0xc00068b4a0 0xc00027bea0 0xc00068a0a0 0xc00027be00 0xc00027b9a0 0xc0004cc280 0xc00027b680 0xc00068b5e0 0xc00068b680 0xc00068b720 0xc00068b7c0 0xc00068b540 0xc00068b860 0xc00027b7c0 0xc00068b900 0xc00068a000 0xc00027bf40 0xc00027bae0 0xc00027ba40 0xc00027b860 0xc00027bc20 0xc00027bd60 0xc00027bb80 0xc00027b720 0xc00027b900 0xc00068b9a0 0xc00068ba40 0xc00068bae0 0xc00027bcc0 0xc00068bb80 0xc00068bd60] map[104:0xc0004cc280 118:0xc00068bb80] [] -1 0 0xc000aa0750 true 0xa43500 []}
2023-01-09T04:53:47.091643615Z I0109 04:53:47.091588       1 cmd.go:93] (*installerpod.InstallOptions)(0xc000502b60)({
2023-01-09T04:53:47.091643615Z  KubeConfig: (string) "",
2023-01-09T04:53:47.091643615Z  KubeClient: (kubernetes.Interface) <nil>,
2023-01-09T04:53:47.091643615Z  Revision: (string) (len=1) "8",
2023-01-09T04:53:47.091643615Z  NodeName: (string) "",
2023-01-09T04:53:47.091643615Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2023-01-09T04:53:47.091643615Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:53:47.091643615Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:53:47.091643615Z   (string) (len=11) "etcd-client",
2023-01-09T04:53:47.091643615Z   (string) (len=34) "localhost-recovery-serving-certkey",
2023-01-09T04:53:47.091643615Z   (string) (len=31) "localhost-recovery-client-token"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2023-01-09T04:53:47.091643615Z   (string) (len=17) "encryption-config",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "webhook-authenticator"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2023-01-09T04:53:47.091643615Z   (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:53:47.091643615Z   (string) (len=6) "config",
2023-01-09T04:53:47.091643615Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2023-01-09T04:53:47.091643615Z   (string) (len=28) "bound-sa-token-signing-certs",
2023-01-09T04:53:47.091643615Z   (string) (len=15) "etcd-serving-ca",
2023-01-09T04:53:47.091643615Z   (string) (len=18) "kubelet-serving-ca",
2023-01-09T04:53:47.091643615Z   (string) (len=22) "sa-token-signing-certs",
2023-01-09T04:53:47.091643615Z   (string) (len=29) "kube-apiserver-audit-policies"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:53:47.091643615Z   (string) (len=14) "oauth-metadata",
2023-01-09T04:53:47.091643615Z   (string) (len=12) "cloud-config",
2023-01-09T04:53:47.091643615Z   (string) (len=24) "kube-apiserver-server-ca"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  CertSecretNames: ([]string) (len=10 cap=16) {
2023-01-09T04:53:47.091643615Z   (string) (len=17) "aggregator-client",
2023-01-09T04:53:47.091643615Z   (string) (len=30) "localhost-serving-cert-certkey",
2023-01-09T04:53:47.091643615Z   (string) (len=31) "service-network-serving-certkey",
2023-01-09T04:53:47.091643615Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2023-01-09T04:53:47.091643615Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2023-01-09T04:53:47.091643615Z   (string) (len=33) "bound-service-account-signing-key",
2023-01-09T04:53:47.091643615Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2023-01-09T04:53:47.091643615Z   (string) (len=31) "check-endpoints-client-cert-key",
2023-01-09T04:53:47.091643615Z   (string) (len=14) "kubelet-client",
2023-01-09T04:53:47.091643615Z   (string) (len=16) "node-kubeconfigs"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2023-01-09T04:53:47.091643615Z   (string) (len=17) "user-serving-cert",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-000",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-001",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-002",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-003",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-004",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-005",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-006",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-007",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-008",
2023-01-09T04:53:47.091643615Z   (string) (len=21) "user-serving-cert-009"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2023-01-09T04:53:47.091643615Z   (string) (len=20) "aggregator-client-ca",
2023-01-09T04:53:47.091643615Z   (string) (len=9) "client-ca",
2023-01-09T04:53:47.091643615Z   (string) (len=29) "control-plane-node-kubeconfig",
2023-01-09T04:53:47.091643615Z   (string) (len=26) "check-endpoints-kubeconfig"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2023-01-09T04:53:47.091643615Z   (string) (len=17) "trusted-ca-bundle"
2023-01-09T04:53:47.091643615Z  },
2023-01-09T04:53:47.091643615Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2023-01-09T04:53:47.091643615Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2023-01-09T04:53:47.091643615Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2023-01-09T04:53:47.091643615Z  Timeout: (time.Duration) 2m0s,
2023-01-09T04:53:47.091643615Z  StaticPodManifestsLockFile: (string) "",
2023-01-09T04:53:47.091643615Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2023-01-09T04:53:47.091643615Z  KubeletVersion: (string) ""
2023-01-09T04:53:47.091643615Z })
2023-01-09T04:53:47.092179517Z I0109 04:53:47.092160       1 cmd.go:410] Getting controller reference for node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:53:47.102095714Z I0109 04:53:47.102046       1 cmd.go:423] Waiting for installer revisions to settle for node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:53:47.106873508Z I0109 04:53:47.106838       1 cmd.go:515] Waiting additional period after revisions have settled for node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:54:17.107184455Z I0109 04:54:17.107141       1 cmd.go:521] Getting installer pods for node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:54:17.111332971Z I0109 04:54:17.111306       1 cmd.go:539] Latest installer revision for node ip-10-0-160-211.us-east-2.compute.internal is: 8
2023-01-09T04:54:17.111332971Z I0109 04:54:17.111325       1 cmd.go:428] Querying kubelet version for node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:54:17.113715158Z I0109 04:54:17.113684       1 cmd.go:441] Got kubelet version 1.25.4+77bec7a on target node ip-10-0-160-211.us-east-2.compute.internal
2023-01-09T04:54:17.113715158Z I0109 04:54:17.113702       1 cmd.go:290] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8" ...
2023-01-09T04:54:17.113831488Z I0109 04:54:17.113802       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8" ...
2023-01-09T04:54:17.113831488Z I0109 04:54:17.113817       1 cmd.go:226] Getting secrets ...
2023-01-09T04:54:17.115904979Z I0109 04:54:17.115870       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-8
2023-01-09T04:54:17.118933056Z I0109 04:54:17.118898       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-8
2023-01-09T04:54:17.121068306Z I0109 04:54:17.121045       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-8
2023-01-09T04:54:17.122917318Z I0109 04:54:17.122884       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-8: secrets "encryption-config-8" not found
2023-01-09T04:54:17.125564830Z I0109 04:54:17.125544       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-8
2023-01-09T04:54:17.125607153Z I0109 04:54:17.125596       1 cmd.go:239] Getting config maps ...
2023-01-09T04:54:17.127424185Z I0109 04:54:17.127398       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-8
2023-01-09T04:54:17.129510523Z I0109 04:54:17.129479       1 copy.go:60] Got configMap openshift-kube-apiserver/config-8
2023-01-09T04:54:17.131675733Z I0109 04:54:17.131650       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-8
2023-01-09T04:54:17.310214519Z I0109 04:54:17.310174       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-8
2023-01-09T04:54:17.510682745Z I0109 04:54:17.510642       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-8
2023-01-09T04:54:17.710249127Z I0109 04:54:17.710210       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-8
2023-01-09T04:54:17.909791501Z I0109 04:54:17.909751       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-8
2023-01-09T04:54:18.110393058Z I0109 04:54:18.110350       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-8
2023-01-09T04:54:18.310249175Z I0109 04:54:18.310207       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-8: configmaps "cloud-config-8" not found
2023-01-09T04:54:18.509861679Z I0109 04:54:18.509815       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-8
2023-01-09T04:54:18.710461275Z I0109 04:54:18.710419       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-8
2023-01-09T04:54:18.710461275Z I0109 04:54:18.710447       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client" ...
2023-01-09T04:54:18.710584941Z I0109 04:54:18.710570       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client/tls.key" ...
2023-01-09T04:54:18.710676830Z I0109 04:54:18.710663       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client/tls.crt" ...
2023-01-09T04:54:18.710735374Z I0109 04:54:18.710723       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token" ...
2023-01-09T04:54:18.710770472Z I0109 04:54:18.710758       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/token" ...
2023-01-09T04:54:18.710823602Z I0109 04:54:18.710811       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/ca.crt" ...
2023-01-09T04:54:18.710876516Z I0109 04:54:18.710864       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/namespace" ...
2023-01-09T04:54:18.710927929Z I0109 04:54:18.710913       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/service-ca.crt" ...
2023-01-09T04:54:18.710986257Z I0109 04:54:18.710973       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey" ...
2023-01-09T04:54:18.711054639Z I0109 04:54:18.711039       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2023-01-09T04:54:18.711164889Z I0109 04:54:18.711149       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey/tls.key" ...
2023-01-09T04:54:18.711218349Z I0109 04:54:18.711206       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/webhook-authenticator" ...
2023-01-09T04:54:18.711256593Z I0109 04:54:18.711244       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/webhook-authenticator/kubeConfig" ...
2023-01-09T04:54:18.711311013Z I0109 04:54:18.711299       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/bound-sa-token-signing-certs" ...
2023-01-09T04:54:18.711380281Z I0109 04:54:18.711366       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:54:18.711434820Z I0109 04:54:18.711423       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/config" ...
2023-01-09T04:54:18.711479271Z I0109 04:54:18.711467       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/config/config.yaml" ...
2023-01-09T04:54:18.711533502Z I0109 04:54:18.711521       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/etcd-serving-ca" ...
2023-01-09T04:54:18.711579599Z I0109 04:54:18.711559       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2023-01-09T04:54:18.711633311Z I0109 04:54:18.711621       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-audit-policies" ...
2023-01-09T04:54:18.711668886Z I0109 04:54:18.711656       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2023-01-09T04:54:18.711720736Z I0109 04:54:18.711708       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2023-01-09T04:54:18.711756094Z I0109 04:54:18.711743       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2023-01-09T04:54:18.711809389Z I0109 04:54:18.711797       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod" ...
2023-01-09T04:54:18.711843158Z I0109 04:54:18.711831       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/version" ...
2023-01-09T04:54:18.711898099Z I0109 04:54:18.711885       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2023-01-09T04:54:18.711946593Z I0109 04:54:18.711934       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/pod.yaml" ...
2023-01-09T04:54:18.712024098Z I0109 04:54:18.712008       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kubelet-serving-ca" ...
2023-01-09T04:54:18.712076295Z I0109 04:54:18.712061       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2023-01-09T04:54:18.712135611Z I0109 04:54:18.712123       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs" ...
2023-01-09T04:54:18.712171495Z I0109 04:54:18.712159       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:54:18.712222957Z I0109 04:54:18.712210       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2023-01-09T04:54:18.712285823Z I0109 04:54:18.712273       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-server-ca" ...
2023-01-09T04:54:18.712325997Z I0109 04:54:18.712314       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2023-01-09T04:54:18.712382198Z I0109 04:54:18.712370       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/oauth-metadata" ...
2023-01-09T04:54:18.712457137Z I0109 04:54:18.712444       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/oauth-metadata/oauthMetadata" ...
2023-01-09T04:54:18.712514108Z I0109 04:54:18.712501       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2023-01-09T04:54:18.712561550Z I0109 04:54:18.712549       1 cmd.go:226] Getting secrets ...
2023-01-09T04:54:18.910259360Z I0109 04:54:18.910220       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2023-01-09T04:54:19.109879549Z I0109 04:54:19.109836       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2023-01-09T04:54:19.311327993Z I0109 04:54:19.311286       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2023-01-09T04:54:19.510015447Z I0109 04:54:19.509973       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2023-01-09T04:54:19.709732915Z I0109 04:54:19.709686       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2023-01-09T04:54:19.911179212Z I0109 04:54:19.911140       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2023-01-09T04:54:20.109851041Z I0109 04:54:20.109808       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2023-01-09T04:54:20.311195970Z I0109 04:54:20.311155       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2023-01-09T04:54:20.510408310Z I0109 04:54:20.510363       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2023-01-09T04:54:20.710004870Z I0109 04:54:20.709954       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2023-01-09T04:54:20.910211940Z I0109 04:54:20.910174       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2023-01-09T04:54:21.110051288Z I0109 04:54:21.109982       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-000: secrets "user-serving-cert-000" not found
2023-01-09T04:54:21.309486057Z I0109 04:54:21.309447       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-001: secrets "user-serving-cert-001" not found
2023-01-09T04:54:21.510696398Z I0109 04:54:21.510660       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2023-01-09T04:54:21.710345832Z I0109 04:54:21.710308       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2023-01-09T04:54:21.909860831Z I0109 04:54:21.909822       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2023-01-09T04:54:22.109528042Z I0109 04:54:22.109484       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2023-01-09T04:54:22.310215471Z I0109 04:54:22.310172       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2023-01-09T04:54:22.510625947Z I0109 04:54:22.510585       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2023-01-09T04:54:22.710138642Z I0109 04:54:22.710101       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2023-01-09T04:54:22.910450632Z I0109 04:54:22.910408       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2023-01-09T04:54:22.910450632Z I0109 04:54:22.910430       1 cmd.go:239] Getting config maps ...
2023-01-09T04:54:23.110915750Z I0109 04:54:23.110872       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2023-01-09T04:54:23.311614498Z I0109 04:54:23.311574       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2023-01-09T04:54:23.511277070Z I0109 04:54:23.511239       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2023-01-09T04:54:23.710508637Z I0109 04:54:23.710468       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2023-01-09T04:54:23.915788298Z I0109 04:54:23.915741       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916210       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916365       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916488       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916566       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916614       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916685       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916811       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916853       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916903       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916952       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.916983       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917077       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917128       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917161       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917206       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917252       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917284       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917335       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917387       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917426       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917474       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917522       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917586       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917636       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917683       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917720       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917784       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917834       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917889       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917939       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.917974       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918044       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918093       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918155       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918203       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918237       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918284       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918320       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918410       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918447       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918497       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918581       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2023-01-09T04:54:23.988035610Z I0109 04:54:23.918717       1 cmd.go:332] Getting pod configmaps/kube-apiserver-pod-8 -n openshift-kube-apiserver
2023-01-09T04:54:24.110404004Z I0109 04:54:24.110363       1 cmd.go:348] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2023-01-09T04:54:24.110437277Z I0109 04:54:24.110398       1 cmd.go:376] Writing a pod under "kube-apiserver-pod.yaml" key 
2023-01-09T04:54:24.110437277Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"8"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"8"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2023-01-09T04:54:24.113433680Z I0109 04:54:24.113407       1 cmd.go:607] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/kube-apiserver-pod.yaml" ...
2023-01-09T04:54:24.113559439Z I0109 04:54:24.113535       1 cmd.go:618] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2023-01-09T04:54:24.113559439Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"8"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"8"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
