2023-01-09T04:46:40.882916755Z I0109 04:46:40.882744       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc0008a9ea0 cert-dir:0xc000278320 cert-secrets:0xc0008a9e00 configmaps:0xc0008a99a0 namespace:0xc0008a97c0 optional-cert-configmaps:0xc0002780a0 optional-cert-secrets:0xc0008a9f40 optional-configmaps:0xc0008a9ae0 optional-secrets:0xc0008a9a40 pod:0xc0008a9860 pod-manifest-dir:0xc0008a9c20 resource-dir:0xc0008a9b80 revision:0xc0008a9720 secrets:0xc0008a9900 v:0xc0003df400] [0xc0003df400 0xc0008a9720 0xc0008a97c0 0xc0008a9860 0xc0008a9b80 0xc0008a9c20 0xc0008a99a0 0xc0008a9ae0 0xc0008a9900 0xc0008a9a40 0xc000278320 0xc0008a9ea0 0xc0002780a0 0xc0008a9e00 0xc0008a9f40] [] map[add-dir-header:0xc000279ae0 alsologtostderr:0xc000279b80 cert-configmaps:0xc0008a9ea0 cert-dir:0xc000278320 cert-secrets:0xc0008a9e00 configmaps:0xc0008a99a0 help:0xc0001b1b80 kubeconfig:0xc0008a9680 log-backtrace-at:0xc000279cc0 log-dir:0xc000279d60 log-file:0xc000279e00 log-file-max-size:0xc000279ea0 log-flush-frequency:0xc000279c20 logtostderr:0xc000279f40 namespace:0xc0008a97c0 one-output:0xc0003de1e0 optional-cert-configmaps:0xc0002780a0 optional-cert-secrets:0xc0008a9f40 optional-configmaps:0xc0008a9ae0 optional-secrets:0xc0008a9a40 pod:0xc0008a9860 pod-manifest-dir:0xc0008a9c20 pod-manifests-lock-file:0xc0008a9d60 resource-dir:0xc0008a9b80 revision:0xc0008a9720 secrets:0xc0008a9900 skip-headers:0xc0003defa0 skip-log-headers:0xc0003df180 stderrthreshold:0xc0003df2c0 timeout-duration:0xc0008a9cc0 v:0xc0003df400 vmodule:0xc0003df680] [0xc0008a9680 0xc0008a9720 0xc0008a97c0 0xc0008a9860 0xc0008a9900 0xc0008a99a0 0xc0008a9a40 0xc0008a9ae0 0xc0008a9b80 0xc0008a9c20 0xc0008a9cc0 0xc0008a9d60 0xc0008a9e00 0xc0008a9ea0 0xc0008a9f40 0xc0002780a0 0xc000278320 0xc000279ae0 0xc000279b80 0xc000279cc0 0xc000279d60 0xc000279e00 0xc000279ea0 0xc000279c20 0xc000279f40 0xc0003de1e0 0xc0003defa0 0xc0003df180 0xc0003df2c0 0xc0003df400 0xc0003df680 0xc0001b1b80] [0xc000279ae0 0xc000279b80 0xc0008a9ea0 0xc000278320 0xc0008a9e00 0xc0008a99a0 0xc0001b1b80 0xc0008a9680 0xc000279cc0 0xc000279d60 0xc000279e00 0xc000279ea0 0xc000279c20 0xc000279f40 0xc0008a97c0 0xc0003de1e0 0xc0002780a0 0xc0008a9f40 0xc0008a9ae0 0xc0008a9a40 0xc0008a9860 0xc0008a9c20 0xc0008a9d60 0xc0008a9b80 0xc0008a9720 0xc0008a9900 0xc0003defa0 0xc0003df180 0xc0003df2c0 0xc0008a9cc0 0xc0003df400 0xc0003df680] map[104:0xc0001b1b80 118:0xc0003df400] [] -1 0 0xc000570a20 true 0xa43500 []}
2023-01-09T04:46:40.883029411Z I0109 04:46:40.882986       1 cmd.go:93] (*installerpod.InstallOptions)(0xc000582820)({
2023-01-09T04:46:40.883029411Z  KubeConfig: (string) "",
2023-01-09T04:46:40.883029411Z  KubeClient: (kubernetes.Interface) <nil>,
2023-01-09T04:46:40.883029411Z  Revision: (string) (len=1) "5",
2023-01-09T04:46:40.883029411Z  NodeName: (string) "",
2023-01-09T04:46:40.883029411Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2023-01-09T04:46:40.883029411Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:46:40.883029411Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:46:40.883029411Z   (string) (len=11) "etcd-client",
2023-01-09T04:46:40.883029411Z   (string) (len=34) "localhost-recovery-serving-certkey",
2023-01-09T04:46:40.883029411Z   (string) (len=31) "localhost-recovery-client-token"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2023-01-09T04:46:40.883029411Z   (string) (len=17) "encryption-config",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "webhook-authenticator"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2023-01-09T04:46:40.883029411Z   (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:46:40.883029411Z   (string) (len=6) "config",
2023-01-09T04:46:40.883029411Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2023-01-09T04:46:40.883029411Z   (string) (len=28) "bound-sa-token-signing-certs",
2023-01-09T04:46:40.883029411Z   (string) (len=15) "etcd-serving-ca",
2023-01-09T04:46:40.883029411Z   (string) (len=18) "kubelet-serving-ca",
2023-01-09T04:46:40.883029411Z   (string) (len=22) "sa-token-signing-certs",
2023-01-09T04:46:40.883029411Z   (string) (len=29) "kube-apiserver-audit-policies"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:46:40.883029411Z   (string) (len=14) "oauth-metadata",
2023-01-09T04:46:40.883029411Z   (string) (len=12) "cloud-config",
2023-01-09T04:46:40.883029411Z   (string) (len=24) "kube-apiserver-server-ca"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  CertSecretNames: ([]string) (len=10 cap=16) {
2023-01-09T04:46:40.883029411Z   (string) (len=17) "aggregator-client",
2023-01-09T04:46:40.883029411Z   (string) (len=30) "localhost-serving-cert-certkey",
2023-01-09T04:46:40.883029411Z   (string) (len=31) "service-network-serving-certkey",
2023-01-09T04:46:40.883029411Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2023-01-09T04:46:40.883029411Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2023-01-09T04:46:40.883029411Z   (string) (len=33) "bound-service-account-signing-key",
2023-01-09T04:46:40.883029411Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2023-01-09T04:46:40.883029411Z   (string) (len=31) "check-endpoints-client-cert-key",
2023-01-09T04:46:40.883029411Z   (string) (len=14) "kubelet-client",
2023-01-09T04:46:40.883029411Z   (string) (len=16) "node-kubeconfigs"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2023-01-09T04:46:40.883029411Z   (string) (len=17) "user-serving-cert",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-000",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-001",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-002",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-003",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-004",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-005",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-006",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-007",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-008",
2023-01-09T04:46:40.883029411Z   (string) (len=21) "user-serving-cert-009"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2023-01-09T04:46:40.883029411Z   (string) (len=20) "aggregator-client-ca",
2023-01-09T04:46:40.883029411Z   (string) (len=9) "client-ca",
2023-01-09T04:46:40.883029411Z   (string) (len=29) "control-plane-node-kubeconfig",
2023-01-09T04:46:40.883029411Z   (string) (len=26) "check-endpoints-kubeconfig"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2023-01-09T04:46:40.883029411Z   (string) (len=17) "trusted-ca-bundle"
2023-01-09T04:46:40.883029411Z  },
2023-01-09T04:46:40.883029411Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2023-01-09T04:46:40.883029411Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2023-01-09T04:46:40.883029411Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2023-01-09T04:46:40.883029411Z  Timeout: (time.Duration) 2m0s,
2023-01-09T04:46:40.883029411Z  StaticPodManifestsLockFile: (string) "",
2023-01-09T04:46:40.883029411Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2023-01-09T04:46:40.883029411Z  KubeletVersion: (string) ""
2023-01-09T04:46:40.883029411Z })
2023-01-09T04:46:40.883617579Z I0109 04:46:40.883588       1 cmd.go:410] Getting controller reference for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:46:40.892441776Z I0109 04:46:40.892415       1 cmd.go:423] Waiting for installer revisions to settle for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:46:40.896990368Z I0109 04:46:40.896964       1 cmd.go:515] Waiting additional period after revisions have settled for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:47:10.897699133Z I0109 04:47:10.897651       1 cmd.go:521] Getting installer pods for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:47:10.903492923Z I0109 04:47:10.903458       1 cmd.go:539] Latest installer revision for node ip-10-0-199-219.us-east-2.compute.internal is: 5
2023-01-09T04:47:10.903492923Z I0109 04:47:10.903478       1 cmd.go:428] Querying kubelet version for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:47:10.910089514Z I0109 04:47:10.910058       1 cmd.go:441] Got kubelet version 1.25.4+77bec7a on target node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:47:10.910127041Z I0109 04:47:10.910085       1 cmd.go:290] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5" ...
2023-01-09T04:47:10.910248124Z I0109 04:47:10.910230       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5" ...
2023-01-09T04:47:10.910259458Z I0109 04:47:10.910248       1 cmd.go:226] Getting secrets ...
2023-01-09T04:47:10.915978521Z I0109 04:47:10.915943       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-5
2023-01-09T04:47:10.920947864Z I0109 04:47:10.920921       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-5
2023-01-09T04:47:10.925074848Z I0109 04:47:10.925050       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-5
2023-01-09T04:47:10.929903169Z I0109 04:47:10.929869       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-5: secrets "encryption-config-5" not found
2023-01-09T04:47:10.934881521Z I0109 04:47:10.934858       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-5
2023-01-09T04:47:10.934905885Z I0109 04:47:10.934885       1 cmd.go:239] Getting config maps ...
2023-01-09T04:47:10.939505204Z I0109 04:47:10.939481       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-5
2023-01-09T04:47:10.944313181Z I0109 04:47:10.944290       1 copy.go:60] Got configMap openshift-kube-apiserver/config-5
2023-01-09T04:47:10.948030260Z I0109 04:47:10.948007       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-5
2023-01-09T04:47:11.116010872Z I0109 04:47:11.115952       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-5
2023-01-09T04:47:11.302237672Z I0109 04:47:11.302199       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-5
2023-01-09T04:47:11.502527282Z I0109 04:47:11.502489       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-5
2023-01-09T04:47:11.702405150Z I0109 04:47:11.702370       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-5
2023-01-09T04:47:11.903103014Z I0109 04:47:11.903063       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-5
2023-01-09T04:47:12.103401004Z I0109 04:47:12.103361       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-5: configmaps "cloud-config-5" not found
2023-01-09T04:47:12.305455077Z I0109 04:47:12.305416       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-5
2023-01-09T04:47:12.504285360Z I0109 04:47:12.504249       1 copy.go:52] Failed to get config map openshift-kube-apiserver/oauth-metadata-5: configmaps "oauth-metadata-5" not found
2023-01-09T04:47:12.504285360Z I0109 04:47:12.504275       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client" ...
2023-01-09T04:47:12.504404971Z I0109 04:47:12.504389       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client/tls.crt" ...
2023-01-09T04:47:12.504480381Z I0109 04:47:12.504465       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/etcd-client/tls.key" ...
2023-01-09T04:47:12.504549722Z I0109 04:47:12.504534       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token" ...
2023-01-09T04:47:12.504612196Z I0109 04:47:12.504576       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/ca.crt" ...
2023-01-09T04:47:12.504678706Z I0109 04:47:12.504662       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/namespace" ...
2023-01-09T04:47:12.504748837Z I0109 04:47:12.504733       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/service-ca.crt" ...
2023-01-09T04:47:12.504826834Z I0109 04:47:12.504802       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-client-token/token" ...
2023-01-09T04:47:12.504899409Z I0109 04:47:12.504878       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey" ...
2023-01-09T04:47:12.504984206Z I0109 04:47:12.504959       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2023-01-09T04:47:12.505039813Z I0109 04:47:12.505026       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/localhost-recovery-serving-certkey/tls.key" ...
2023-01-09T04:47:12.505122094Z I0109 04:47:12.505099       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/webhook-authenticator" ...
2023-01-09T04:47:12.505181868Z I0109 04:47:12.505166       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/secrets/webhook-authenticator/kubeConfig" ...
2023-01-09T04:47:12.505240477Z I0109 04:47:12.505227       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/bound-sa-token-signing-certs" ...
2023-01-09T04:47:12.505305092Z I0109 04:47:12.505292       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:47:12.505385160Z I0109 04:47:12.505372       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/config" ...
2023-01-09T04:47:12.505426975Z I0109 04:47:12.505415       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/config/config.yaml" ...
2023-01-09T04:47:12.505486717Z I0109 04:47:12.505473       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/etcd-serving-ca" ...
2023-01-09T04:47:12.505523281Z I0109 04:47:12.505511       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2023-01-09T04:47:12.505579641Z I0109 04:47:12.505567       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-audit-policies" ...
2023-01-09T04:47:12.505614693Z I0109 04:47:12.505603       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2023-01-09T04:47:12.505671029Z I0109 04:47:12.505659       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2023-01-09T04:47:12.505708935Z I0109 04:47:12.505695       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2023-01-09T04:47:12.505766238Z I0109 04:47:12.505752       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod" ...
2023-01-09T04:47:12.505802122Z I0109 04:47:12.505786       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2023-01-09T04:47:12.505853385Z I0109 04:47:12.505839       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/pod.yaml" ...
2023-01-09T04:47:12.505911847Z I0109 04:47:12.505896       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-pod/version" ...
2023-01-09T04:47:12.505994193Z I0109 04:47:12.505948       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kubelet-serving-ca" ...
2023-01-09T04:47:12.506007909Z I0109 04:47:12.505991       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2023-01-09T04:47:12.506072406Z I0109 04:47:12.506056       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs" ...
2023-01-09T04:47:12.506124968Z I0109 04:47:12.506099       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:47:12.506187805Z I0109 04:47:12.506164       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2023-01-09T04:47:12.506248410Z I0109 04:47:12.506231       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-server-ca" ...
2023-01-09T04:47:12.506294163Z I0109 04:47:12.506278       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2023-01-09T04:47:12.506394454Z I0109 04:47:12.506375       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2023-01-09T04:47:12.506413182Z I0109 04:47:12.506392       1 cmd.go:226] Getting secrets ...
2023-01-09T04:47:12.704779589Z I0109 04:47:12.704740       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2023-01-09T04:47:12.901850772Z I0109 04:47:12.901811       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2023-01-09T04:47:13.104602795Z I0109 04:47:13.104555       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2023-01-09T04:47:13.314802084Z I0109 04:47:13.314762       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2023-01-09T04:47:13.502092895Z I0109 04:47:13.502055       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2023-01-09T04:47:13.702311541Z I0109 04:47:13.702276       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2023-01-09T04:47:13.905715047Z I0109 04:47:13.905673       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2023-01-09T04:47:14.101998705Z I0109 04:47:14.101958       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2023-01-09T04:47:14.302920411Z I0109 04:47:14.302872       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2023-01-09T04:47:14.502257383Z I0109 04:47:14.502215       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2023-01-09T04:47:14.703151512Z I0109 04:47:14.703115       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2023-01-09T04:47:14.904269590Z I0109 04:47:14.904223       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-000: secrets "user-serving-cert-000" not found
2023-01-09T04:47:15.101561325Z I0109 04:47:15.101521       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-001: secrets "user-serving-cert-001" not found
2023-01-09T04:47:15.303093918Z I0109 04:47:15.303054       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2023-01-09T04:47:15.502183025Z I0109 04:47:15.502149       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2023-01-09T04:47:15.702004057Z I0109 04:47:15.701967       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2023-01-09T04:47:15.922380796Z I0109 04:47:15.921544       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2023-01-09T04:47:16.109095224Z I0109 04:47:16.109049       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2023-01-09T04:47:16.302104600Z I0109 04:47:16.302065       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2023-01-09T04:47:16.502178709Z I0109 04:47:16.502129       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2023-01-09T04:47:16.702153135Z I0109 04:47:16.702113       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2023-01-09T04:47:16.702153135Z I0109 04:47:16.702135       1 cmd.go:239] Getting config maps ...
2023-01-09T04:47:16.902735235Z I0109 04:47:16.902693       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2023-01-09T04:47:17.101718637Z I0109 04:47:17.101685       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2023-01-09T04:47:17.301880404Z I0109 04:47:17.301831       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2023-01-09T04:47:17.502030369Z I0109 04:47:17.501998       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2023-01-09T04:47:17.707503094Z I0109 04:47:17.707466       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2023-01-09T04:47:17.707776959Z I0109 04:47:17.707763       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2023-01-09T04:47:17.707800850Z I0109 04:47:17.707789       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2023-01-09T04:47:17.707975866Z I0109 04:47:17.707959       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2023-01-09T04:47:17.708120463Z I0109 04:47:17.708082       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2023-01-09T04:47:17.708120463Z I0109 04:47:17.708101       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2023-01-09T04:47:17.708221393Z I0109 04:47:17.708207       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2023-01-09T04:47:17.708294748Z I0109 04:47:17.708281       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2023-01-09T04:47:17.708303775Z I0109 04:47:17.708295       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2023-01-09T04:47:17.708412174Z I0109 04:47:17.708396       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2023-01-09T04:47:17.708490596Z I0109 04:47:17.708477       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2023-01-09T04:47:17.708499233Z I0109 04:47:17.708490       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2023-01-09T04:47:17.708577042Z I0109 04:47:17.708564       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2023-01-09T04:47:17.708646827Z I0109 04:47:17.708634       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2023-01-09T04:47:17.708655790Z I0109 04:47:17.708647       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:47:17.708750965Z I0109 04:47:17.708736       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:47:17.708911304Z I0109 04:47:17.708884       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2023-01-09T04:47:17.708975493Z I0109 04:47:17.708948       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:47:17.709130357Z I0109 04:47:17.709108       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:47:17.709315462Z I0109 04:47:17.709290       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2023-01-09T04:47:17.709346732Z I0109 04:47:17.709314       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2023-01-09T04:47:17.709487976Z I0109 04:47:17.709469       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2023-01-09T04:47:17.709575761Z I0109 04:47:17.709558       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2023-01-09T04:47:17.709589835Z I0109 04:47:17.709573       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2023-01-09T04:47:17.709707137Z I0109 04:47:17.709691       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2023-01-09T04:47:17.709896392Z I0109 04:47:17.709869       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2023-01-09T04:47:17.709930345Z I0109 04:47:17.709892       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2023-01-09T04:47:17.710098682Z I0109 04:47:17.710080       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2023-01-09T04:47:17.710204408Z I0109 04:47:17.710183       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2023-01-09T04:47:17.710286660Z I0109 04:47:17.710270       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2023-01-09T04:47:17.710387852Z I0109 04:47:17.710371       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2023-01-09T04:47:17.710403898Z I0109 04:47:17.710386       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2023-01-09T04:47:17.710521543Z I0109 04:47:17.710499       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2023-01-09T04:47:17.710651981Z I0109 04:47:17.710627       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2023-01-09T04:47:17.710703700Z I0109 04:47:17.710651       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2023-01-09T04:47:17.710809182Z I0109 04:47:17.710785       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2023-01-09T04:47:17.710877545Z I0109 04:47:17.710855       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2023-01-09T04:47:17.711020694Z I0109 04:47:17.710983       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2023-01-09T04:47:17.711020694Z I0109 04:47:17.711009       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2023-01-09T04:47:17.711157258Z I0109 04:47:17.711134       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2023-01-09T04:47:17.711172237Z I0109 04:47:17.711157       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2023-01-09T04:47:17.711267111Z I0109 04:47:17.711253       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2023-01-09T04:47:17.711320576Z I0109 04:47:17.711308       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2023-01-09T04:47:17.711529860Z I0109 04:47:17.711516       1 cmd.go:332] Getting pod configmaps/kube-apiserver-pod-5 -n openshift-kube-apiserver
2023-01-09T04:47:17.901774257Z I0109 04:47:17.901730       1 cmd.go:348] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2023-01-09T04:47:17.901809270Z I0109 04:47:17.901769       1 cmd.go:376] Writing a pod under "kube-apiserver-pod.yaml" key 
2023-01-09T04:47:17.901809270Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"5"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"5"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2023-01-09T04:47:17.904991909Z I0109 04:47:17.904968       1 cmd.go:607] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5/kube-apiserver-pod.yaml" ...
2023-01-09T04:47:17.905159102Z I0109 04:47:17.905145       1 cmd.go:614] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2023-01-09T04:47:17.905169760Z I0109 04:47:17.905158       1 cmd.go:618] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2023-01-09T04:47:17.905169760Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"5"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-5"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"5"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
