2023-01-09T04:49:59.588627444Z I0109 04:49:59.588431       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc0008ead20 cert-dir:0xc0008eaf00 cert-secrets:0xc0008eac80 configmaps:0xc0008ea820 namespace:0xc0008ea640 optional-cert-configmaps:0xc0008eae60 optional-cert-secrets:0xc0008eadc0 optional-configmaps:0xc0008ea960 optional-secrets:0xc0008ea8c0 pod:0xc0008ea6e0 pod-manifest-dir:0xc0008eaaa0 resource-dir:0xc0008eaa00 revision:0xc0008ea5a0 secrets:0xc0008ea780 v:0xc0008f6a00] [0xc0008f6a00 0xc0008ea5a0 0xc0008ea640 0xc0008ea6e0 0xc0008eaa00 0xc0008eaaa0 0xc0008ea820 0xc0008ea960 0xc0008ea780 0xc0008ea8c0 0xc0008eaf00 0xc0008ead20 0xc0008eae60 0xc0008eac80 0xc0008eadc0] [] map[add-dir-header:0xc0008f6280 alsologtostderr:0xc0008f6320 cert-configmaps:0xc0008ead20 cert-dir:0xc0008eaf00 cert-secrets:0xc0008eac80 configmaps:0xc0008ea820 help:0xc0008f6dc0 kubeconfig:0xc0008ea500 log-backtrace-at:0xc0008f6460 log-dir:0xc0008f6500 log-file:0xc0008f65a0 log-file-max-size:0xc0008f6640 log-flush-frequency:0xc0008f63c0 logtostderr:0xc0008f66e0 namespace:0xc0008ea640 one-output:0xc0008f6780 optional-cert-configmaps:0xc0008eae60 optional-cert-secrets:0xc0008eadc0 optional-configmaps:0xc0008ea960 optional-secrets:0xc0008ea8c0 pod:0xc0008ea6e0 pod-manifest-dir:0xc0008eaaa0 pod-manifests-lock-file:0xc0008eabe0 resource-dir:0xc0008eaa00 revision:0xc0008ea5a0 secrets:0xc0008ea780 skip-headers:0xc0008f6820 skip-log-headers:0xc0008f68c0 stderrthreshold:0xc0008f6960 timeout-duration:0xc0008eab40 v:0xc0008f6a00 vmodule:0xc0008f6aa0] [0xc0008ea500 0xc0008ea5a0 0xc0008ea640 0xc0008ea6e0 0xc0008ea780 0xc0008ea820 0xc0008ea8c0 0xc0008ea960 0xc0008eaa00 0xc0008eaaa0 0xc0008eab40 0xc0008eabe0 0xc0008eac80 0xc0008ead20 0xc0008eadc0 0xc0008eae60 0xc0008eaf00 0xc0008f6280 0xc0008f6320 0xc0008f6460 0xc0008f6500 0xc0008f65a0 0xc0008f6640 0xc0008f63c0 0xc0008f66e0 0xc0008f6780 0xc0008f6820 0xc0008f68c0 0xc0008f6960 0xc0008f6a00 0xc0008f6aa0 0xc0008f6dc0] [0xc0008f6280 0xc0008f6320 0xc0008ead20 0xc0008eaf00 0xc0008eac80 0xc0008ea820 0xc0008f6dc0 0xc0008ea500 0xc0008f6460 0xc0008f6500 0xc0008f65a0 0xc0008f6640 0xc0008f63c0 0xc0008f66e0 0xc0008ea640 0xc0008f6780 0xc0008eae60 0xc0008eadc0 0xc0008ea960 0xc0008ea8c0 0xc0008ea6e0 0xc0008eaaa0 0xc0008eabe0 0xc0008eaa00 0xc0008ea5a0 0xc0008ea780 0xc0008f6820 0xc0008f68c0 0xc0008f6960 0xc0008eab40 0xc0008f6a00 0xc0008f6aa0] map[104:0xc0008f6dc0 118:0xc0008f6a00] [] -1 0 0xc0005a7440 true 0xa43500 []}
2023-01-09T04:49:59.588752142Z I0109 04:49:59.588733       1 cmd.go:93] (*installerpod.InstallOptions)(0xc00046e9c0)({
2023-01-09T04:49:59.588752142Z  KubeConfig: (string) "",
2023-01-09T04:49:59.588752142Z  KubeClient: (kubernetes.Interface) <nil>,
2023-01-09T04:49:59.588752142Z  Revision: (string) (len=1) "8",
2023-01-09T04:49:59.588752142Z  NodeName: (string) "",
2023-01-09T04:49:59.588752142Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2023-01-09T04:49:59.588752142Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:49:59.588752142Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:49:59.588752142Z   (string) (len=11) "etcd-client",
2023-01-09T04:49:59.588752142Z   (string) (len=34) "localhost-recovery-serving-certkey",
2023-01-09T04:49:59.588752142Z   (string) (len=31) "localhost-recovery-client-token"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2023-01-09T04:49:59.588752142Z   (string) (len=17) "encryption-config",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "webhook-authenticator"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2023-01-09T04:49:59.588752142Z   (string) (len=18) "kube-apiserver-pod",
2023-01-09T04:49:59.588752142Z   (string) (len=6) "config",
2023-01-09T04:49:59.588752142Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2023-01-09T04:49:59.588752142Z   (string) (len=28) "bound-sa-token-signing-certs",
2023-01-09T04:49:59.588752142Z   (string) (len=15) "etcd-serving-ca",
2023-01-09T04:49:59.588752142Z   (string) (len=18) "kubelet-serving-ca",
2023-01-09T04:49:59.588752142Z   (string) (len=22) "sa-token-signing-certs",
2023-01-09T04:49:59.588752142Z   (string) (len=29) "kube-apiserver-audit-policies"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2023-01-09T04:49:59.588752142Z   (string) (len=14) "oauth-metadata",
2023-01-09T04:49:59.588752142Z   (string) (len=12) "cloud-config",
2023-01-09T04:49:59.588752142Z   (string) (len=24) "kube-apiserver-server-ca"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  CertSecretNames: ([]string) (len=10 cap=16) {
2023-01-09T04:49:59.588752142Z   (string) (len=17) "aggregator-client",
2023-01-09T04:49:59.588752142Z   (string) (len=30) "localhost-serving-cert-certkey",
2023-01-09T04:49:59.588752142Z   (string) (len=31) "service-network-serving-certkey",
2023-01-09T04:49:59.588752142Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2023-01-09T04:49:59.588752142Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2023-01-09T04:49:59.588752142Z   (string) (len=33) "bound-service-account-signing-key",
2023-01-09T04:49:59.588752142Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2023-01-09T04:49:59.588752142Z   (string) (len=31) "check-endpoints-client-cert-key",
2023-01-09T04:49:59.588752142Z   (string) (len=14) "kubelet-client",
2023-01-09T04:49:59.588752142Z   (string) (len=16) "node-kubeconfigs"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2023-01-09T04:49:59.588752142Z   (string) (len=17) "user-serving-cert",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-000",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-001",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-002",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-003",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-004",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-005",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-006",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-007",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-008",
2023-01-09T04:49:59.588752142Z   (string) (len=21) "user-serving-cert-009"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2023-01-09T04:49:59.588752142Z   (string) (len=20) "aggregator-client-ca",
2023-01-09T04:49:59.588752142Z   (string) (len=9) "client-ca",
2023-01-09T04:49:59.588752142Z   (string) (len=29) "control-plane-node-kubeconfig",
2023-01-09T04:49:59.588752142Z   (string) (len=26) "check-endpoints-kubeconfig"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2023-01-09T04:49:59.588752142Z   (string) (len=17) "trusted-ca-bundle"
2023-01-09T04:49:59.588752142Z  },
2023-01-09T04:49:59.588752142Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2023-01-09T04:49:59.588752142Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2023-01-09T04:49:59.588752142Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2023-01-09T04:49:59.588752142Z  Timeout: (time.Duration) 2m0s,
2023-01-09T04:49:59.588752142Z  StaticPodManifestsLockFile: (string) "",
2023-01-09T04:49:59.588752142Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2023-01-09T04:49:59.588752142Z  KubeletVersion: (string) ""
2023-01-09T04:49:59.588752142Z })
2023-01-09T04:49:59.681506433Z I0109 04:49:59.681465       1 cmd.go:410] Getting controller reference for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:49:59.689451419Z I0109 04:49:59.689417       1 cmd.go:423] Waiting for installer revisions to settle for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:49:59.692852866Z I0109 04:49:59.692821       1 cmd.go:515] Waiting additional period after revisions have settled for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:50:29.693671503Z I0109 04:50:29.693630       1 cmd.go:521] Getting installer pods for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:50:29.699083032Z I0109 04:50:29.699044       1 cmd.go:539] Latest installer revision for node ip-10-0-199-219.us-east-2.compute.internal is: 8
2023-01-09T04:50:29.699083032Z I0109 04:50:29.699066       1 cmd.go:428] Querying kubelet version for node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:50:29.701719875Z I0109 04:50:29.701688       1 cmd.go:441] Got kubelet version 1.25.4+77bec7a on target node ip-10-0-199-219.us-east-2.compute.internal
2023-01-09T04:50:29.701719875Z I0109 04:50:29.701706       1 cmd.go:290] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8" ...
2023-01-09T04:50:29.701805619Z I0109 04:50:29.701791       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8" ...
2023-01-09T04:50:29.701815148Z I0109 04:50:29.701803       1 cmd.go:226] Getting secrets ...
2023-01-09T04:50:29.705086392Z I0109 04:50:29.705057       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-8
2023-01-09T04:50:29.707677893Z I0109 04:50:29.707609       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-8
2023-01-09T04:50:29.710186126Z I0109 04:50:29.710163       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-8
2023-01-09T04:50:29.712374303Z I0109 04:50:29.712349       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-8: secrets "encryption-config-8" not found
2023-01-09T04:50:29.714597667Z I0109 04:50:29.714569       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-8
2023-01-09T04:50:29.714617854Z I0109 04:50:29.714595       1 cmd.go:239] Getting config maps ...
2023-01-09T04:50:29.716888274Z I0109 04:50:29.716864       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-8
2023-01-09T04:50:29.719124805Z I0109 04:50:29.719101       1 copy.go:60] Got configMap openshift-kube-apiserver/config-8
2023-01-09T04:50:29.721327621Z I0109 04:50:29.721305       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-8
2023-01-09T04:50:29.898565521Z I0109 04:50:29.898524       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-8
2023-01-09T04:50:30.096238432Z I0109 04:50:30.096197       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-8
2023-01-09T04:50:30.297272122Z I0109 04:50:30.297227       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-8
2023-01-09T04:50:30.497267648Z I0109 04:50:30.497229       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-8
2023-01-09T04:50:30.697372215Z I0109 04:50:30.697315       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-8
2023-01-09T04:50:30.897579262Z I0109 04:50:30.897537       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-8: configmaps "cloud-config-8" not found
2023-01-09T04:50:31.096702919Z I0109 04:50:31.096657       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-8
2023-01-09T04:50:31.296615421Z I0109 04:50:31.296576       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-8
2023-01-09T04:50:31.296615421Z I0109 04:50:31.296602       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client" ...
2023-01-09T04:50:31.296729343Z I0109 04:50:31.296716       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client/tls.crt" ...
2023-01-09T04:50:31.296808312Z I0109 04:50:31.296796       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/etcd-client/tls.key" ...
2023-01-09T04:50:31.296862496Z I0109 04:50:31.296850       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token" ...
2023-01-09T04:50:31.296896625Z I0109 04:50:31.296885       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/ca.crt" ...
2023-01-09T04:50:31.296977003Z I0109 04:50:31.296942       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/namespace" ...
2023-01-09T04:50:31.297021239Z I0109 04:50:31.297006       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/service-ca.crt" ...
2023-01-09T04:50:31.297106547Z I0109 04:50:31.297093       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-client-token/token" ...
2023-01-09T04:50:31.297168629Z I0109 04:50:31.297156       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey" ...
2023-01-09T04:50:31.297206219Z I0109 04:50:31.297193       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey/tls.key" ...
2023-01-09T04:50:31.297255267Z I0109 04:50:31.297243       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2023-01-09T04:50:31.297304371Z I0109 04:50:31.297292       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/webhook-authenticator" ...
2023-01-09T04:50:31.297356653Z I0109 04:50:31.297326       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/secrets/webhook-authenticator/kubeConfig" ...
2023-01-09T04:50:31.297408743Z I0109 04:50:31.297396       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/bound-sa-token-signing-certs" ...
2023-01-09T04:50:31.297463676Z I0109 04:50:31.297451       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:50:31.297516999Z I0109 04:50:31.297505       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/config" ...
2023-01-09T04:50:31.297553348Z I0109 04:50:31.297542       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/config/config.yaml" ...
2023-01-09T04:50:31.297616574Z I0109 04:50:31.297605       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/etcd-serving-ca" ...
2023-01-09T04:50:31.297653328Z I0109 04:50:31.297641       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2023-01-09T04:50:31.297704870Z I0109 04:50:31.297693       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-audit-policies" ...
2023-01-09T04:50:31.297747761Z I0109 04:50:31.297736       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2023-01-09T04:50:31.297801111Z I0109 04:50:31.297789       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2023-01-09T04:50:31.297836104Z I0109 04:50:31.297824       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2023-01-09T04:50:31.297886197Z I0109 04:50:31.297874       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod" ...
2023-01-09T04:50:31.297919416Z I0109 04:50:31.297907       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2023-01-09T04:50:31.297972291Z I0109 04:50:31.297956       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/pod.yaml" ...
2023-01-09T04:50:31.298051888Z I0109 04:50:31.298014       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-pod/version" ...
2023-01-09T04:50:31.298103226Z I0109 04:50:31.298080       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kubelet-serving-ca" ...
2023-01-09T04:50:31.298134706Z I0109 04:50:31.298121       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2023-01-09T04:50:31.298205132Z I0109 04:50:31.298186       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs" ...
2023-01-09T04:50:31.298245852Z I0109 04:50:31.298228       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2023-01-09T04:50:31.298294559Z I0109 04:50:31.298280       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2023-01-09T04:50:31.298375459Z I0109 04:50:31.298347       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-server-ca" ...
2023-01-09T04:50:31.298414143Z I0109 04:50:31.298397       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2023-01-09T04:50:31.298476351Z I0109 04:50:31.298460       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/oauth-metadata" ...
2023-01-09T04:50:31.298532800Z I0109 04:50:31.298518       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/configmaps/oauth-metadata/oauthMetadata" ...
2023-01-09T04:50:31.298621826Z I0109 04:50:31.298609       1 cmd.go:218] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2023-01-09T04:50:31.298630162Z I0109 04:50:31.298622       1 cmd.go:226] Getting secrets ...
2023-01-09T04:50:31.496991100Z I0109 04:50:31.496952       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2023-01-09T04:50:31.697459657Z I0109 04:50:31.697414       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2023-01-09T04:50:31.896986609Z I0109 04:50:31.896944       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2023-01-09T04:50:32.097022344Z I0109 04:50:32.096979       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2023-01-09T04:50:32.297235639Z I0109 04:50:32.297198       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2023-01-09T04:50:32.497427230Z I0109 04:50:32.497387       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2023-01-09T04:50:32.697833146Z I0109 04:50:32.697788       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2023-01-09T04:50:32.897156067Z I0109 04:50:32.897113       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2023-01-09T04:50:33.098837545Z I0109 04:50:33.098782       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2023-01-09T04:50:33.297645312Z I0109 04:50:33.297600       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2023-01-09T04:50:33.496838015Z I0109 04:50:33.496802       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2023-01-09T04:50:33.696921870Z I0109 04:50:33.696876       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-000: secrets "user-serving-cert-000" not found
2023-01-09T04:50:33.897082838Z I0109 04:50:33.897047       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-001: secrets "user-serving-cert-001" not found
2023-01-09T04:50:34.097072807Z I0109 04:50:34.097028       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2023-01-09T04:50:34.297218488Z I0109 04:50:34.297181       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2023-01-09T04:50:34.497517519Z I0109 04:50:34.497476       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2023-01-09T04:50:34.696688212Z I0109 04:50:34.696649       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2023-01-09T04:50:34.897143540Z I0109 04:50:34.897105       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2023-01-09T04:50:35.097151359Z I0109 04:50:35.097112       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2023-01-09T04:50:35.297409750Z I0109 04:50:35.297373       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2023-01-09T04:50:35.498304641Z I0109 04:50:35.498263       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2023-01-09T04:50:35.498304641Z I0109 04:50:35.498289       1 cmd.go:239] Getting config maps ...
2023-01-09T04:50:35.697411852Z I0109 04:50:35.697378       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2023-01-09T04:50:35.897734811Z I0109 04:50:35.897697       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2023-01-09T04:50:36.097224031Z I0109 04:50:36.097189       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2023-01-09T04:50:36.297068890Z I0109 04:50:36.297037       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2023-01-09T04:50:36.503354111Z I0109 04:50:36.503273       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2023-01-09T04:50:36.582568282Z I0109 04:50:36.582501       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2023-01-09T04:50:36.582600525Z I0109 04:50:36.582559       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2023-01-09T04:50:36.582787600Z I0109 04:50:36.582754       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2023-01-09T04:50:36.582928824Z I0109 04:50:36.582894       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2023-01-09T04:50:36.582942719Z I0109 04:50:36.582923       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2023-01-09T04:50:36.583083189Z I0109 04:50:36.583056       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2023-01-09T04:50:36.583224810Z I0109 04:50:36.583194       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2023-01-09T04:50:36.583246022Z I0109 04:50:36.583221       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2023-01-09T04:50:36.583417568Z I0109 04:50:36.583395       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2023-01-09T04:50:36.583561872Z I0109 04:50:36.583523       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2023-01-09T04:50:36.583561872Z I0109 04:50:36.583548       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2023-01-09T04:50:36.583709794Z I0109 04:50:36.583670       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2023-01-09T04:50:36.583808954Z I0109 04:50:36.583785       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2023-01-09T04:50:36.583823099Z I0109 04:50:36.583812       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:50:36.583964945Z I0109 04:50:36.583940       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:50:36.584397271Z I0109 04:50:36.584365       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2023-01-09T04:50:36.584427507Z I0109 04:50:36.584398       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2023-01-09T04:50:36.584603167Z I0109 04:50:36.584579       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2023-01-09T04:50:36.584767526Z I0109 04:50:36.584750       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2023-01-09T04:50:36.584822329Z I0109 04:50:36.584797       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2023-01-09T04:50:36.584940629Z I0109 04:50:36.584920       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2023-01-09T04:50:36.585045010Z I0109 04:50:36.585026       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2023-01-09T04:50:36.585059223Z I0109 04:50:36.585046       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2023-01-09T04:50:36.585198674Z I0109 04:50:36.585179       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2023-01-09T04:50:36.585323028Z I0109 04:50:36.585300       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2023-01-09T04:50:36.585411131Z I0109 04:50:36.585379       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2023-01-09T04:50:36.585546215Z I0109 04:50:36.585526       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2023-01-09T04:50:36.585658910Z I0109 04:50:36.585639       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2023-01-09T04:50:36.585764312Z I0109 04:50:36.585746       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2023-01-09T04:50:36.585874052Z I0109 04:50:36.585855       1 cmd.go:258] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2023-01-09T04:50:36.585886303Z I0109 04:50:36.585876       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2023-01-09T04:50:36.586368498Z I0109 04:50:36.586321       1 cmd.go:636] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2023-01-09T04:50:36.586573079Z I0109 04:50:36.586540       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2023-01-09T04:50:36.586573079Z I0109 04:50:36.586566       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2023-01-09T04:50:36.587241434Z I0109 04:50:36.587121       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2023-01-09T04:50:36.587241434Z I0109 04:50:36.587227       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2023-01-09T04:50:36.587401983Z I0109 04:50:36.587380       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2023-01-09T04:50:36.587421382Z I0109 04:50:36.587413       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2023-01-09T04:50:36.587699811Z I0109 04:50:36.587645       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2023-01-09T04:50:36.587699811Z I0109 04:50:36.587669       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2023-01-09T04:50:36.587809482Z I0109 04:50:36.587786       1 cmd.go:274] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2023-01-09T04:50:36.588001886Z I0109 04:50:36.587958       1 cmd.go:626] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2023-01-09T04:50:36.588252455Z I0109 04:50:36.588230       1 cmd.go:332] Getting pod configmaps/kube-apiserver-pod-8 -n openshift-kube-apiserver
2023-01-09T04:50:36.697476934Z I0109 04:50:36.697440       1 cmd.go:348] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2023-01-09T04:50:36.697504313Z I0109 04:50:36.697474       1 cmd.go:376] Writing a pod under "kube-apiserver-pod.yaml" key 
2023-01-09T04:50:36.697504313Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"8"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"8"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2023-01-09T04:50:36.700437912Z I0109 04:50:36.700403       1 cmd.go:607] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8/kube-apiserver-pod.yaml" ...
2023-01-09T04:50:36.700568689Z I0109 04:50:36.700552       1 cmd.go:614] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2023-01-09T04:50:36.700610504Z I0109 04:50:36.700564       1 cmd.go:618] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2023-01-09T04:50:36.700610504Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"8"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-8"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:662c00a50b8327cc39963577d3e11aa71458b3888ce06223a4501679a28fecd1","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"8"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}},{"name":"GOGC","value":"100"}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:9ed61d19216d71cc5692c22402961b0f865ed8629f5d64f1687aa47af601c018","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
