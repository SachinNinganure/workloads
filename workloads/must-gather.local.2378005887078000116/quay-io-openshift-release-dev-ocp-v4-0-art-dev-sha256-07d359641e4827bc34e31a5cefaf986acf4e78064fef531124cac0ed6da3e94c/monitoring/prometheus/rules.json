{"status":"success","data":{"groups":[{"name":"CloudCredentialOperator","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cloud-credential-operator-cloud-credential-operator-alerts-c4743171-e95e-408a-b502-324672a4e7ae.yaml","rules":[{"state":"inactive","name":"CloudCredentialOperatorTargetNamespaceMissing","query":"cco_credentials_requests_conditions{condition=\"MissingTargetNamespace\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"At least one CredentialsRequest custom resource has specified in its .spec.secretRef.namespace field a namespace which does not presently exist. This means the Cloud Credential Operator in the openshift-cloud-credential-operator namespace cannot process the CredentialsRequest resource. Check the conditions of all CredentialsRequests with 'oc get credentialsrequest -A' to find any CredentialsRequest(s) with a .status.condition showing a condition type of MissingTargetNamespace set to True.","message":"CredentialsRequest(s) pointing to non-existent namespace","summary":"One ore more CredentialsRequest CRs are asking to save credentials to a non-existent namespace."},"alerts":[],"health":"ok","evaluationTime":0.000151189,"lastEvaluation":"2023-01-09T15:41:03.987496388Z","type":"alerting"},{"state":"inactive","name":"CloudCredentialOperatorProvisioningFailed","query":"cco_credentials_requests_conditions{condition=\"CredentialsProvisionFailure\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"While processing a CredentialsRequest, the Cloud Credential Operator encountered an issue. Check the conditions of all CredentialsRequets with 'oc get credentialsrequest -A' to find any CredentialsRequest(s) with a .stats.condition showing a condition type of CredentialsProvisionFailure set to True for more details on the issue.","message":"CredentialsRequest(s) unable to be fulfilled","summary":"One or more CredentialsRequest CRs are unable to be processed."},"alerts":[],"health":"ok","evaluationTime":0.000066206,"lastEvaluation":"2023-01-09T15:41:03.987650394Z","type":"alerting"},{"state":"inactive","name":"CloudCredentialOperatorDeprovisioningFailed","query":"cco_credentials_requests_conditions{condition=\"CredentialsDeprovisionFailure\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"While processing a CredentialsRequest marked for deletion, the Cloud Credential Operator encountered an issue. Check the conditions of all CredentialsRequests with 'oc get credentialsrequest -A' to find any CredentialsRequest(s) with a .status.condition showing a condition type of CredentialsDeprovisionFailure set to True for more details on the issue.","message":"CredentialsRequest(s) unable to be cleaned up","summary":"One or more CredentialsRequest CRs are unable to be deleted."},"alerts":[],"health":"ok","evaluationTime":0.000058185,"lastEvaluation":"2023-01-09T15:41:03.987717557Z","type":"alerting"},{"state":"inactive","name":"CloudCredentialOperatorInsufficientCloudCreds","query":"cco_credentials_requests_conditions{condition=\"InsufficientCloudCreds\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The Cloud Credential Operator has determined that there are insufficient permissions to process one or more CredentialsRequest CRs. Check the conditions of all CredentialsRequests with 'oc get credentialsrequest -A' to find any CredentialsRequest(s) with a .status.condition showing a condition type of InsufficientCloudCreds set to True for more details.","message":"Cluster's cloud credentials insufficient for minting or passthrough","summary":"Problem with the available platform credentials."},"alerts":[],"health":"ok","evaluationTime":0.000108406,"lastEvaluation":"2023-01-09T15:41:03.987776598Z","type":"alerting"},{"state":"inactive","name":"CloudCredentialOperatorStaleCredentials","query":"cco_credentials_requests_conditions{condition=\"StaleCredentials\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The Cloud Credential Operator (CCO) has detected one or more stale CredentialsRequest CRs that need to be manually deleted. When the CCO is in Manual credentials mode, it will not automatially clean up stale CredentialsRequest CRs (that may no longer be necessary in the present version of OpenShift because it could involve needing to clean up manually created cloud resources. Check the conditions of all CredentialsRequests with 'oc get credentialsrequest -A' to find any CredentialsRequest(s) with a .status.condition showing a condition type of StaleCredentials set to True. Determine the appropriate steps to clean up/deprovision any previously provisioned cloud resources. Finally, delete the CredentialsRequest with an 'oc delete'.","message":"1 or more credentials requests are stale and should be deleted. Check the status.conditions on CredentialsRequest CRs to identify the stale one(s).","summary":"One or more CredentialsRequest CRs are stale and should be deleted."},"alerts":[],"health":"ok","evaluationTime":0.00014408,"lastEvaluation":"2023-01-09T15:41:03.987886907Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000541206,"lastEvaluation":"2023-01-09T15:41:03.987492336Z"},{"name":"cluster-machine-approver.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-machine-approver-machineapprover-rules-6d6e6b27-2692-43c4-bf09-36e871b8c8d1.yaml","rules":[{"state":"inactive","name":"MachineApproverMaxPendingCSRsReached","query":"mapi_current_pending_csr \u003e mapi_max_pending_csr","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The number of pending CertificateSigningRequests has exceeded the\nmaximum threshold (current number of machine + 100). Check the\npending CSRs to determine which machines need approval, also check\nthat the nodelink controller is running in the openshift-machine-api\nnamespace.\n","summary":"max pending CSRs threshold reached."},"alerts":[],"health":"ok","evaluationTime":0.000204697,"lastEvaluation":"2023-01-09T15:41:04.395155171Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000214111,"lastEvaluation":"2023-01-09T15:41:04.39514862Z"},{"name":"node-tuning-operator.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-node-tuning-operator-node-tuning-operator-575e5d09-1d5a-40d8-8a33-7cefc788389f.yaml","rules":[{"state":"inactive","name":"NTOPodsNotReady","query":"kube_pod_status_ready{condition=\"true\",namespace=\"openshift-cluster-node-tuning-operator\"} == 0","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"Pod {{ $labels.pod }} is not ready.\nReview the \"Event\" objects in \"openshift-cluster-node-tuning-operator\" namespace for further details.\n","summary":"Pod {{ $labels.pod }} is not ready."},"alerts":[],"health":"ok","evaluationTime":0.000194185,"lastEvaluation":"2023-01-09T15:40:51.571977178Z","type":"alerting"},{"state":"inactive","name":"NTODegraded","query":"nto_degraded_info == 1","duration":7200,"labels":{"severity":"warning"},"annotations":{"description":"The Node Tuning Operator is degraded. Review the \"node-tuning\" ClusterOperator object for further details.","summary":"The Node Tuning Operator is degraded."},"alerts":[],"health":"ok","evaluationTime":0.000108781,"lastEvaluation":"2023-01-09T15:40:51.572172974Z","type":"alerting"},{"name":"nto_custom_profiles:count","query":"count by (_id) (nto_profile_calculated_total{profile!~\"openshift\",profile!~\"openshift-control-plane\",profile!~\"openshift-node\"})","health":"ok","evaluationTime":0.00014426,"lastEvaluation":"2023-01-09T15:40:51.572283387Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000455844,"lastEvaluation":"2023-01-09T15:40:51.571973754Z"},{"name":"SamplesOperator","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-samples-operator-samples-operator-alerts-6dcddcfe-e337-4826-881a-51dd3f99bab5.yaml","rules":[{"state":"inactive","name":"SamplesRetriesMissingOnImagestreamImportFailing","query":"sum(openshift_samples_failed_imagestream_import_info) \u003e sum(openshift_samples_retry_imagestream_import_total) - sum(openshift_samples_retry_imagestream_import_total offset 30m)","duration":7200,"labels":{"namespace":"openshift-cluster-samples-operator","severity":"warning"},"annotations":{"description":"Samples operator is detecting problems with imagestream image imports, and the periodic retries of those\nimports are not occurring.  Contact support.  You can look at the \"openshift-samples\" ClusterOperator object\nfor details. Most likely there are issues with the external image registry hosting the images that need to\nbe investigated.  The list of ImageStreams that have failing imports are:\n{{ range query \"openshift_samples_failed_imagestream_import_info \u003e 0\" }}\n  {{ .Labels.name }}\n{{ end }}\nHowever, the list of ImageStreams for which samples operator is retrying imports is:\nretrying imports:\n{{ range query \"openshift_samples_retry_imagestream_import_total \u003e 0\" }}\n   {{ .Labels.imagestreamname }}\n{{ end }}\n","summary":"Samples operator is having problems with imagestream imports and its retries."},"alerts":[],"health":"ok","evaluationTime":0.00042095,"lastEvaluation":"2023-01-09T15:41:05.699888563Z","type":"alerting"},{"state":"inactive","name":"SamplesImagestreamImportFailing","query":"sum(openshift_samples_retry_imagestream_import_total) - sum(openshift_samples_retry_imagestream_import_total offset 30m) \u003e sum(openshift_samples_failed_imagestream_import_info)","duration":7200,"labels":{"namespace":"openshift-cluster-samples-operator","severity":"warning"},"annotations":{"description":"Samples operator is detecting problems with imagestream image imports.  You can look at the \"openshift-samples\"\nClusterOperator object for details. Most likely there are issues with the external image registry hosting\nthe images that needs to be investigated.  Or you can consider marking samples operator Removed if you do not\ncare about having sample imagestreams available.  The list of ImageStreams for which samples operator is\nretrying imports:\n{{ range query \"openshift_samples_retry_imagestream_import_total \u003e 0\" }}\n   {{ .Labels.imagestreamname }}\n{{ end }}\n","summary":"Samples operator is detecting problems with imagestream image imports"},"alerts":[],"health":"ok","evaluationTime":0.000346311,"lastEvaluation":"2023-01-09T15:41:05.700311163Z","type":"alerting"},{"state":"inactive","name":"SamplesDegraded","query":"openshift_samples_degraded_info == 1","duration":7200,"labels":{"severity":"warning"},"annotations":{"description":"Samples could not be deployed and the operator is degraded. Review the \"openshift-samples\" ClusterOperator object for further details.\n","summary":"Samples operator is degraded."},"alerts":[],"health":"ok","evaluationTime":0.000085387,"lastEvaluation":"2023-01-09T15:41:05.700659072Z","type":"alerting"},{"state":"inactive","name":"SamplesInvalidConfig","query":"openshift_samples_invalidconfig_info == 1","duration":7200,"labels":{"severity":"warning"},"annotations":{"description":"Samples operator has been given an invalid configuration.\n","summary":"Samples operator Invalid configuration"},"alerts":[],"health":"ok","evaluationTime":0.000074182,"lastEvaluation":"2023-01-09T15:41:05.700746146Z","type":"alerting"},{"state":"inactive","name":"SamplesMissingSecret","query":"openshift_samples_invalidsecret_info{reason=\"missing_secret\"} == 1","duration":7200,"labels":{"severity":"warning"},"annotations":{"description":"Samples operator cannot find the samples pull secret in the openshift namespace.\n","summary":"Samples operator is not able to find secret"},"alerts":[],"health":"ok","evaluationTime":0.000078498,"lastEvaluation":"2023-01-09T15:41:05.700821681Z","type":"alerting"},{"state":"inactive","name":"SamplesMissingTBRCredential","query":"openshift_samples_invalidsecret_info{reason=\"missing_tbr_credential\"} == 1","duration":7200,"labels":{"severity":"warning"},"annotations":{"description":"The samples operator cannot find credentials for 'registry.redhat.io'. Many of the sample ImageStreams will fail to import unless the 'samplesRegistry' in the operator configuration is changed.\n","summary":"Samples operator is not able to find the credentials for registry"},"alerts":[],"health":"ok","evaluationTime":0.000068668,"lastEvaluation":"2023-01-09T15:41:05.700901499Z","type":"alerting"},{"state":"inactive","name":"SamplesTBRInaccessibleOnBoot","query":"openshift_samples_tbr_inaccessible_info == 1","duration":172800,"labels":{"severity":"info"},"annotations":{"description":"One of two situations has occurred.  Either\nsamples operator could not access 'registry.redhat.io' during its initial installation and it bootstrapped as removed.\nIf this is expected, and stems from installing in a restricted network environment, please note that if you\nplan on mirroring images associated with sample imagestreams into a registry available in your restricted\nnetwork environment, and subsequently moving samples operator back to 'Managed' state, a list of the images\nassociated with each image stream tag from the samples catalog is\nprovided in the 'imagestreamtag-to-image' config map in the 'openshift-cluster-samples-operator' namespace to\nassist the mirroring process.\nOr, the use of allowed registries or blocked registries with global imagestream configuration will not allow\nsamples operator to create imagestreams using the default image registry 'registry.redhat.io'.\n","summary":"Samples operator is not able to access the registry on boot"},"alerts":[],"health":"ok","evaluationTime":0.000063337,"lastEvaluation":"2023-01-09T15:41:05.700971409Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001151495,"lastEvaluation":"2023-01-09T15:41:05.699885797Z"},{"name":"default-storage-classes.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-storage-operator-prometheus-06eee9e5-77b3-4dfc-a27d-43a98b5daaa0.yaml","rules":[{"state":"inactive","name":"MultipleDefaultStorageClasses","query":"max_over_time(default_storage_class_count[5m]) \u003e 1","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"Cluster storage operator monitors all storage classes configured in the cluster\nand checks there is not more than one default StorageClass configured.\n","message":"StorageClass count check is failing (there should not be more than one default StorageClass)","summary":"More than one default StorageClass detected."},"alerts":[],"health":"ok","evaluationTime":0.00019314,"lastEvaluation":"2023-01-09T15:41:05.688613999Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000200715,"lastEvaluation":"2023-01-09T15:41:05.688609164Z"},{"name":"storage-operations.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-storage-operator-prometheus-06eee9e5-77b3-4dfc-a27d-43a98b5daaa0.yaml","rules":[{"state":"inactive","name":"PodStartupStorageOperationsFailing","query":"increase(storage_operation_duration_seconds_count{operation_name=~\"volume_attach|volume_mount\",status!=\"success\"}[5m]) \u003e 0 and on () increase(storage_operation_duration_seconds_count{operation_name=~\"volume_attach|volume_mount\",status=\"success\"}[5m]) == 0","duration":300,"labels":{"severity":"info"},"annotations":{"description":"Failing storage operation \"{{ $labels.operation_name }}\" of volume plugin {{ $labels.volume_plugin }} was preventing Pods on node {{ $labels.node }}\nfrom starting for past 5 minutes.\nPlease investigate Pods that are \"ContainerCreating\" on the node: \"oc get pod --field-selector=spec.nodeName=ip-10-0-130-168.ec2.internal --all-namespaces | grep ContainerCreating\".\nEvents of the Pods should contain exact error message: \"oc describe pod -n \u003cpod namespace\u003e \u003cpod name\u003e\".\n","summary":"Pods can't start because {{ $labels.operation_name }} of volume plugin {{ $labels.volume_plugin }} is permanently failing on node {{ $labels.node }}."},"alerts":[],"health":"ok","evaluationTime":0.000742954,"lastEvaluation":"2023-01-09T15:41:03.250712539Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000752724,"lastEvaluation":"2023-01-09T15:41:03.250706122Z"},{"name":"cluster-operators","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-version-cluster-version-operator-aebb6638-4987-4780-ab0a-bf5e6c253a98.yaml","rules":[{"state":"inactive","name":"ClusterNotUpgradeable","query":"max by (namespace, name, condition, endpoint) (cluster_operator_conditions{condition=\"Upgradeable\",endpoint=\"metrics\",name=\"version\"} == 0)","duration":3600,"labels":{"severity":"info"},"annotations":{"description":"In most cases, you will still be able to apply patch releases. Reason {{ with $cluster_operator_conditions := \"cluster_operator_conditions\" | query}}{{range $value := .}}{{if and (eq (label \"name\" $value) \"version\") (eq (label \"condition\" $value) \"Upgradeable\") (eq (label \"endpoint\" $value) \"metrics\") (eq (value $value) 0.0) (ne (len (label \"reason\" $value)) 0) }}{{label \"reason\" $value}}.{{end}}{{end}}{{end}} For more information refer to 'oc adm upgrade'{{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} or {{ label \"url\" (first $console_url ) }}/settings/cluster/{{ end }}{{ end }}.","summary":"One or more cluster operators have been blocking minor version cluster upgrades for at least an hour."},"alerts":[],"health":"ok","evaluationTime":0.000153941,"lastEvaluation":"2023-01-09T15:41:10.248789949Z","type":"alerting"},{"state":"inactive","name":"ClusterOperatorDown","query":"max by (namespace, name) (cluster_operator_up{job=\"cluster-version-operator\"} == 0)","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"The {{ $labels.name }} operator may be down or disabled, and the components it manages may be unavailable or degraded.  Cluster upgrades may not complete. For more information refer to 'oc get -o yaml clusteroperator {{ $labels.name }}'{{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} or {{ label \"url\" (first $console_url ) }}/settings/cluster/{{ end }}{{ end }}.","summary":"Cluster operator has not been available for 10 minutes."},"alerts":[],"health":"ok","evaluationTime":0.000254928,"lastEvaluation":"2023-01-09T15:41:10.248945812Z","type":"alerting"},{"state":"inactive","name":"ClusterOperatorDegraded","query":"max by (namespace, name, reason) ((cluster_operator_conditions{condition=\"Degraded\",job=\"cluster-version-operator\"} or on (namespace, name) group by (namespace, name) (cluster_operator_up{job=\"cluster-version-operator\"})) == 1)","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"The {{ $labels.name }} operator is degraded because {{ $labels.reason }}, and the components it manages may have reduced quality of service.  Cluster upgrades may not complete. For more information refer to 'oc get -o yaml clusteroperator {{ $labels.name }}'{{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} or {{ label \"url\" (first $console_url ) }}/settings/cluster/{{ end }}{{ end }}.","summary":"Cluster operator has been degraded for 30 minutes."},"alerts":[],"health":"ok","evaluationTime":0.000578338,"lastEvaluation":"2023-01-09T15:41:10.249201818Z","type":"alerting"},{"state":"inactive","name":"ClusterOperatorFlapping","query":"max by (namespace, name) (changes(cluster_operator_up{job=\"cluster-version-operator\"}[2m]) \u003e 2)","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"The  {{ $labels.name }} operator behavior might cause upgrades to be unstable. For more information refer to 'oc get -o yaml clusteroperator {{ $labels.name }}'{{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} or {{ label \"url\" (first $console_url ) }}/settings/cluster/{{ end }}{{ end }}.","summary":"Cluster operator up status is changing often."},"alerts":[],"health":"ok","evaluationTime":0.000263076,"lastEvaluation":"2023-01-09T15:41:10.249781512Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001260855,"lastEvaluation":"2023-01-09T15:41:10.248785772Z"},{"name":"cluster-version","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-cluster-version-cluster-version-operator-aebb6638-4987-4780-ab0a-bf5e6c253a98.yaml","rules":[{"state":"inactive","name":"ClusterVersionOperatorDown","query":"absent(up{job=\"cluster-version-operator\"} == 1)","duration":600,"labels":{"namespace":"openshift-cluster-version","severity":"critical"},"annotations":{"description":"The operator may be down or disabled. The cluster will not be kept up to date and upgrades will not be possible. Inspect the openshift-cluster-version namespace for events or changes to the cluster-version-operator deployment or pods to diagnose and repair. {{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} For more information refer to {{ label \"url\" (first $console_url ) }}/k8s/cluster/projects/openshift-cluster-version.{{ end }}{{ end }}","summary":"Cluster version operator has disappeared from Prometheus target discovery."},"alerts":[],"health":"ok","evaluationTime":0.000176545,"lastEvaluation":"2023-01-09T15:40:45.432240576Z","type":"alerting"},{"state":"firing","name":"CannotRetrieveUpdates","query":"max by (namespace) ((time() - cluster_version_operator_update_retrieval_timestamp_seconds) \u003e= 3600 and ignoring (condition, name, reason) (cluster_operator_conditions{condition=\"RetrievedUpdates\",endpoint=\"metrics\",name=\"version\",reason!=\"NoChannel\"}))","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"Failure to retrieve updates means that cluster administrators will need to monitor for available updates on their own or risk falling behind on security or other bugfixes. If the failure is expected, you can clear spec.channel in the ClusterVersion object to tell the cluster-version operator to not retrieve updates. Failure reason {{ with $cluster_operator_conditions := \"cluster_operator_conditions\" | query}}{{range $value := .}}{{if and (eq (label \"name\" $value) \"version\") (eq (label \"condition\" $value) \"RetrievedUpdates\") (eq (label \"endpoint\" $value) \"metrics\") (eq (value $value) 0.0)}}{{label \"reason\" $value}} {{end}}{{end}}{{end}}. {{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} For more information refer to {{ label \"url\" (first $console_url ) }}/settings/cluster/.{{ end }}{{ end }}","summary":"Cluster version operator has not retrieved updates in {{ $value | humanizeDuration }}."},"alerts":[{"labels":{"alertname":"CannotRetrieveUpdates","namespace":"openshift-cluster-version","severity":"warning"},"annotations":{"description":"Failure to retrieve updates means that cluster administrators will need to monitor for available updates on their own or risk falling behind on security or other bugfixes. If the failure is expected, you can clear spec.channel in the ClusterVersion object to tell the cluster-version operator to not retrieve updates. Failure reason VersionNotFound .  For more information refer to https://console-openshift-console.apps.sn-loggvls-jsm.qe.devcluster.openshift.com/settings/cluster/.","summary":"Cluster version operator has not retrieved updates in 10h 54m 52s."},"state":"firing","activeAt":"2023-01-09T05:46:15.430982213Z","value":"3.929243000006676e+04"}],"health":"ok","evaluationTime":0.001891556,"lastEvaluation":"2023-01-09T15:40:45.432418872Z","type":"alerting"},{"state":"inactive","name":"UpdateAvailable","query":"sum by (channel, namespace, upstream) (cluster_version_available_updates) \u003e 0","duration":0,"labels":{"severity":"info"},"annotations":{"description":"For more information refer to 'oc adm upgrade'{{ with $console_url := \"console_url\" | query }}{{ if ne (len (label \"url\" (first $console_url ) ) ) 0}} or {{ label \"url\" (first $console_url ) }}/settings/cluster/{{ end }}{{ end }}.","summary":"Your upstream update recommendation service recommends you update your cluster."},"alerts":[],"health":"ok","evaluationTime":0.000089185,"lastEvaluation":"2023-01-09T15:40:45.434312574Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002170553,"lastEvaluation":"2023-01-09T15:40:45.432234885Z"},{"name":"openshift-dns.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-dns-operator-dns-01c96526-8ab8-40ac-b547-8ccccf6af913.yaml","rules":[{"state":"inactive","name":"CoreDNSPanicking","query":"increase(coredns_panics_total[10m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value }} CoreDNS panics observed on {{ $labels.instance }}","summary":"CoreDNS panic"},"alerts":[],"health":"ok","evaluationTime":0.000245884,"lastEvaluation":"2023-01-09T15:41:08.767172926Z","type":"alerting"},{"state":"inactive","name":"CoreDNSHealthCheckSlow","query":"histogram_quantile(0.95, sum by (instance, le) (rate(coredns_health_request_duration_seconds_bucket[5m]))) \u003e 10","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"CoreDNS Health Checks are slowing down (instance {{ $labels.instance }})","summary":"CoreDNS health checks"},"alerts":[],"health":"ok","evaluationTime":0.000439079,"lastEvaluation":"2023-01-09T15:41:08.767420917Z","type":"alerting"},{"state":"inactive","name":"CoreDNSErrorsHigh","query":"(sum by (namespace) (rate(coredns_dns_responses_total{rcode=\"SERVFAIL\"}[5m])) / sum by (namespace) (rate(coredns_dns_responses_total[5m]))) \u003e 0.01","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"CoreDNS is returning SERVFAIL for {{ $value | humanizePercentage }} of requests.","summary":"CoreDNS serverfail"},"alerts":[],"health":"ok","evaluationTime":0.000287916,"lastEvaluation":"2023-01-09T15:41:08.767861164Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00098161,"lastEvaluation":"2023-01-09T15:41:08.767169958Z"},{"name":"etcd","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-etcd-operator-etcd-prometheus-rules-2f00775e-5178-405f-83f2-3b344cb1c2fc.yaml","rules":[{"state":"inactive","name":"etcdMembersDown","query":"max without (endpoint) (sum without (instance) (up{job=~\".*etcd.*\"} == bool 0) or count without (To) (sum without (instance) (rate(etcd_network_peer_sent_failures_total{job=~\".*etcd.*\"}[2m])) \u003e 0.01)) \u003e 0","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": members are down ({{ $value }}).","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdMembersDown.md","summary":"etcd cluster members are down."},"alerts":[],"health":"ok","evaluationTime":0.000450012,"lastEvaluation":"2023-01-09T15:40:48.353803698Z","type":"alerting"},{"state":"inactive","name":"etcdNoLeader","query":"etcd_server_has_leader{job=~\".*etcd.*\"} == 0","duration":60,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": member {{ $labels.instance }} has no leader.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdNoLeader.md","summary":"etcd cluster has no leader."},"alerts":[],"health":"ok","evaluationTime":0.000132088,"lastEvaluation":"2023-01-09T15:40:48.354255716Z","type":"alerting"},{"state":"inactive","name":"etcdMemberCommunicationSlow","query":"histogram_quantile(0.99, rate(etcd_network_peer_round_trip_time_seconds_bucket{job=~\".*etcd.*\"}[5m])) \u003e 0.15","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": member communication with {{ $labels.To }} is taking {{ $value }}s on etcd instance {{ $labels.instance }}.","summary":"etcd cluster member communication is slow."},"alerts":[],"health":"ok","evaluationTime":0.000877973,"lastEvaluation":"2023-01-09T15:40:48.35438922Z","type":"alerting"},{"state":"inactive","name":"etcdHighNumberOfFailedProposals","query":"rate(etcd_server_proposals_failed_total{job=~\".*etcd.*\"}[15m]) \u003e 5","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": {{ $value }} proposal failures within the last 30 minutes on etcd instance {{ $labels.instance }}.","summary":"etcd cluster has high number of proposal failures."},"alerts":[],"health":"ok","evaluationTime":0.000150691,"lastEvaluation":"2023-01-09T15:40:48.355268775Z","type":"alerting"},{"state":"inactive","name":"etcdHighFsyncDurations","query":"histogram_quantile(0.99, rate(etcd_disk_wal_fsync_duration_seconds_bucket{job=~\".*etcd.*\"}[5m])) \u003e 0.5","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": 99th percentile fsync durations are {{ $value }}s on etcd instance {{ $labels.instance }}.","summary":"etcd cluster 99th percentile fsync durations are too high."},"alerts":[],"health":"ok","evaluationTime":0.000462556,"lastEvaluation":"2023-01-09T15:40:48.355420702Z","type":"alerting"},{"state":"inactive","name":"etcdHighFsyncDurations","query":"histogram_quantile(0.99, rate(etcd_disk_wal_fsync_duration_seconds_bucket{job=~\".*etcd.*\"}[5m])) \u003e 1","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": 99th percentile fsync durations are {{ $value }}s on etcd instance {{ $labels.instance }}.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdHighFsyncDurations.md","summary":"etcd cluster 99th percentile fsync durations are too high."},"alerts":[],"health":"ok","evaluationTime":0.000455536,"lastEvaluation":"2023-01-09T15:40:48.355884453Z","type":"alerting"},{"state":"inactive","name":"etcdHighCommitDurations","query":"histogram_quantile(0.99, rate(etcd_disk_backend_commit_duration_seconds_bucket{job=~\".*etcd.*\"}[5m])) \u003e 0.25","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": 99th percentile commit durations {{ $value }}s on etcd instance {{ $labels.instance }}.","summary":"etcd cluster 99th percentile commit durations are too high."},"alerts":[],"health":"ok","evaluationTime":0.000461894,"lastEvaluation":"2023-01-09T15:40:48.356341323Z","type":"alerting"},{"state":"inactive","name":"etcdDatabaseQuotaLowSpace","query":"(last_over_time(etcd_mvcc_db_total_size_in_bytes[5m]) / last_over_time(etcd_server_quota_backend_bytes[5m])) * 100 \u003e 95","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": database size exceeds the defined quota on etcd instance {{ $labels.instance }}, please defrag or increase the quota as the writes to etcd will be disabled when it is full.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdDatabaseQuotaLowSpace.md","summary":"etcd cluster database is running full."},"alerts":[],"health":"ok","evaluationTime":0.000239491,"lastEvaluation":"2023-01-09T15:40:48.356804514Z","type":"alerting"},{"state":"inactive","name":"etcdExcessiveDatabaseGrowth","query":"predict_linear(etcd_mvcc_db_total_size_in_bytes[4h], 4 * 60 * 60) \u003e etcd_server_quota_backend_bytes","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": Predicting running out of disk space in the next four hours, based on write observations within the past four hours on etcd instance {{ $labels.instance }}, please check as it might be disruptive.","summary":"etcd cluster database growing very fast."},"alerts":[],"health":"ok","evaluationTime":0.000396343,"lastEvaluation":"2023-01-09T15:40:48.357045913Z","type":"alerting"},{"state":"inactive","name":"etcdDatabaseHighFragmentationRatio","query":"(last_over_time(etcd_mvcc_db_total_size_in_use_in_bytes[5m]) / last_over_time(etcd_mvcc_db_total_size_in_bytes[5m])) \u003c 0.5","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": database size in use on instance {{ $labels.instance }} is {{ $value | humanizePercentage }} of the actual allocated disk space, please run defragmentation (e.g. etcdctl defrag) to retrieve the unused fragmented disk space.","runbook_url":"https://etcd.io/docs/v3.5/op-guide/maintenance/#defragmentation","summary":"etcd database size in use is less than 50% of the actual allocated storage."},"alerts":[],"health":"ok","evaluationTime":0.000198897,"lastEvaluation":"2023-01-09T15:40:48.357443897Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00384534,"lastEvaluation":"2023-01-09T15:40:48.353799555Z"},{"name":"openshift-etcd.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-etcd-operator-etcd-prometheus-rules-2f00775e-5178-405f-83f2-3b344cb1c2fc.yaml","rules":[{"state":"inactive","name":"etcdGRPCRequestsSlow","query":"histogram_quantile(0.99, sum without (grpc_type) (rate(grpc_server_handling_seconds_bucket{grpc_method!=\"Defragment\",grpc_type=\"unary\",job=\"etcd\"}[10m]))) \u003e 1","duration":1800,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": 99th percentile of gRPC requests is {{ $value }}s on etcd instance {{ $labels.instance }} for {{ $labels.grpc_method }} method.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdGRPCRequestsSlow.md","summary":"etcd grpc requests are slow"},"alerts":[],"health":"ok","evaluationTime":0.012084829,"lastEvaluation":"2023-01-09T15:40:45.970728229Z","type":"alerting"},{"state":"inactive","name":"etcdHighNumberOfFailedGRPCRequests","query":"(sum without (grpc_type, grpc_code) (rate(grpc_server_handled_total{grpc_code=~\"Unknown|FailedPrecondition|ResourceExhausted|Internal|Unavailable|DataLoss|DeadlineExceeded\",job=\"etcd\"}[5m])) / (sum without (grpc_type, grpc_code) (rate(grpc_server_handled_total{job=\"etcd\"}[5m])) \u003e 2 and on () (sum(cluster_infrastructure_provider{type!~\"ipi|BareMetal\"} == bool 1)))) * 100 \u003e 10","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": {{ $value }}% of requests for {{ $labels.grpc_method }} failed on etcd instance {{ $labels.instance }}.","summary":"etcd cluster has high number of failed grpc requests."},"alerts":[],"health":"ok","evaluationTime":0.022958507,"lastEvaluation":"2023-01-09T15:40:45.982815139Z","type":"alerting"},{"state":"inactive","name":"etcdHighNumberOfFailedGRPCRequests","query":"(sum without (grpc_type, grpc_code) (rate(grpc_server_handled_total{grpc_code=~\"Unknown|FailedPrecondition|ResourceExhausted|Internal|Unavailable|DataLoss|DeadlineExceeded\",job=\"etcd\"}[5m])) / (sum without (grpc_type, grpc_code) (rate(grpc_server_handled_total{job=\"etcd\"}[5m])) \u003e 2 and on () (sum(cluster_infrastructure_provider{type!~\"ipi|BareMetal\"} == bool 1)))) * 100 \u003e 50","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": {{ $value }}% of requests for {{ $labels.grpc_method }} failed on etcd instance {{ $labels.instance }}.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdHighNumberOfFailedGRPCRequests.md","summary":"etcd cluster has high number of failed grpc requests."},"alerts":[],"health":"ok","evaluationTime":0.03016363,"lastEvaluation":"2023-01-09T15:40:46.005776161Z","type":"alerting"},{"state":"inactive","name":"etcdHighNumberOfLeaderChanges","query":"avg(changes(etcd_server_is_leader[10m])) \u003e 5","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"etcd cluster \"{{ $labels.job }}\": {{ $value }} average leader changes within the last 10 minutes. Frequent elections may be a sign of insufficient resources, high network latency, or disruptions by other components and should be investigated.","summary":"etcd cluster has high number of leader changes."},"alerts":[],"health":"ok","evaluationTime":0.000182023,"lastEvaluation":"2023-01-09T15:40:46.035941844Z","type":"alerting"},{"state":"inactive","name":"etcdInsufficientMembers","query":"sum without (instance, pod) (up{job=\"etcd\"} == bool 1 and etcd_server_has_leader{job=\"etcd\"} == bool 1) \u003c ((count without (instance, pod) (up{job=\"etcd\"}) + 1) / 2)","duration":180,"labels":{"severity":"critical"},"annotations":{"description":"etcd is reporting fewer instances are available than are needed ({{ $value }}). When etcd does not have a majority of instances available the Kubernetes and OpenShift APIs will reject read and write requests and operations that preserve the health of workloads cannot be performed. This can occur when multiple control plane nodes are powered off or are unable to connect to each other via the network. Check that all control plane nodes are powered on and that network connections between each machine are functional.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-etcd-operator/etcdInsufficientMembers.md","summary":"etcd is reporting that a majority of instances are unavailable."},"alerts":[],"health":"ok","evaluationTime":0.000328073,"lastEvaluation":"2023-01-09T15:40:46.036125936Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.065732992,"lastEvaluation":"2023-01-09T15:40:45.970723656Z"},{"name":"imageregistry.operations.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-image-registry-image-registry-rules-66faea63-9ccc-4abd-a5cf-81bdc1fd5f5f.yaml","rules":[{"name":"imageregistry:operations_count:sum","query":"label_replace(label_replace(sum by (operation) (imageregistry_request_duration_seconds_count{operation=\"BlobStore.ServeBlob\"}), \"operation\", \"get\", \"operation\", \"(.+)\"), \"resource_type\", \"blob\", \"resource_type\", \"\")","health":"ok","evaluationTime":0.000227282,"lastEvaluation":"2023-01-09T15:40:57.326642964Z","type":"recording"},{"name":"imageregistry:operations_count:sum","query":"label_replace(label_replace(sum by (operation) (imageregistry_request_duration_seconds_count{operation=\"BlobStore.Create\"}), \"operation\", \"create\", \"operation\", \"(.+)\"), \"resource_type\", \"blob\", \"resource_type\", \"\")","health":"ok","evaluationTime":0.000137627,"lastEvaluation":"2023-01-09T15:40:57.326872109Z","type":"recording"},{"name":"imageregistry:operations_count:sum","query":"label_replace(label_replace(sum by (operation) (imageregistry_request_duration_seconds_count{operation=\"ManifestService.Get\"}), \"operation\", \"get\", \"operation\", \"(.+)\"), \"resource_type\", \"manifest\", \"resource_type\", \"\")","health":"ok","evaluationTime":0.000129819,"lastEvaluation":"2023-01-09T15:40:57.327011218Z","type":"recording"},{"name":"imageregistry:operations_count:sum","query":"label_replace(label_replace(sum by (operation) (imageregistry_request_duration_seconds_count{operation=\"ManifestService.Put\"}), \"operation\", \"create\", \"operation\", \"(.+)\"), \"resource_type\", \"manifest\", \"resource_type\", \"\")","health":"ok","evaluationTime":0.00012978,"lastEvaluation":"2023-01-09T15:40:57.327142481Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000636522,"lastEvaluation":"2023-01-09T15:40:57.326638228Z"},{"name":"imagestreams.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-image-registry-imagestreams-rules-5005f615-c9d2-4e4c-a374-d1a05d54d74d.yaml","rules":[{"name":"imageregistry:imagestreamtags_count:sum","query":"sum by (location, source) (image_registry_image_stream_tags_total)","health":"ok","evaluationTime":0.000176738,"lastEvaluation":"2023-01-09T15:41:05.695746502Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000182606,"lastEvaluation":"2023-01-09T15:41:05.695743221Z"},{"name":"openshift-ingress-to-route-controller.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-ingress-operator-ingress-operator-53043f50-e871-4e4f-9a5f-ab6b0f2f5b96.yaml","rules":[{"state":"inactive","name":"IngressWithoutClassName","query":"openshift_ingress_to_route_controller_ingress_without_class_name == 1","duration":86400,"labels":{"severity":"warning"},"annotations":{"description":"This alert fires when there is an Ingress with an unset IngressClassName for longer than one day.","message":"Ingress {{ $labels.name }} is missing the IngressClassName for 1 day.","summary":"Ingress without IngressClassName for 1 day"},"alerts":[],"health":"ok","evaluationTime":0.000191026,"lastEvaluation":"2023-01-09T15:40:44.387142764Z","type":"alerting"},{"state":"inactive","name":"UnmanagedRoutes","query":"openshift_ingress_to_route_controller_route_with_unmanaged_owner == 1","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"This alert fires when there is a Route owned by an unmanaged Ingress.","message":"Route {{ $labels.name }} is owned by an unmanaged Ingress.","summary":"Route owned by an Ingress no longer managed"},"alerts":[],"health":"ok","evaluationTime":0.000137476,"lastEvaluation":"2023-01-09T15:40:44.38733588Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000338003,"lastEvaluation":"2023-01-09T15:40:44.387137693Z"},{"name":"openshift-ingress.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-ingress-operator-ingress-operator-53043f50-e871-4e4f-9a5f-ab6b0f2f5b96.yaml","rules":[{"state":"inactive","name":"HAProxyReloadFail","query":"template_router_reload_failure == 1","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"This alert fires when HAProxy fails to reload its configuration, which will result in the router not picking up recently created or modified routes.","message":"HAProxy reloads are failing on {{ $labels.pod }}. Router is not respecting recently created or modified routes","summary":"HAProxy reload failure"},"alerts":[],"health":"ok","evaluationTime":0.000139062,"lastEvaluation":"2023-01-09T15:40:51.283712198Z","type":"alerting"},{"state":"inactive","name":"HAProxyDown","query":"haproxy_up == 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"This alert fires when metrics report that HAProxy is down.","message":"HAProxy metrics are reporting that HAProxy is down on pod {{ $labels.namespace }} / {{ $labels.pod }}","summary":"HAProxy is down"},"alerts":[],"health":"ok","evaluationTime":0.000112897,"lastEvaluation":"2023-01-09T15:40:51.283853003Z","type":"alerting"},{"state":"inactive","name":"IngressControllerDegraded","query":"ingress_controller_conditions{condition=\"Degraded\"} == 1","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"This alert fires when the IngressController status is degraded.","message":"The {{ $labels.namespace }}/{{ $labels.name }} ingresscontroller is\ndegraded: {{ $labels.reason }}.\n","summary":"IngressController is degraded"},"alerts":[],"health":"ok","evaluationTime":0.000088697,"lastEvaluation":"2023-01-09T15:40:51.28396748Z","type":"alerting"},{"state":"inactive","name":"IngressControllerUnavailable","query":"ingress_controller_conditions{condition=\"Available\"} == 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"This alert fires when the IngressController is not available.","message":"The {{ $labels.namespace }}/{{ $labels.name }} ingresscontroller is\nunavailable: {{ $labels.reason }}.\n","summary":"IngressController is unavailable"},"alerts":[],"health":"ok","evaluationTime":0.000070425,"lastEvaluation":"2023-01-09T15:40:51.284057202Z","type":"alerting"},{"name":"cluster:route_metrics_controller_routes_per_shard:min","query":"min(route_metrics_controller_routes_per_shard)","health":"ok","evaluationTime":0.00012133,"lastEvaluation":"2023-01-09T15:40:51.284128922Z","type":"recording"},{"name":"cluster:route_metrics_controller_routes_per_shard:max","query":"max(route_metrics_controller_routes_per_shard)","health":"ok","evaluationTime":0.000079479,"lastEvaluation":"2023-01-09T15:40:51.284251617Z","type":"recording"},{"name":"cluster:route_metrics_controller_routes_per_shard:avg","query":"avg(route_metrics_controller_routes_per_shard)","health":"ok","evaluationTime":0.000096506,"lastEvaluation":"2023-01-09T15:40:51.284332716Z","type":"recording"},{"name":"cluster:route_metrics_controller_routes_per_shard:median","query":"quantile(0.5, route_metrics_controller_routes_per_shard)","health":"ok","evaluationTime":0.000092691,"lastEvaluation":"2023-01-09T15:40:51.284430871Z","type":"recording"},{"name":"cluster:openshift_route_info:tls_termination:sum","query":"sum by (tls_termination) (openshift_route_info)","health":"ok","evaluationTime":0.000120668,"lastEvaluation":"2023-01-09T15:40:51.284524821Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000939583,"lastEvaluation":"2023-01-09T15:40:51.283708026Z"},{"name":"insights","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-insights-insights-prometheus-rules-5850077f-4a5c-4557-bcdd-807c7809e3e7.yaml","rules":[{"state":"inactive","name":"InsightsDisabled","query":"max without (job, pod, service, instance) (cluster_operator_conditions{condition=\"Disabled\",name=\"insights\"} == 1)","duration":300,"labels":{"namespace":"openshift-insights","severity":"info"},"annotations":{"description":"Insights operator is disabled. In order to enable Insights and benefit from recommendations specific to your cluster, please follow steps listed in the documentation: https://docs.openshift.com/container-platform/latest/support/remote_health_monitoring/enabling-remote-health-reporting.html","summary":"Insights operator is disabled."},"alerts":[],"health":"ok","evaluationTime":0.000194267,"lastEvaluation":"2023-01-09T15:40:51.084351978Z","type":"alerting"},{"state":"inactive","name":"SimpleContentAccessNotAvailable","query":"max without (job, pod, service, instance) (max_over_time(cluster_operator_conditions{condition=\"SCAAvailable\",name=\"insights\",reason=\"NotFound\"}[5m]) == 0)","duration":300,"labels":{"namespace":"openshift-insights","severity":"info"},"annotations":{"description":"Simple content access (SCA) is not enabled. Once enabled, Insights Operator can automatically import the SCA certificates from Red Hat OpenShift Cluster Manager making it easier to use the content provided by your Red Hat subscriptions when creating container images. See https://docs.openshift.com/container-platform/latest/cicd/builds/running-entitled-builds.html for more information.","summary":"Simple content access certificates are not available."},"alerts":[],"health":"ok","evaluationTime":0.000171325,"lastEvaluation":"2023-01-09T15:40:51.084547977Z","type":"alerting"},{"state":"firing","name":"InsightsRecommendationActive","query":"insights_recommendation_active == 1","duration":300,"labels":{"severity":"info"},"annotations":{"description":"Insights recommendation \"{{ $labels.description }}\" with total risk \"{{ $labels.total_risk }}\" was detected on the cluster. More information is available at {{ $labels.info_link }}.","summary":"An Insights recommendation is active for this cluster."},"alerts":[{"labels":{"alertname":"InsightsRecommendationActive","container":"insights-operator","description":"Prometheus metrics data will be lost when the Prometheus pod is restarted or recreated","endpoint":"https","info_link":"https://console.redhat.com/openshift/insights/advisor/clusters/3c7653f6-78ff-477b-b860-2cce76acf539?first=ccx_rules_ocp.external.rules.empty_prometheus_db_volume|PROMETHEUS_DB_VOLUME_IS_EMPTY","instance":"10.130.0.18:8443","job":"metrics","namespace":"openshift-insights","pod":"insights-operator-f4589c8c5-rcpcj","service":"metrics","severity":"info","total_risk":"Moderate"},"annotations":{"description":"Insights recommendation \"Prometheus metrics data will be lost when the Prometheus pod is restarted or recreated\" with total risk \"Moderate\" was detected on the cluster. More information is available at https://console.redhat.com/openshift/insights/advisor/clusters/3c7653f6-78ff-477b-b860-2cce76acf539?first=ccx_rules_ocp.external.rules.empty_prometheus_db_volume|PROMETHEUS_DB_VOLUME_IS_EMPTY.","summary":"An Insights recommendation is active for this cluster."},"state":"firing","activeAt":"2023-01-09T05:02:21.083132617Z","value":"1e+00"}],"health":"ok","evaluationTime":0.000358707,"lastEvaluation":"2023-01-09T15:40:51.084721184Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000736892,"lastEvaluation":"2023-01-09T15:40:51.084347045Z"},{"name":"pre-release-lifecycle","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-api-usage-a189a7f1-e4a7-49b1-aa4d-ea1d20765ac0.yaml","rules":[{"state":"inactive","name":"APIRemovedInNextReleaseInUse","query":"group by (group, version, resource, removed_release) (apiserver_requested_deprecated_apis{removed_release=\"1.26\"}) * on (group, version, resource) group_left () sum by (group, version, resource) (rate(apiserver_request_total{system_client!=\"cluster-policy-controller\",system_client!=\"kube-controller-manager\"}[4h])) \u003e 0","duration":3600,"labels":{"namespace":"openshift-kube-apiserver","severity":"info"},"annotations":{"description":"Deprecated API that will be removed in the next version is being used. Removing the workload that is using the {{ $labels.group }}.{{ $labels.version }}/{{ $labels.resource }} API might be necessary for a successful upgrade to the next cluster version with Kubernetes {{ $labels.removed_release }}. Refer to `oc get apirequestcounts {{ $labels.resource }}.{{ $labels.version }}.{{ $labels.group }} -o yaml` to identify the workload.","summary":"Deprecated API that will be removed in the next version is being used."},"alerts":[],"health":"ok","evaluationTime":0.072332527,"lastEvaluation":"2023-01-09T15:40:48.447075836Z","type":"alerting"},{"state":"inactive","name":"APIRemovedInNextEUSReleaseInUse","query":"group by (group, version, resource, removed_release) (apiserver_requested_deprecated_apis{removed_release=~\"1[.]2[67]\"}) * on (group, version, resource) group_left () sum by (group, version, resource) (rate(apiserver_request_total{system_client!=\"cluster-policy-controller\",system_client!=\"kube-controller-manager\"}[4h])) \u003e 0","duration":3600,"labels":{"namespace":"openshift-kube-apiserver","severity":"info"},"annotations":{"description":"Deprecated API that will be removed in the next EUS version is being used. Removing the workload that is using the {{ $labels.group }}.{{ $labels.version }}/{{ $labels.resource }} API might be necessary for a successful upgrade to the next EUS cluster version with Kubernetes {{ $labels.removed_release }}. Refer to `oc get apirequestcounts {{ $labels.resource }}.{{ $labels.version }}.{{ $labels.group }} -o yaml` to identify the workload.","summary":"Deprecated API that will be removed in the next EUS version is being used."},"alerts":[],"health":"ok","evaluationTime":0.071735217,"lastEvaluation":"2023-01-09T15:40:48.519410536Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.144075896,"lastEvaluation":"2023-01-09T15:40:48.447072812Z"},{"name":"apiserver-audit","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-audit-errors-de905685-f0f2-4d3e-b154-93a78e79ec5f.yaml","rules":[{"state":"inactive","name":"AuditLogError","query":"sum by (apiserver, instance) (rate(apiserver_audit_error_total{apiserver=~\".+-apiserver\"}[5m])) / sum by (apiserver, instance) (rate(apiserver_audit_event_total{apiserver=~\".+-apiserver\"}[5m])) \u003e 0","duration":60,"labels":{"namespace":"openshift-kube-apiserver","severity":"warning"},"annotations":{"description":"An API Server had an error writing to an audit log.","summary":"An API Server instance was unable to write audit logs. This could be\ntriggered by the node running out of space, or a malicious actor\ntampering with the audit logs."},"alerts":[],"health":"ok","evaluationTime":0.000408754,"lastEvaluation":"2023-01-09T15:41:07.627236208Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000415716,"lastEvaluation":"2023-01-09T15:41:07.627231901Z"},{"name":"control-plane-cpu-utilization","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-cpu-utilization-ab5792b3-0c3e-4775-ab2d-4cbd5b572837.yaml","rules":[{"state":"inactive","name":"HighOverallControlPlaneCPU","query":"sum(100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[1m])) * 100) and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\")) / count(kube_node_role{role=\"master\"}) \u003e 60","duration":600,"labels":{"namespace":"openshift-kube-apiserver","severity":"warning"},"annotations":{"description":"Given three control plane nodes, the overall CPU utilization may only be about 2/3 of all available capacity. This is because if a single control plane node fails, the remaining two must handle the load of the cluster in order to be HA. If the cluster is using more than 2/3 of all capacity, if one control plane node fails, the remaining two are likely to fail when they take the load. To fix this, increase the CPU and memory on your control plane nodes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/ExtremelyHighIndividualControlPlaneCPU.md","summary":"CPU utilization across all three control plane nodes is higher than two control plane nodes can sustain; a single control plane node outage may cause a cascading failure; increase available CPU."},"alerts":[],"health":"ok","evaluationTime":0.000949731,"lastEvaluation":"2023-01-09T15:41:02.20420302Z","type":"alerting"},{"state":"inactive","name":"ExtremelyHighIndividualControlPlaneCPU","query":"100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[1m])) * 100) \u003e 90 and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\")","duration":300,"labels":{"namespace":"openshift-kube-apiserver","severity":"warning"},"annotations":{"description":"Extreme CPU pressure can cause slow serialization and poor performance from the kube-apiserver and etcd. When this happens, there is a risk of clients seeing non-responsive API requests which are issued again causing even more CPU pressure. It can also cause failing liveness probes due to slow etcd responsiveness on the backend. If one kube-apiserver fails under this condition, chances are you will experience a cascade as the remaining kube-apiservers are also under-provisioned. To fix this, increase the CPU and memory on your control plane nodes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/ExtremelyHighIndividualControlPlaneCPU.md","summary":"CPU utilization on a single control plane node is very high, more CPU pressure is likely to cause a failover; increase available CPU."},"alerts":[],"health":"ok","evaluationTime":0.000702989,"lastEvaluation":"2023-01-09T15:41:02.20515477Z","type":"alerting"},{"state":"inactive","name":"ExtremelyHighIndividualControlPlaneCPU","query":"100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[1m])) * 100) \u003e 90 and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\")","duration":3600,"labels":{"namespace":"openshift-kube-apiserver","severity":"critical"},"annotations":{"description":"Extreme CPU pressure can cause slow serialization and poor performance from the kube-apiserver and etcd. When this happens, there is a risk of clients seeing non-responsive API requests which are issued again causing even more CPU pressure. It can also cause failing liveness probes due to slow etcd responsiveness on the backend. If one kube-apiserver fails under this condition, chances are you will experience a cascade as the remaining kube-apiservers are also under-provisioned. To fix this, increase the CPU and memory on your control plane nodes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/ExtremelyHighIndividualControlPlaneCPU.md","summary":"Sustained high CPU utilization on a single control plane node, more CPU pressure is likely to cause a failover; increase available CPU."},"alerts":[],"health":"ok","evaluationTime":0.000659551,"lastEvaluation":"2023-01-09T15:41:02.205860023Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002322594,"lastEvaluation":"2023-01-09T15:41:02.204199412Z"},{"name":"apiserver-requests-in-flight","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-kube-apiserver-requests-8a8dfdc8-8c13-4058-b48b-ca92857b7c04.yaml","rules":[{"name":"cluster:apiserver_current_inflight_requests:sum:max_over_time:2m","query":"max_over_time(sum by (apiserver, requestKind) (apiserver_current_inflight_requests{apiserver=~\"openshift-apiserver|kube-apiserver\"})[2m:])","health":"ok","evaluationTime":0.000315454,"lastEvaluation":"2023-01-09T15:40:59.640623195Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000321187,"lastEvaluation":"2023-01-09T15:40:59.640620243Z"},{"name":"kube-apiserver-slos-basic","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-kube-apiserver-slos-basic-9029a844-efbb-4d79-ad0c-327137943803.yaml","rules":[{"state":"inactive","name":"KubeAPIErrorBudgetBurn","query":"sum(apiserver_request:burnrate1h) \u003e (14.4 * 0.01) and sum(apiserver_request:burnrate5m) \u003e (14.4 * 0.01)","duration":120,"labels":{"long":"1h","namespace":"openshift-kube-apiserver","severity":"critical","short":"5m"},"annotations":{"description":"The API server is burning too much error budget. This alert fires when too many requests are failing with high latency. Use the 'API Performance' monitoring dashboards to narrow down the request states and latency. The 'etcd' monitoring dashboards also provides metrics to help determine etcd stability and performance.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/KubeAPIErrorBudgetBurn.md","summary":"The API server is burning too much error budget."},"alerts":[],"health":"ok","evaluationTime":0.000275847,"lastEvaluation":"2023-01-09T15:41:06.58522009Z","type":"alerting"},{"state":"inactive","name":"KubeAPIErrorBudgetBurn","query":"sum(apiserver_request:burnrate6h) \u003e (6 * 0.01) and sum(apiserver_request:burnrate30m) \u003e (6 * 0.01)","duration":900,"labels":{"long":"6h","namespace":"openshift-kube-apiserver","severity":"critical","short":"30m"},"annotations":{"description":"The API server is burning too much error budget. This alert fires when too many requests are failing with high latency. Use the 'API Performance' monitoring dashboards to narrow down the request states and latency. The 'etcd' monitoring dashboards also provides metrics to help determine etcd stability and performance.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/KubeAPIErrorBudgetBurn.md","summary":"The API server is burning too much error budget."},"alerts":[],"health":"ok","evaluationTime":0.000247736,"lastEvaluation":"2023-01-09T15:41:06.585497468Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000531069,"lastEvaluation":"2023-01-09T15:41:06.585216442Z"},{"name":"kube-apiserver.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-kube-apiserver-slos-basic-9029a844-efbb-4d79-ad0c-327137943803.yaml","rules":[{"name":"apiserver_request:burnrate5m","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[5m])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[5m]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[5m]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[5m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[5m]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[5m]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.036718148,"lastEvaluation":"2023-01-09T15:40:41.410973513Z","type":"recording"},{"name":"apiserver_request:burnrate30m","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[30m])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[30m]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[30m]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[30m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[30m]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[30m]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.044631655,"lastEvaluation":"2023-01-09T15:40:41.447694981Z","type":"recording"},{"name":"apiserver_request:burnrate1h","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[1h])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[1h]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1h]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[1h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[1h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[1h]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.070572874,"lastEvaluation":"2023-01-09T15:40:41.492329671Z","type":"recording"},{"name":"apiserver_request:burnrate6h","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[6h])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[6h]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[6h]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[6h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[6h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[6h]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.36620081,"lastEvaluation":"2023-01-09T15:40:41.56290665Z","type":"recording"},{"name":"apiserver_request:burnrate1h","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1h]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.016427547,"lastEvaluation":"2023-01-09T15:40:41.929111207Z","type":"recording"},{"name":"apiserver_request:burnrate30m","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[30m]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.009724605,"lastEvaluation":"2023-01-09T15:40:41.945541355Z","type":"recording"},{"name":"apiserver_request:burnrate5m","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.007767718,"lastEvaluation":"2023-01-09T15:40:41.955268745Z","type":"recording"},{"name":"apiserver_request:burnrate6h","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[6h]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.071187853,"lastEvaluation":"2023-01-09T15:40:41.963039158Z","type":"recording"},{"name":"code_resource:apiserver_request_total:rate5m","query":"sum by (code, resource) (rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[5m]))","labels":{"verb":"read"},"health":"ok","evaluationTime":0.007580023,"lastEvaluation":"2023-01-09T15:40:42.0342303Z","type":"recording"},{"name":"code_resource:apiserver_request_total:rate5m","query":"sum by (code, resource) (rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.003609185,"lastEvaluation":"2023-01-09T15:40:42.041813761Z","type":"recording"},{"name":"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (le, resource) (rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",verb=~\"LIST|GET\"}[5m]))) \u003e 0","labels":{"quantile":"0.99","verb":"read"},"health":"ok","evaluationTime":0.066941789,"lastEvaluation":"2023-01-09T15:40:42.045426258Z","type":"recording"},{"name":"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (le, resource) (rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[5m]))) \u003e 0","labels":{"quantile":"0.99","verb":"write"},"health":"ok","evaluationTime":0.04180356,"lastEvaluation":"2023-01-09T15:40:42.112370849Z","type":"recording"},{"name":"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum without (instance, pod) (rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.073337539,"lastEvaluation":"2023-01-09T15:40:42.154177097Z","type":"recording"},{"name":"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile","query":"histogram_quantile(0.9, sum without (instance, pod) (rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])))","labels":{"quantile":"0.9"},"health":"ok","evaluationTime":0.071872318,"lastEvaluation":"2023-01-09T15:40:42.227519763Z","type":"recording"},{"name":"cluster_quantile:apiserver_request_duration_seconds:histogram_quantile","query":"histogram_quantile(0.5, sum without (instance, pod) (rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",subresource!=\"log\",verb!~\"LIST|WATCH|WATCHLIST|DELETECOLLECTION|PROXY|CONNECT\"}[5m])))","labels":{"quantile":"0.5"},"health":"ok","evaluationTime":0.071253811,"lastEvaluation":"2023-01-09T15:40:42.299397712Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.959689039,"lastEvaluation":"2023-01-09T15:40:41.410967486Z"},{"name":"kube-apiserver-slos-extended","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-kube-apiserver-slos-extended-95289c81-04d7-43f8-84e7-ef6a08abfd12.yaml","rules":[{"state":"inactive","name":"KubeAPIErrorBudgetBurn","query":"sum(apiserver_request:burnrate1d) \u003e (3 * 0.01) and sum(apiserver_request:burnrate2h) \u003e (3 * 0.01)","duration":3600,"labels":{"long":"1d","namespace":"openshift-kube-apiserver","severity":"warning","short":"2h"},"annotations":{"description":"The API server is burning too much error budget. This alert fires when too many requests are failing with high latency. Use the 'API Performance' monitoring dashboards to narrow down the request states and latency. The 'etcd' monitoring dashboards also provides metrics to help determine etcd stability and performance.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/KubeAPIErrorBudgetBurn.md","summary":"The API server is burning too much error budget."},"alerts":[],"health":"ok","evaluationTime":0.000329419,"lastEvaluation":"2023-01-09T15:41:02.754488379Z","type":"alerting"},{"state":"inactive","name":"KubeAPIErrorBudgetBurn","query":"sum(apiserver_request:burnrate3d) \u003e (1 * 0.01) and sum(apiserver_request:burnrate6h) \u003e (1 * 0.01)","duration":10800,"labels":{"long":"3d","namespace":"openshift-kube-apiserver","severity":"warning","short":"6h"},"annotations":{"description":"The API server is burning too much error budget. This alert fires when too many requests are failing with high latency. Use the 'API Performance' monitoring dashboards to narrow down the request states and latency. The 'etcd' monitoring dashboards also provides metrics to help determine etcd stability and performance.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-apiserver-operator/KubeAPIErrorBudgetBurn.md","summary":"The API server is burning too much error budget."},"alerts":[],"health":"ok","evaluationTime":0.000189246,"lastEvaluation":"2023-01-09T15:41:02.754819697Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000527112,"lastEvaluation":"2023-01-09T15:41:02.754484003Z"},{"name":"kube-apiserver.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-kube-apiserver-slos-extended-95289c81-04d7-43f8-84e7-ef6a08abfd12.yaml","rules":[{"name":"apiserver_request:burnrate2h","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[2h])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[2h]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[2h]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[2h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[2h]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[2h]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.143516437,"lastEvaluation":"2023-01-09T15:41:08.304235677Z","type":"recording"},{"name":"apiserver_request:burnrate1d","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[1d])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[1d]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[1d]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[1d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[1d]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[1d]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.535276869,"lastEvaluation":"2023-01-09T15:41:08.447755122Z","type":"recording"},{"name":"apiserver_request:burnrate3d","query":"label_replace(sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"LIST|GET\"}[3d])) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[3d]))), \"type\", \"error\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d])) - (sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",scope=\"resource\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d])) or vector(0))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d]))), \"type\", \"slow-resource\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"5\",scope=\"namespace\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",subresource!~\"proxy|log|exec\",verb=~\"LIST|GET\"}[3d]))), \"type\", \"slow-namespace\", \"_none_\", \"\") or label_replace((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",scope=\"cluster\",verb=~\"LIST|GET\"}[3d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"30\",scope=\"cluster\",verb=~\"LIST|GET\"}[3d]))) / scalar(sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"LIST|GET\"}[3d]))), \"type\", \"slow-cluster\", \"_none_\", \"\")","labels":{"verb":"read"},"health":"ok","evaluationTime":0.54070573,"lastEvaluation":"2023-01-09T15:41:08.983035198Z","type":"recording"},{"name":"apiserver_request:burnrate1d","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[1d]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.11807208,"lastEvaluation":"2023-01-09T15:41:09.523744707Z","type":"recording"},{"name":"apiserver_request:burnrate2h","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[2h]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.032197526,"lastEvaluation":"2023-01-09T15:41:09.641820248Z","type":"recording"},{"name":"apiserver_request:burnrate3d","query":"((sum(rate(apiserver_request_duration_seconds_count{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d])) - sum(rate(apiserver_request_duration_seconds_bucket{job=\"apiserver\",le=\"1\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))) + sum(rate(apiserver_request_total{code=~\"5..\",job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))) / sum(rate(apiserver_request_total{job=\"apiserver\",verb=~\"POST|PUT|PATCH|DELETE\"}[3d]))","labels":{"verb":"write"},"health":"ok","evaluationTime":0.114673513,"lastEvaluation":"2023-01-09T15:41:09.674020615Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":1.484466497,"lastEvaluation":"2023-01-09T15:41:08.304231469Z"},{"name":"cluster-version","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-operator-kube-apiserver-operator-f78b269c-96e9-4925-921b-69531469aa5a.yaml","rules":[{"state":"inactive","name":"TechPreviewNoUpgrade","query":"cluster_feature_set{name!=\"\",namespace=\"openshift-kube-apiserver-operator\"} == 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Cluster has enabled Technology Preview features that cannot be undone and will prevent upgrades. The TechPreviewNoUpgrade feature set is not recommended on production clusters.","summary":"Cluster has enabled tech preview features that will prevent upgrades."},"alerts":[],"health":"ok","evaluationTime":0.002763704,"lastEvaluation":"2023-01-09T15:40:41.725289992Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002775699,"lastEvaluation":"2023-01-09T15:40:41.725282375Z"},{"name":"pod-security-violation","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-apiserver-podsecurity-628650c8-faa0-4f71-9d97-9cb13ad63cda.yaml","rules":[{"state":"firing","name":"PodSecurityViolation","query":"sum by (policy_level) (increase(pod_security_evaluations_total{decision=\"deny\",mode=\"audit\",resource=\"pod\"}[1d])) \u003e 0","duration":0,"labels":{"namespace":"openshift-kube-apiserver","severity":"info"},"annotations":{"description":"A workload (pod, deployment, deamonset, ...) was created somewhere in the cluster but it did not match the PodSecurity \"{{ $labels.policy_level }}\" profile defined by its namespace either via the cluster-wide configuration (which triggers on a \"restricted\" profile violations) or by the namespace local Pod Security labels. Refer to Kubernetes documentation on Pod Security Admission to learn more about these violations.","summary":"One or more workloads users created in the cluster don't match their Pod Security profile"},"alerts":[{"labels":{"alertname":"PodSecurityViolation","namespace":"openshift-kube-apiserver","policy_level":"restricted","severity":"info"},"annotations":{"description":"A workload (pod, deployment, deamonset, ...) was created somewhere in the cluster but it did not match the PodSecurity \"restricted\" profile defined by its namespace either via the cluster-wide configuration (which triggers on a \"restricted\" profile violations) or by the namespace local Pod Security labels. Refer to Kubernetes documentation on Pod Security Admission to learn more about these violations.","summary":"One or more workloads users created in the cluster don't match their Pod Security profile"},"state":"firing","activeAt":"2023-01-09T05:41:26.498837386Z","value":"5.504460710382514e+01"}],"health":"ok","evaluationTime":0.000796181,"lastEvaluation":"2023-01-09T15:40:56.499843026Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000804644,"lastEvaluation":"2023-01-09T15:40:56.499837793Z"},{"name":"cluster-version","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-controller-manager-operator-kube-controller-manager-operator-cf2fa895-980a-4e9e-a5f4-af01a89345a6.yaml","rules":[{"state":"inactive","name":"KubeControllerManagerDown","query":"absent(up{job=\"kube-controller-manager\"} == 1)","duration":900,"labels":{"namespace":"openshift-kube-controller-manager","severity":"critical"},"annotations":{"description":"KubeControllerManager has disappeared from Prometheus target discovery.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-controller-manager-operator/KubeControllerManagerDown.md","summary":"Target disappeared from Prometheus target discovery."},"alerts":[],"health":"ok","evaluationTime":0.000182708,"lastEvaluation":"2023-01-09T15:40:41.642298805Z","type":"alerting"},{"state":"inactive","name":"PodDisruptionBudgetAtLimit","query":"max by (namespace, poddisruptionbudget) (kube_poddisruptionbudget_status_current_healthy == kube_poddisruptionbudget_status_desired_healthy and on (namespace, poddisruptionbudget) kube_poddisruptionbudget_status_expected_pods \u003e 0)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"The pod disruption budget is at the minimum disruptions allowed level. The number of current healthy pods is equal to the desired healthy pods.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-controller-manager-operator/PodDisruptionBudgetAtLimit.md","summary":"The pod disruption budget is preventing further disruption to pods."},"alerts":[],"health":"ok","evaluationTime":0.000467706,"lastEvaluation":"2023-01-09T15:40:41.642483489Z","type":"alerting"},{"state":"inactive","name":"PodDisruptionBudgetLimit","query":"max by (namespace, poddisruptionbudget) (kube_poddisruptionbudget_status_current_healthy \u003c kube_poddisruptionbudget_status_desired_healthy)","duration":900,"labels":{"severity":"critical"},"annotations":{"description":"The pod disruption budget is below the minimum disruptions allowed level and is not satisfied. The number of current healthy pods is less than the desired healthy pods.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-controller-manager-operator/PodDisruptionBudgetLimit.md","summary":"The pod disruption budget registers insufficient amount of pods."},"alerts":[],"health":"ok","evaluationTime":0.000367372,"lastEvaluation":"2023-01-09T15:40:41.642952318Z","type":"alerting"},{"state":"inactive","name":"GarbageCollectorSyncFailed","query":"rate(garbagecollector_controller_resources_sync_error_total[5m]) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Garbage Collector had a problem with syncing and monitoring the available resources. Please see KubeControllerManager logs for more details.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-kube-controller-manager-operator/GarbageCollectorSyncFailed.md","summary":"There was a problem with syncing the resources for garbage collection."},"alerts":[],"health":"ok","evaluationTime":0.000107009,"lastEvaluation":"2023-01-09T15:40:41.643321635Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001135795,"lastEvaluation":"2023-01-09T15:40:41.642295367Z"},{"name":"cluster-version","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-scheduler-operator-kube-scheduler-operator-2e3d50cc-bef2-4d8e-aa76-f4e8acd88dc8.yaml","rules":[{"state":"inactive","name":"KubeSchedulerDown","query":"absent(up{job=\"scheduler\"} == 1)","duration":900,"labels":{"namespace":"openshift-kube-scheduler","severity":"critical"},"annotations":{"description":"KubeScheduler has disappeared from Prometheus target discovery.","summary":"Target disappeared from Prometheus target discovery."},"alerts":[],"health":"ok","evaluationTime":0.000199159,"lastEvaluation":"2023-01-09T15:41:09.890636509Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000205484,"lastEvaluation":"2023-01-09T15:41:09.890633234Z"},{"name":"scheduler-legacy-policy-deprecated","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-kube-scheduler-operator-kube-scheduler-operator-2e3d50cc-bef2-4d8e-aa76-f4e8acd88dc8.yaml","rules":[{"state":"inactive","name":"SchedulerLegacyPolicySet","query":"cluster_legacy_scheduler_policy \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"The scheduler is currently configured to use a legacy scheduler policy API. Use of the policy API is deprecated and removed in 4.10.","summary":"Legacy scheduler policy API in use by the scheduler."},"alerts":[],"health":"ok","evaluationTime":0.000141903,"lastEvaluation":"2023-01-09T15:40:51.716495005Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00014736,"lastEvaluation":"2023-01-09T15:40:51.716492298Z"},{"name":"logging_clusterlogging_telemetry.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-logging-collector-31130e43-1ec7-4c6e-b4c6-ee51cb06e539.yaml","rules":[{"name":"cluster:log_collected_bytes_total:sum","query":"sum by (cluster) (log_collected_bytes_total)","health":"ok","evaluationTime":0.000114404,"lastEvaluation":"2023-01-09T15:40:55.590579938Z","type":"recording"},{"name":"cluster:log_logged_bytes_total:sum","query":"sum by (cluster) (log_logged_bytes_total)","health":"ok","evaluationTime":0.002804565,"lastEvaluation":"2023-01-09T15:40:55.590696466Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.002928897,"lastEvaluation":"2023-01-09T15:40:55.590575226Z"},{"name":"logging_collector.alerts","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-logging-collector-31130e43-1ec7-4c6e-b4c6-ee51cb06e539.yaml","rules":[{"state":"inactive","name":"CollectorNodeDown","query":"up{container=\"collector\",job=\"collector\"} == 0 or absent(up{container=\"collector\",job=\"collector\"}) == 1","duration":600,"labels":{"namespace":"openshift-logging","service":"collector","severity":"critical"},"annotations":{"message":"Prometheus could not scrape {{ $labels.container }} for more than 10m.","summary":"Collector cannot be scraped"},"alerts":[],"health":"ok","evaluationTime":0.000248357,"lastEvaluation":"2023-01-09T15:40:41.513476613Z","type":"alerting"},{"state":"inactive","name":"CollectorHighErrorRate","query":"100 * (sum by (pod, instance) (rate(vector_component_errors_total[2m])) / sum by (pod, instance) (rate(vector_component_received_events_total[2m]))) \u003e 10","duration":900,"labels":{"namespace":"openshift-logging","severity":"warning"},"annotations":{"message":"{{ $value }}% of records have resulted in an error by vector {{ $labels.instance }} component.","summary":"Vector component errors are high"},"alerts":[],"health":"ok","evaluationTime":0.004279189,"lastEvaluation":"2023-01-09T15:40:41.51372663Z","type":"alerting"},{"state":"inactive","name":"CollectorVeryHighErrorRate","query":"100 * (sum by (pod, instance) (rate(vector_component_errors_total[2m])) / sum by (pod, instance) (rate(vector_component_received_events_total[2m]))) \u003e 25","duration":900,"labels":{"namespace":"openshift-logging","severity":"critical"},"annotations":{"message":"{{ $value }}% of records have resulted in an error by vector {{ $labels.instance }} component.","summary":"Vector component errors are very high"},"alerts":[],"health":"ok","evaluationTime":0.003973369,"lastEvaluation":"2023-01-09T15:40:41.518007999Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.008511177,"lastEvaluation":"2023-01-09T15:40:41.513473311Z"},{"name":"logging_loki.alerts","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-logging-lokistack-sample-prometheus-rule-a6f717c9-1d7a-4cfe-9c44-5387569df60c.yaml","rules":[{"state":"inactive","name":"LokiRequestErrors","query":"sum by (job, namespace, route) (job_namespace_route_statuscode:loki_request_duration_seconds_count:irate1m{status_code=~\"5..\"}) / sum by (job, namespace, route) (job_namespace_route_statuscode:loki_request_duration_seconds_count:irate1m) * 100 \u003e 10","duration":900,"labels":{"severity":"critical"},"annotations":{"message":"{{ $labels.job }} {{ $labels.route }} is experiencing {{ printf \"%.2f\" $value }}% errors.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Request-Errors","summary":"At least 10% of requests are responded by 5xx server errors."},"alerts":[],"health":"ok","evaluationTime":0.000413977,"lastEvaluation":"2023-01-09T15:41:06.254331507Z","type":"alerting"},{"state":"inactive","name":"LokiStackWriteRequestErrors","query":"sum by (job, namespace) (code_handler_job_namespace:lokistack_gateway_http_requests:irate1m{code=~\"5..\",handler=\"push\"}) / sum by (job, namespace) (code_handler_job_namespace:lokistack_gateway_http_requests:irate1m{handler=\"push\"}) * 100 \u003e 10","duration":900,"labels":{"severity":"critical"},"annotations":{"message":"{{ printf \"%.2f\" $value }}% of write requests from {{ $labels.job }} in {{ $labels.namespace }} are returned with server errors.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#LokiStack-Write-Request-Errors","summary":"At least 10% of write requests to the lokistack-gateway are responded with 5xx server errors."},"alerts":[],"health":"ok","evaluationTime":0.000222175,"lastEvaluation":"2023-01-09T15:41:06.254747457Z","type":"alerting"},{"state":"inactive","name":"LokiStackReadRequestErrors","query":"sum by (job, namespace) (code_handler_job_namespace:lokistack_gateway_http_requests:irate1m{code=~\"5..\",handler=~\"query|query_range|label|labels|label_values\"}) / sum by (job, namespace) (code_handler_job_namespace:lokistack_gateway_http_requests:irate1m{handler=~\"query|query_range|label|labels|label_values\"}) * 100 \u003e 10","duration":900,"labels":{"severity":"critical"},"annotations":{"message":"{{ printf \"%.2f\" $value }}% of query requests from {{ $labels.job }} in {{ $labels.namespace }} are returned with server errors.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#LokiStack-Read-Request-Errors","summary":"At least 10% of query requests to the lokistack-gateway are responded with 5xx server errors."},"alerts":[],"health":"ok","evaluationTime":0.000279899,"lastEvaluation":"2023-01-09T15:41:06.254971527Z","type":"alerting"},{"state":"inactive","name":"LokiRequestPanics","query":"sum by (job, namespace) (increase(loki_panic_total[10m])) \u003e 0","duration":0,"labels":{"severity":"critical"},"annotations":{"message":"{{ $labels.job }} is experiencing an increase of {{ $value }} panics.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Request-Panics","summary":"A panic was triggered."},"alerts":[],"health":"ok","evaluationTime":0.000181698,"lastEvaluation":"2023-01-09T15:41:06.255252748Z","type":"alerting"},{"state":"inactive","name":"LokiRequestLatency","query":"histogram_quantile(0.99, sum by (job, le, namespace, route) (irate(loki_request_duration_seconds_bucket{route!~\"(?i).*tail.*\"}[1m]))) \u003e 1","duration":900,"labels":{"severity":"critical"},"annotations":{"message":"{{ $labels.job }} {{ $labels.route }} is experiencing {{ printf \"%.2f\" $value }}s 99th percentile latency.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Request-Latency","summary":"The 99th percentile is experiencing high latency (higher than 1 second)."},"alerts":[],"health":"ok","evaluationTime":0.002991586,"lastEvaluation":"2023-01-09T15:41:06.255436147Z","type":"alerting"},{"state":"inactive","name":"LokiTenantRateLimit","query":"sum by (job, namespace, route) (job_namespace_route_statuscode:loki_request_duration_seconds_count:irate1m{status_code=\"429\"}) / sum by (job, namespace, route) (job_namespace_route_statuscode:loki_request_duration_seconds_count:irate1m) * 100 \u003e 10","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"{{ $labels.job }} {{ $labels.route }} is experiencing 429 errors.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Tenant-Rate-Limit","summary":"At least 10% of requests are responded with the rate limit error code."},"alerts":[],"health":"ok","evaluationTime":0.000266251,"lastEvaluation":"2023-01-09T15:41:06.258429318Z","type":"alerting"},{"state":"inactive","name":"LokiStorageSlowWrite","query":"histogram_quantile(0.99, sum by (job, le, namespace) (job_le_namespace_operation:loki_boltdb_shipper_request_duration_seconds_bucket:rate5m{operation=\"WRITE\"})) \u003e 1","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"The storage path is experiencing slow write response rates.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Storage-Slow-Write","summary":"The storage path is experiencing slow write response rates."},"alerts":[],"health":"ok","evaluationTime":0.0000904,"lastEvaluation":"2023-01-09T15:41:06.258696722Z","type":"alerting"},{"state":"inactive","name":"LokiStorageSlowRead","query":"histogram_quantile(0.99, sum by (job, le, namespace) (job_le_namespace_operation:loki_boltdb_shipper_request_duration_seconds_bucket:rate5m{operation=\"Shipper.Query\"})) \u003e 5","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"The storage path is experiencing slow read response rates.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Storage-Slow-Read","summary":"The storage path is experiencing slow read response rates."},"alerts":[],"health":"ok","evaluationTime":0.000297015,"lastEvaluation":"2023-01-09T15:41:06.258788125Z","type":"alerting"},{"state":"inactive","name":"LokiWritePathHighLoad","query":"sum by (job, namespace) (loki_ingester_wal_replay_flushing) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"The write path is experiencing high load.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Write-Path-High-Load","summary":"The write path is experiencing high load, causing backpressure storage flushing."},"alerts":[],"health":"ok","evaluationTime":0.000079932,"lastEvaluation":"2023-01-09T15:41:06.259086572Z","type":"alerting"},{"state":"inactive","name":"LokiReadPathHighLoad","query":"histogram_quantile(0.99, sum by (job, le, namespace) (rate(loki_logql_querystats_latency_seconds_bucket[5m]))) \u003e 30","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"The read path is experiencing high load.","runbook_url":"https://github.com/grafana/loki/blob/main/operator/docs/lokistack/sop.md#Loki-Read-Path-High-Load","summary":"The read path has high volume of queries, causing longer response times."},"alerts":[],"health":"ok","evaluationTime":0.000455085,"lastEvaluation":"2023-01-09T15:41:06.259167802Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.005299221,"lastEvaluation":"2023-01-09T15:41:06.254327141Z"},{"name":"logging_loki.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-logging-lokistack-sample-prometheus-rule-a6f717c9-1d7a-4cfe-9c44-5387569df60c.yaml","rules":[{"name":"code_handler_job_namespace:lokistack_gateway_http_requests:irate1m","query":"sum by (code, handler, job, namespace) (irate(http_requests_total{container=\"gateway\",group=\"logsv1\"}[1m]))","health":"ok","evaluationTime":0.000219706,"lastEvaluation":"2023-01-09T15:41:04.456310136Z","type":"recording"},{"name":"job_namespace_route_statuscode:loki_request_duration_seconds_count:irate1m","query":"sum by (job, namespace, route, status_code) (irate(loki_request_duration_seconds_count[1m]))","health":"ok","evaluationTime":0.000342,"lastEvaluation":"2023-01-09T15:41:04.456531551Z","type":"recording"},{"name":"job_le_namespace_operation:loki_boltdb_shipper_request_duration_seconds_bucket:rate5m","query":"sum by (job, le, namespace, operation) (rate(loki_boltdb_shipper_request_duration_seconds_bucket[5m]))","health":"ok","evaluationTime":0.000440248,"lastEvaluation":"2023-01-09T15:41:04.456875074Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.001010826,"lastEvaluation":"2023-01-09T15:41:04.456306735Z"},{"name":"machine-api-operator-metrics-collector-up","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-api-machine-api-operator-prometheus-rules-7686401d-d192-4a40-bcb9-50c5624055c7.yaml","rules":[{"state":"inactive","name":"MachineAPIOperatorMetricsCollectionFailing","query":"mapi_mao_collector_up == 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"For more details:  oc logs \u003cmachine-api-operator-pod-name\u003e -n openshift-machine-api","summary":"machine api operator metrics collection is failing."},"alerts":[],"health":"ok","evaluationTime":0.000122872,"lastEvaluation":"2023-01-09T15:40:52.545736844Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000128013,"lastEvaluation":"2023-01-09T15:40:52.545733935Z"},{"name":"machine-health-check-unterminated-short-circuit","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-api-machine-api-operator-prometheus-rules-7686401d-d192-4a40-bcb9-50c5624055c7.yaml","rules":[{"state":"inactive","name":"MachineHealthCheckUnterminatedShortCircuit","query":"mapi_machinehealthcheck_short_circuit == 1","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"The number of unhealthy machines has exceeded the `maxUnhealthy` limit for the check, you should check\nthe status of machines in the cluster.\n","summary":"machine health check {{ $labels.name }} has been disabled by short circuit for more than 30 minutes"},"alerts":[],"health":"ok","evaluationTime":0.000152265,"lastEvaluation":"2023-01-09T15:40:52.499599598Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000159437,"lastEvaluation":"2023-01-09T15:40:52.49959532Z"},{"name":"machine-not-yet-deleted","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-api-machine-api-operator-prometheus-rules-7686401d-d192-4a40-bcb9-50c5624055c7.yaml","rules":[{"state":"inactive","name":"MachineNotYetDeleted","query":"sum by (name, namespace) (avg_over_time(mapi_machine_created_timestamp_seconds{phase=\"Deleting\"}[15m])) \u003e 0","duration":21600,"labels":{"severity":"warning"},"annotations":{"description":"The machine is not properly deleting, this may be due to a configuration issue with the\ninfrastructure provider, or because workloads on the node have PodDisruptionBudgets or\nlong termination periods which are preventing deletion.\n","summary":"machine {{ $labels.name }} has been in Deleting phase for more than 6 hours"},"alerts":[],"health":"ok","evaluationTime":0.000256796,"lastEvaluation":"2023-01-09T15:41:01.182038898Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000267546,"lastEvaluation":"2023-01-09T15:41:01.182033364Z"},{"name":"machine-with-no-running-phase","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-api-machine-api-operator-prometheus-rules-7686401d-d192-4a40-bcb9-50c5624055c7.yaml","rules":[{"state":"inactive","name":"MachineWithNoRunningPhase","query":"sum by (name, namespace) (mapi_machine_created_timestamp_seconds{phase!~\"Running|Deleting\"}) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"The machine has been without a Running or Deleting phase for more than 60 minutes.\nThe machine may not have been provisioned properly from the infrastructure provider, or\nit might have issues with CertificateSigningRequests being approved.\n","summary":"machine {{ $labels.name }} is in phase: {{ $labels.phase }}"},"alerts":[],"health":"ok","evaluationTime":0.00017313,"lastEvaluation":"2023-01-09T15:40:51.785649369Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000179186,"lastEvaluation":"2023-01-09T15:40:51.785646083Z"},{"name":"machine-without-valid-node-ref","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-api-machine-api-operator-prometheus-rules-7686401d-d192-4a40-bcb9-50c5624055c7.yaml","rules":[{"state":"inactive","name":"MachineWithoutValidNode","query":"sum by (name, namespace) (mapi_machine_created_timestamp_seconds unless on (node) kube_node_info) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"If the machine never became a node, you should diagnose the machine related failures.\nIf the node was deleted from the API, you may delete the machine if appropriate.\n","summary":"machine {{ $labels.name }} does not have valid node reference"},"alerts":[],"health":"ok","evaluationTime":0.000303421,"lastEvaluation":"2023-01-09T15:40:57.495362564Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000311637,"lastEvaluation":"2023-01-09T15:40:57.495357435Z"},{"name":"mcc-paused-pool-kubelet-ca","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-controller-61803f78-c719-402e-b0dc-7db31491b0fd.yaml","rules":[{"state":"inactive","name":"MachineConfigControllerPausedPoolKubeletCA","query":"max by (namespace, pool) (last_over_time(machine_config_controller_paused_pool_kubelet_ca[5m])) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Machine config pools have a 'pause' feature, which allows config to be rendered, but prevents it from being rolled out to the nodes. This alert indicates that a certificate rotation has taken place, and the new kubelet-ca certificate bundle has been rendered into a machine config, but because the pool '{{$labels.pool}}' is paused, the config cannot be rolled out to the nodes in that pool. You will notice almost immediately that for nodes in pool '{{$labels.pool}}', pod logs will not be visible in the console and interactive commands (oc log, oc exec, oc debug, oc attach) will not work. You must unpause machine config pool '{{$labels.pool}}' to let the certificates through before the kube-apiserver-to-kubelet-signer certificate expires on {{ $value | humanizeTimestamp }} or this pool's nodes will cease to function properly.","runbook_url":"https://github.com/openshift/blob/master/alerts/machine-config-operator/MachineConfigControllerPausedPoolKubeletCA.md","summary":"Paused machine configuration pool '{{$labels.pool}}' is blocking a necessary certificate rotation and must be unpaused before the current kube-apiserver-to-kubelet-signer certificate expires on {{ $value | humanizeTimestamp }}."},"alerts":[],"health":"ok","evaluationTime":0.000193938,"lastEvaluation":"2023-01-09T15:41:02.801688652Z","type":"alerting"},{"state":"inactive","name":"MachineConfigControllerPausedPoolKubeletCA","query":"max by (namespace, pool) (last_over_time(machine_config_controller_paused_pool_kubelet_ca[5m]) - time()) \u003c (86400 * 14) and max by (namespace, pool) (last_over_time(machine_config_controller_paused_pool_kubelet_ca[5m])) \u003e 0","duration":3600,"labels":{"severity":"critical"},"annotations":{"description":"Machine config pools have a 'pause' feature, which allows config to be rendered, but prevents it from being rolled out to the nodes. This alert indicates that a certificate rotation has taken place, and the new kubelet-ca certificate bundle has been rendered into a machine config, but because the pool '{{$labels.pool}}' is paused, the config cannot be rolled out to the nodes in that pool. You will notice almost immediately that for nodes in pool '{{$labels.pool}}', pod logs will not be visible in the console and interactive commands (oc log, oc exec, oc debug, oc attach) will not work. You must unpause machine config pool '{{$labels.pool}}' to let the certificates through before the kube-apiserver-to-kubelet-signer certificate expires. You have approximately {{ $value | humanizeDuration }} remaining before this happens and nodes in '{{$labels.pool}}' cease to function properly.","runbook_url":"https://github.com/openshift/blob/master/alerts/machine-config-operator/MachineConfigControllerPausedPoolKubeletCA.md","summary":"Paused machine configuration pool '{{$labels.pool}}' is blocking a necessary certificate rotation and must be unpaused before the current kube-apiserver-to-kubelet-signer certificate expires in {{ $value | humanizeDuration }}."},"alerts":[],"health":"ok","evaluationTime":0.000313463,"lastEvaluation":"2023-01-09T15:41:02.801884188Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000515215,"lastEvaluation":"2023-01-09T15:41:02.801685312Z"},{"name":"os-image-override.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-controller-61803f78-c719-402e-b0dc-7db31491b0fd.yaml","rules":[{"name":"os_image_url_override:sum","query":"sum(os_image_url_override)","health":"ok","evaluationTime":0.000156889,"lastEvaluation":"2023-01-09T15:41:07.844464367Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000163918,"lastEvaluation":"2023-01-09T15:41:07.844461304Z"},{"name":"extremely-high-individual-control-plane-memory","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"ExtremelyHighIndividualControlPlaneMemory","query":"(1 - sum by (instance) (node_memory_MemFree_bytes + node_memory_Buffers_bytes + node_memory_Cached_bytes and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\")) / sum by (instance) (node_memory_MemTotal_bytes and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\"))) * 100 \u003e 90","duration":2700,"labels":{"severity":"critical"},"annotations":{"description":"The memory utilization per instance within control plane nodes influence the stability, and responsiveness of the cluster. This can lead to cluster instability and slow responses from kube-apiserver or failing requests specially on etcd. Moreover, OOM kill is expected which negatively influences the pod scheduling. If this happens on container level, the descheduler will not be able to detect it, as it works on the pod level. To fix this, increase memory of the affected node of control plane nodes.","summary":"Extreme memory utilization per node within control plane nodes is extremely high, and could impact responsiveness and stability."},"alerts":[],"health":"ok","evaluationTime":0.000714873,"lastEvaluation":"2023-01-09T15:40:45.777454715Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00072222,"lastEvaluation":"2023-01-09T15:40:45.777451315Z"},{"name":"high-overall-control-plane-memory","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"HighOverallControlPlaneMemory","query":"(1 - sum(node_memory_MemFree_bytes + node_memory_Buffers_bytes + node_memory_Cached_bytes and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\")) / sum(node_memory_MemTotal_bytes and on (instance) label_replace(kube_node_role{role=\"master\"}, \"instance\", \"$1\", \"node\", \"(.+)\"))) * 100 \u003e 60","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Given three control plane nodes, the overall memory utilization may only be about 2/3 of all available capacity. This is because if a single control plane node fails, the kube-apiserver and etcd my be slow to respond. To fix this, increase memory of the control plane nodes.","summary":"Memory utilization across all control plane nodes is high, and could impact responsiveness and stability."},"alerts":[],"health":"ok","evaluationTime":0.000760639,"lastEvaluation":"2023-01-09T15:41:03.618000488Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00077061,"lastEvaluation":"2023-01-09T15:41:03.617993852Z"},{"name":"mcd-drain-error","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"MCDDrainError","query":"mcd_drain_err \u003e 0","duration":0,"labels":{"severity":"warning"},"annotations":{"message":"Drain failed on {{ $labels.node }} , updates may be blocked. For more details check MachineConfigController pod logs: oc logs -f -n {{ $labels.namespace }} machine-config-controller-xxxxx -c machine-config-controller"},"alerts":[],"health":"ok","evaluationTime":0.000190807,"lastEvaluation":"2023-01-09T15:40:47.85853778Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000197449,"lastEvaluation":"2023-01-09T15:40:47.85853356Z"},{"name":"mcd-kubelet-health-state-error","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"KubeletHealthState","query":"mcd_kubelet_state \u003e 2","duration":0,"labels":{"severity":"warning"},"annotations":{"message":"Kubelet health failure threshold reached"},"alerts":[],"health":"ok","evaluationTime":0.000198877,"lastEvaluation":"2023-01-09T15:40:46.488434468Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000206991,"lastEvaluation":"2023-01-09T15:40:46.48842977Z"},{"name":"mcd-pivot-error","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"MCDPivotError","query":"mcd_pivot_err \u003e 0","duration":0,"labels":{"severity":"warning"},"annotations":{"message":"Error detected in pivot logs on {{ $labels.node }} "},"alerts":[],"health":"ok","evaluationTime":0.000148568,"lastEvaluation":"2023-01-09T15:41:06.878375672Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00015386,"lastEvaluation":"2023-01-09T15:41:06.878372685Z"},{"name":"mcd-reboot-error","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"MCDRebootError","query":"mcd_reboot_err \u003e 0","duration":0,"labels":{"severity":"critical"},"annotations":{"message":"Reboot failed on {{ $labels.node }} , update may be blocked"},"alerts":[],"health":"ok","evaluationTime":0.000170657,"lastEvaluation":"2023-01-09T15:41:09.033725061Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000176814,"lastEvaluation":"2023-01-09T15:41:09.033722025Z"},{"name":"system-memory-exceeds-reservation","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-machine-config-operator-machine-config-daemon-26d11cd2-c309-429c-a97b-e80a700522b3.yaml","rules":[{"state":"inactive","name":"SystemMemoryExceedsReservation","query":"sum by (node) (container_memory_rss{id=\"/system.slice\"}) \u003e ((sum by (node) (kube_node_status_capacity{resource=\"memory\"} - kube_node_status_allocatable{resource=\"memory\"})) * 0.95)","duration":900,"labels":{"severity":"warning"},"annotations":{"message":"System memory usage of {{ $value | humanize }} on {{ $labels.node }} exceeds 95% of the reservation. Reserved memory ensures system processes can function even when the node is fully allocated and protects against workload out of memory events impacting the proper functioning of the node. The default reservation is expected to be sufficient for most configurations and should be increased (https://docs.openshift.com/container-platform/latest/nodes/nodes/nodes-nodes-managing.html) when running nodes with high numbers of pods (either due to rate of change or at steady state)."},"alerts":[],"health":"ok","evaluationTime":0.000425565,"lastEvaluation":"2023-01-09T15:41:04.931979002Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000430829,"lastEvaluation":"2023-01-09T15:41:04.931976415Z"},{"name":"operator.marketplace.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-marketplace-marketplace-alert-rules-ae3e5aed-5eee-4b09-a3b4-3538ac3f5cdd.yaml","rules":[{"state":"inactive","name":"OperatorHubSourceError","query":"catalogsource_ready{exported_namespace=\"openshift-marketplace\"} == 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Operators shipped via the {{ $labels.name }} source are not available for installation until the issue is fixed. Operators already installed from this source will not receive updates until issue is fixed. Inspect the status of the pod owned by {{ $labels.name }} source in the openshift-marketplace namespace (oc -n openshift-marketplace get pods -l olm.catalogSource={{ $labels.name }}) to diagnose and repair.","summary":"The {{ $labels.name }} source is in non-ready state for more than 10 minutes."},"alerts":[],"health":"ok","evaluationTime":0.000176834,"lastEvaluation":"2023-01-09T15:41:03.620128183Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000183492,"lastEvaluation":"2023-01-09T15:41:03.620124188Z"},{"name":"alertmanager.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-alertmanager-main-rules-1ebc6a89-53d3-4530-a6b9-5f2cb0b6eacb.yaml","rules":[{"state":"inactive","name":"AlertmanagerFailedReload","query":"max_over_time(alertmanager_config_last_reload_successful{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]) == 0","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"Configuration has failed to load for {{ $labels.namespace }}/{{ $labels.pod}}.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/AlertmanagerFailedReload.md","summary":"Reloading an Alertmanager configuration has failed."},"alerts":[],"health":"ok","evaluationTime":0.000227291,"lastEvaluation":"2023-01-09T15:41:04.904482133Z","type":"alerting"},{"state":"inactive","name":"AlertmanagerMembersInconsistent","query":"max_over_time(alertmanager_cluster_members{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]) \u003c on (namespace, service) group_left () count by (namespace, service) (max_over_time(alertmanager_cluster_members{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]))","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Alertmanager {{ $labels.namespace }}/{{ $labels.pod}} has only found {{ $value }} members of the {{$labels.job}} cluster.","summary":"A member of an Alertmanager cluster has not found all other cluster members."},"alerts":[],"health":"ok","evaluationTime":0.000266274,"lastEvaluation":"2023-01-09T15:41:04.904711186Z","type":"alerting"},{"state":"inactive","name":"AlertmanagerFailedToSendAlerts","query":"(rate(alertmanager_notifications_failed_total{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]) / rate(alertmanager_notifications_total{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m])) \u003e 0.01","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"Alertmanager {{ $labels.namespace }}/{{ $labels.pod}} failed to send {{ $value | humanizePercentage }} of notifications to {{ $labels.integration }}.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/AlertmanagerFailedToSendAlerts.md","summary":"An Alertmanager instance failed to send notifications."},"alerts":[],"health":"ok","evaluationTime":0.000561172,"lastEvaluation":"2023-01-09T15:41:04.904979147Z","type":"alerting"},{"state":"inactive","name":"AlertmanagerClusterFailedToSendAlerts","query":"min by (namespace, service, integration) (rate(alertmanager_notifications_failed_total{integration=~\".*\",job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]) / rate(alertmanager_notifications_total{integration=~\".*\",job=~\"alertmanager-main|alertmanager-user-workload\"}[5m])) \u003e 0.01","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The minimum notification failure rate to {{ $labels.integration }} sent from any instance in the {{$labels.job}} cluster is {{ $value | humanizePercentage }}.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/AlertmanagerClusterFailedToSendAlerts.md","summary":"All Alertmanager instances in a cluster failed to send notifications to a critical integration."},"alerts":[],"health":"ok","evaluationTime":0.000559808,"lastEvaluation":"2023-01-09T15:41:04.905541917Z","type":"alerting"},{"state":"inactive","name":"AlertmanagerConfigInconsistent","query":"count by (namespace, service) (count_values by (namespace, service) (\"config_hash\", alertmanager_config_hash{job=~\"alertmanager-main|alertmanager-user-workload\"})) != 1","duration":1200,"labels":{"severity":"warning"},"annotations":{"description":"Alertmanager instances within the {{$labels.job}} cluster have different configurations.","summary":"Alertmanager instances within the same cluster have different configurations."},"alerts":[],"health":"ok","evaluationTime":0.000208273,"lastEvaluation":"2023-01-09T15:41:04.906103199Z","type":"alerting"},{"state":"inactive","name":"AlertmanagerClusterDown","query":"(count by (namespace, service) (avg_over_time(up{job=~\"alertmanager-main|alertmanager-user-workload\"}[5m]) \u003c 0.5) / count by (namespace, service) (up{job=~\"alertmanager-main|alertmanager-user-workload\"})) \u003e= 0.5","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value | humanizePercentage }} of Alertmanager instances within the {{$labels.job}} cluster have been up for less than half of the last 5m.","summary":"Half or more of the Alertmanager instances within the same cluster are down."},"alerts":[],"health":"ok","evaluationTime":0.000311896,"lastEvaluation":"2023-01-09T15:41:04.906313127Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002148638,"lastEvaluation":"2023-01-09T15:41:04.904478512Z"},{"name":"general.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"state":"firing","name":"Watchdog","query":"vector(1)","duration":0,"labels":{"namespace":"openshift-monitoring","severity":"none"},"annotations":{"description":"This is an alert meant to ensure that the entire alerting pipeline is functional.\nThis alert is always firing, therefore it should always be firing in Alertmanager\nand always fire against a receiver. There are integrations with various notification\nmechanisms that send a notification when this alert is not firing. For example the\n\"DeadMansSnitch\" integration in PagerDuty.\n","summary":"An alert that should always be firing to certify that Alertmanager is working properly."},"alerts":[{"labels":{"alertname":"Watchdog","namespace":"openshift-monitoring","severity":"none"},"annotations":{"description":"This is an alert meant to ensure that the entire alerting pipeline is functional.\nThis alert is always firing, therefore it should always be firing in Alertmanager\nand always fire against a receiver. There are integrations with various notification\nmechanisms that send a notification when this alert is not firing. For example the\n\"DeadMansSnitch\" integration in PagerDuty.\n","summary":"An alert that should always be firing to certify that Alertmanager is working properly."},"state":"firing","activeAt":"2023-01-09T04:47:44.788032817Z","value":"1e+00"}],"health":"ok","evaluationTime":0.000320806,"lastEvaluation":"2023-01-09T15:40:44.789038982Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000328684,"lastEvaluation":"2023-01-09T15:40:44.789034117Z"},{"name":"kube-prometheus-general.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"count:up1","query":"count without (instance, pod, node) (up == 1)","health":"ok","evaluationTime":0.001684198,"lastEvaluation":"2023-01-09T15:41:05.95023607Z","type":"recording"},{"name":"count:up0","query":"count without (instance, pod, node) (up == 0)","health":"ok","evaluationTime":0.001065045,"lastEvaluation":"2023-01-09T15:41:05.951922867Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.002758206,"lastEvaluation":"2023-01-09T15:41:05.950232278Z"},{"name":"kube-prometheus-node-recording.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"instance:node_cpu:rate:sum","query":"sum by (instance) (rate(node_cpu_seconds_total{mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\"}[3m]))","health":"ok","evaluationTime":0.002382027,"lastEvaluation":"2023-01-09T15:40:59.872204386Z","type":"recording"},{"name":"instance:node_network_receive_bytes:rate:sum","query":"sum by (instance) (rate(node_network_receive_bytes_total[3m]))","health":"ok","evaluationTime":0.000392231,"lastEvaluation":"2023-01-09T15:40:59.874589287Z","type":"recording"},{"name":"instance:node_network_transmit_bytes:rate:sum","query":"sum by (instance) (rate(node_network_transmit_bytes_total[3m]))","health":"ok","evaluationTime":0.000398573,"lastEvaluation":"2023-01-09T15:40:59.87498306Z","type":"recording"},{"name":"cluster:node_cpu:sum_rate5m","query":"sum(rate(node_cpu_seconds_total{mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\"}[5m]))","health":"ok","evaluationTime":0.002191812,"lastEvaluation":"2023-01-09T15:40:59.875383458Z","type":"recording"},{"name":"cluster:node_cpu:ratio","query":"cluster:node_cpu:sum_rate5m / count(sum by (instance, cpu) (node_cpu_seconds_total))","health":"ok","evaluationTime":0.0028643,"lastEvaluation":"2023-01-09T15:40:59.877577925Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.008243621,"lastEvaluation":"2023-01-09T15:40:59.872201148Z"},{"name":"kubernetes-recurring.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"cluster:usage:workload:capacity_physical_cpu_core_seconds","query":"sum_over_time(workload:capacity_physical_cpu_cores:sum[30s:1s]) + ((cluster:usage:workload:capacity_physical_cpu_core_seconds offset 25s) or (absent(cluster:usage:workload:capacity_physical_cpu_core_seconds offset 25s) * 0))","health":"ok","evaluationTime":0.000387457,"lastEvaluation":"2023-01-09T15:40:54.89438115Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000397111,"lastEvaluation":"2023-01-09T15:40:54.894374437Z"},{"name":"node-network","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"state":"inactive","name":"NodeNetworkInterfaceFlapping","query":"changes(node_network_up{device!~\"veth.+|tunbr\",job=\"node-exporter\"}[2m]) \u003e 2","duration":120,"labels":{"severity":"warning"},"annotations":{"description":"Network interface \"{{ $labels.device }}\" changing its up status often on node-exporter {{ $labels.namespace }}/{{ $labels.pod }}","summary":"Network interface is often changing its status"},"alerts":[],"health":"ok","evaluationTime":0.000361388,"lastEvaluation":"2023-01-09T15:40:59.581958258Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000368958,"lastEvaluation":"2023-01-09T15:40:59.581954202Z"},{"name":"openshift-build.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"openshift:build_by_strategy:sum","query":"sum by (strategy) (openshift_build_status_phase_total)","health":"ok","evaluationTime":0.000119585,"lastEvaluation":"2023-01-09T15:40:47.429876017Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.000125903,"lastEvaluation":"2023-01-09T15:40:47.429871777Z"},{"name":"openshift-etcd-telemetry.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"instance:etcd_mvcc_db_total_size_in_bytes:sum","query":"sum by (instance) (etcd_mvcc_db_total_size_in_bytes{job=\"etcd\"})","health":"ok","evaluationTime":0.000224191,"lastEvaluation":"2023-01-09T15:40:43.228015713Z","type":"recording"},{"name":"instance:etcd_disk_wal_fsync_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (instance, le) (rate(etcd_disk_wal_fsync_duration_seconds_bucket{job=\"etcd\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.000599946,"lastEvaluation":"2023-01-09T15:40:43.228243661Z","type":"recording"},{"name":"instance:etcd_network_peer_round_trip_time_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (instance, le) (rate(etcd_network_peer_round_trip_time_seconds_bucket{job=\"etcd\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.001024335,"lastEvaluation":"2023-01-09T15:40:43.228846143Z","type":"recording"},{"name":"instance:etcd_mvcc_db_total_size_in_use_in_bytes:sum","query":"sum by (instance) (etcd_mvcc_db_total_size_in_use_in_bytes{job=\"etcd\"})","health":"ok","evaluationTime":0.000164258,"lastEvaluation":"2023-01-09T15:40:43.229872982Z","type":"recording"},{"name":"instance:etcd_disk_backend_commit_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (instance, le) (rate(etcd_disk_backend_commit_duration_seconds_bucket{job=\"etcd\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.000530753,"lastEvaluation":"2023-01-09T15:40:43.230039046Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.002562539,"lastEvaluation":"2023-01-09T15:40:43.228010122Z"},{"name":"openshift-general.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"state":"inactive","name":"TargetDown","query":"100 * (count by (job, namespace, service) (up == 0 unless on (node) max by (node) (kube_node_spec_unschedulable == 1)) / count by (job, namespace, service) (up unless on (node) max by (node) (kube_node_spec_unschedulable == 1))) \u003e 10","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"{{ printf \"%.4g\" $value }}% of the {{ $labels.job }}/{{ $labels.service }} targets in {{ $labels.namespace }} namespace have been unreachable for more than 15 minutes. This may be a symptom of network connectivity issues, down nodes, or failures within these components. Assess the health of the infrastructure and nodes running these targets and then contact support.","summary":"Some targets were not reachable from the monitoring server for an extended period of time."},"alerts":[],"health":"ok","evaluationTime":0.002702007,"lastEvaluation":"2023-01-09T15:40:53.434495918Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002708758,"lastEvaluation":"2023-01-09T15:40:53.43449263Z"},{"name":"openshift-ingress.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"code:cluster:ingress_http_request_count:rate5m:sum","query":"sum by (code) (rate(haproxy_server_http_responses_total[5m]) \u003e 0)","health":"ok","evaluationTime":0.001630958,"lastEvaluation":"2023-01-09T15:41:00.510866295Z","type":"recording"},{"name":"cluster:usage:ingress_frontend_bytes_in:rate5m:sum","query":"sum(rate(haproxy_frontend_bytes_in_total[5m]))","health":"ok","evaluationTime":0.000176276,"lastEvaluation":"2023-01-09T15:41:00.512499785Z","type":"recording"},{"name":"cluster:usage:ingress_frontend_bytes_out:rate5m:sum","query":"sum(rate(haproxy_frontend_bytes_out_total[5m]))","health":"ok","evaluationTime":0.00014484,"lastEvaluation":"2023-01-09T15:41:00.512678064Z","type":"recording"},{"name":"cluster:usage:ingress_frontend_connections:sum","query":"sum(haproxy_frontend_current_sessions)","health":"ok","evaluationTime":0.000119887,"lastEvaluation":"2023-01-09T15:41:00.512824284Z","type":"recording"},{"name":"cluster:usage:workload:ingress_request_error:fraction5m","query":"sum(max without (service, endpoint, container, pod, job, namespace) (increase(haproxy_server_http_responses_total{code!~\"2xx|1xx|4xx|3xx\",exported_namespace!~\"openshift-.*\"}[5m]) \u003e 0)) / sum(max without (service, endpoint, container, pod, job, namespace) (increase(haproxy_server_http_responses_total{exported_namespace!~\"openshift-.*\"}[5m]))) or absent(__does_not_exist__) * 0","health":"ok","evaluationTime":0.000546528,"lastEvaluation":"2023-01-09T15:41:00.512945342Z","type":"recording"},{"name":"cluster:usage:workload:ingress_request_total:irate5m","query":"sum(max without (service, endpoint, container, pod, job, namespace) (irate(haproxy_server_http_responses_total{exported_namespace!~\"openshift-.*\"}[5m]))) or absent(__does_not_exist__) * 0","health":"ok","evaluationTime":0.000300068,"lastEvaluation":"2023-01-09T15:41:00.51349412Z","type":"recording"},{"name":"cluster:usage:openshift:ingress_request_error:fraction5m","query":"sum(max without (service, endpoint, container, pod, job, namespace) (increase(haproxy_server_http_responses_total{code!~\"2xx|1xx|4xx|3xx\",exported_namespace=~\"openshift-.*\"}[5m]) \u003e 0)) / sum(max without (service, endpoint, container, pod, job, namespace) (increase(haproxy_server_http_responses_total{exported_namespace=~\"openshift-.*\"}[5m]))) or absent(__does_not_exist__) * 0","health":"ok","evaluationTime":0.002436292,"lastEvaluation":"2023-01-09T15:41:00.513795981Z","type":"recording"},{"name":"cluster:usage:openshift:ingress_request_total:irate5m","query":"sum(max without (service, endpoint, container, pod, job, namespace) (irate(haproxy_server_http_responses_total{exported_namespace=~\"openshift-.*\"}[5m]))) or absent(__does_not_exist__) * 0","health":"ok","evaluationTime":0.001774913,"lastEvaluation":"2023-01-09T15:41:00.516234352Z","type":"recording"},{"name":"cluster:ingress_controller_aws_nlb_active:sum","query":"sum(ingress_controller_aws_nlb_active) or vector(0)","health":"ok","evaluationTime":0.00013407,"lastEvaluation":"2023-01-09T15:41:00.518011603Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.007289385,"lastEvaluation":"2023-01-09T15:41:00.510859003Z"},{"name":"openshift-kubernetes.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"pod:container_cpu_usage:sum","query":"sum by (pod, namespace) (rate(container_cpu_usage_seconds_total{container=\"\",pod!=\"\"}[5m]))","health":"ok","evaluationTime":0.004872197,"lastEvaluation":"2023-01-09T15:40:56.816599556Z","type":"recording"},{"name":"pod:container_fs_usage_bytes:sum","query":"sum by (pod, namespace) (container_fs_usage_bytes{pod!=\"\"})","health":"ok","evaluationTime":0.005900131,"lastEvaluation":"2023-01-09T15:40:56.821474991Z","type":"recording"},{"name":"namespace:container_memory_usage_bytes:sum","query":"sum by (namespace) (container_memory_usage_bytes{container!=\"\"})","health":"ok","evaluationTime":0.005067259,"lastEvaluation":"2023-01-09T15:40:56.827377857Z","type":"recording"},{"name":"namespace:container_cpu_usage:sum","query":"sum by (namespace) (rate(container_cpu_usage_seconds_total{container!=\"\",container!=\"POD\"}[5m]))","health":"ok","evaluationTime":0.004679778,"lastEvaluation":"2023-01-09T15:40:56.832447263Z","type":"recording"},{"name":"cluster:memory_usage:ratio","query":"sum by (cluster) (container_memory_usage_bytes{container=\"\",pod!=\"\"}) / sum by (cluster) (machine_memory_bytes)","health":"ok","evaluationTime":0.003701717,"lastEvaluation":"2023-01-09T15:40:56.837129748Z","type":"recording"},{"name":"cluster:container_spec_cpu_shares:ratio","query":"sum(container_spec_cpu_shares{container=\"\",pod!=\"\"}) / 1000 / sum(machine_cpu_cores)","health":"ok","evaluationTime":0.003208397,"lastEvaluation":"2023-01-09T15:40:56.84083326Z","type":"recording"},{"name":"cluster:container_cpu_usage:ratio","query":"sum(rate(container_cpu_usage_seconds_total{container=\"\",pod!=\"\"}[5m])) / sum(machine_cpu_cores)","health":"ok","evaluationTime":0.003592815,"lastEvaluation":"2023-01-09T15:40:56.844043312Z","type":"recording"},{"name":"cluster:master_nodes","query":"max without (endpoint, instance, job, pod, service) (kube_node_labels and on (node) kube_node_role{role=\"master\"})","labels":{"label_node_role_kubernetes_io":"master","label_node_role_kubernetes_io_master":"true"},"health":"ok","evaluationTime":0.000247951,"lastEvaluation":"2023-01-09T15:40:56.847637859Z","type":"recording"},{"name":"cluster:infra_nodes","query":"max without (endpoint, instance, job, pod, service) (kube_node_labels and on (node) kube_node_role{role=\"infra\"})","labels":{"label_node_role_kubernetes_io_infra":"true"},"health":"ok","evaluationTime":0.000182978,"lastEvaluation":"2023-01-09T15:40:56.847887775Z","type":"recording"},{"name":"cluster:master_infra_nodes","query":"max without (endpoint, instance, job, pod, service) (cluster:master_nodes and on (node) cluster:infra_nodes)","labels":{"label_node_role_kubernetes_io_infra":"true","label_node_role_kubernetes_io_master":"true"},"health":"ok","evaluationTime":0.000114671,"lastEvaluation":"2023-01-09T15:40:56.848072382Z","type":"recording"},{"name":"cluster:nodes_roles","query":"cluster:master_infra_nodes or on (node) cluster:master_nodes or on (node) cluster:infra_nodes or on (node) max without (endpoint, instance, job, pod, service) (kube_node_labels)","health":"ok","evaluationTime":0.000306519,"lastEvaluation":"2023-01-09T15:40:56.848188374Z","type":"recording"},{"name":"cluster:hyperthread_enabled_nodes","query":"kube_node_labels and on (node) (sum by (node, package, core) (label_replace(node_cpu_info, \"node\", \"$1\", \"instance\", \"(.*)\")) == 2)","labels":{"label_node_hyperthread_enabled":"true"},"health":"ok","evaluationTime":0.000918414,"lastEvaluation":"2023-01-09T15:40:56.848496379Z","type":"recording"},{"name":"cluster:virt_platform_nodes:sum","query":"count by (type, system_manufacturer, system_product_name, baseboard_manufacturer, baseboard_product_name) (sum by (instance, type, system_manufacturer, system_product_name, baseboard_manufacturer, baseboard_product_name) (virt_platform))","health":"ok","evaluationTime":0.000184155,"lastEvaluation":"2023-01-09T15:40:56.849416779Z","type":"recording"},{"name":"cluster:capacity_cpu_cores:sum","query":"sum by (label_beta_kubernetes_io_instance_type, label_node_role_kubernetes_io, label_kubernetes_io_arch, label_node_openshift_io_os_id) ((cluster:master_nodes * on (node) group_left () max by (node) (kube_node_status_capacity{resource=\"cpu\",unit=\"core\"})) or on (node) (max without (endpoint, instance, job, pod, service) (kube_node_labels) * on (node) group_left () max by (node) (kube_node_status_capacity{resource=\"cpu\",unit=\"core\"})))","health":"ok","evaluationTime":0.000396333,"lastEvaluation":"2023-01-09T15:40:56.849602194Z","type":"recording"},{"name":"cluster:cpu_core_hyperthreading","query":"clamp_max(label_replace(sum by (instance, package, core) (node_cpu_info{core!=\"\",package!=\"\"} or label_replace(label_join(node_cpu_info{core=\"\",package=\"\"}, \"core\", \"\", \"cpu\"), \"package\", \"0\", \"package\", \"\")) \u003e 1, \"label_node_hyperthread_enabled\", \"true\", \"instance\", \"(.*)\") or on (instance, package) label_replace(sum by (instance, package, core) (label_replace(node_cpu_info{core!=\"\",package!=\"\"} or label_join(node_cpu_info{core=\"\",package=\"\"}, \"core\", \"\", \"cpu\"), \"package\", \"0\", \"package\", \"\")) \u003c= 1, \"label_node_hyperthread_enabled\", \"false\", \"instance\", \"(.*)\"), 1)","health":"ok","evaluationTime":0.001516689,"lastEvaluation":"2023-01-09T15:40:56.849999972Z","type":"recording"},{"name":"cluster:cpu_core_node_labels","query":"topk by (node) (1, cluster:nodes_roles) * on (node) group_right (label_beta_kubernetes_io_instance_type, label_node_role_kubernetes_io, label_node_openshift_io_os_id, label_kubernetes_io_arch, label_node_role_kubernetes_io_master, label_node_role_kubernetes_io_infra) label_replace(cluster:cpu_core_hyperthreading, \"node\", \"$1\", \"instance\", \"(.*)\")","health":"ok","evaluationTime":0.000633838,"lastEvaluation":"2023-01-09T15:40:56.851518234Z","type":"recording"},{"name":"cluster:capacity_cpu_cores_hyperthread_enabled:sum","query":"count by (label_beta_kubernetes_io_instance_type, label_node_hyperthread_enabled) (cluster:cpu_core_node_labels)","health":"ok","evaluationTime":0.000249176,"lastEvaluation":"2023-01-09T15:40:56.852153606Z","type":"recording"},{"name":"cluster:capacity_memory_bytes:sum","query":"sum by (label_beta_kubernetes_io_instance_type, label_node_role_kubernetes_io) ((cluster:master_nodes * on (node) group_left () max by (node) (kube_node_status_capacity{resource=\"memory\",unit=\"byte\"})) or on (node) (max without (endpoint, instance, job, pod, service) (kube_node_labels) * on (node) group_left () max by (node) (kube_node_status_capacity{resource=\"memory\",unit=\"byte\"})))","health":"ok","evaluationTime":0.000364328,"lastEvaluation":"2023-01-09T15:40:56.852403971Z","type":"recording"},{"name":"cluster:cpu_usage_cores:sum","query":"sum(1 - rate(node_cpu_seconds_total{mode=\"idle\"}[2m]) * on (namespace, pod) group_left (node) node_namespace_pod:kube_pod_info:{pod=~\"node-exporter.+\"})","health":"ok","evaluationTime":0.001000018,"lastEvaluation":"2023-01-09T15:40:56.852769546Z","type":"recording"},{"name":"cluster:memory_usage_bytes:sum","query":"sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} - node_memory_MemAvailable_bytes{job=\"node-exporter\"})","health":"ok","evaluationTime":0.000219573,"lastEvaluation":"2023-01-09T15:40:56.853771835Z","type":"recording"},{"name":"workload:cpu_usage_cores:sum","query":"sum(rate(container_cpu_usage_seconds_total{container=\"\",namespace!~\"openshift-.+\",pod!=\"\"}[5m]))","health":"ok","evaluationTime":0.002206029,"lastEvaluation":"2023-01-09T15:40:56.853992905Z","type":"recording"},{"name":"openshift:cpu_usage_cores:sum","query":"cluster:cpu_usage_cores:sum - workload:cpu_usage_cores:sum","health":"ok","evaluationTime":0.000141234,"lastEvaluation":"2023-01-09T15:40:56.856200612Z","type":"recording"},{"name":"workload:memory_usage_bytes:sum","query":"sum(container_memory_working_set_bytes{container=\"\",namespace!~\"openshift-.+\",pod!=\"\"})","health":"ok","evaluationTime":0.002480419,"lastEvaluation":"2023-01-09T15:40:56.856343406Z","type":"recording"},{"name":"openshift:memory_usage_bytes:sum","query":"cluster:memory_usage_bytes:sum - workload:memory_usage_bytes:sum","health":"ok","evaluationTime":0.00012162,"lastEvaluation":"2023-01-09T15:40:56.858825543Z","type":"recording"},{"name":"cluster:node_instance_type_count:sum","query":"sum by (label_beta_kubernetes_io_instance_type, label_node_role_kubernetes_io, label_kubernetes_io_arch, label_node_openshift_io_os_id) (cluster:master_nodes or on (node) kube_node_labels)","health":"ok","evaluationTime":0.000191042,"lastEvaluation":"2023-01-09T15:40:56.858948571Z","type":"recording"},{"name":"cluster:kube_persistentvolumeclaim_resource_requests_storage_bytes:provisioner:sum","query":"sum by (provisioner) (topk by (namespace, persistentvolumeclaim) (1, kube_persistentvolumeclaim_resource_requests_storage_bytes) * on (namespace, persistentvolumeclaim) group_right () topk by (namespace, persistentvolumeclaim) (1, kube_persistentvolumeclaim_info * on (storageclass) group_left (provisioner) topk by (storageclass) (1, max by (storageclass, provisioner) (kube_storageclass_info))))","health":"ok","evaluationTime":0.000436919,"lastEvaluation":"2023-01-09T15:40:56.859140974Z","type":"recording"},{"name":"workload:capacity_physical_cpu_cores:sum","query":"(sum(node_role_os_version_machine:cpu_capacity_cores:sum{label_node_role_kubernetes_io_infra=\"\",label_node_role_kubernetes_io_master=\"\"} or absent(__does_not_exist__) * 0)) + ((sum(node_role_os_version_machine:cpu_capacity_cores:sum{label_node_role_kubernetes_io_master=\"true\"} or absent(__does_not_exist__) * 0) * ((max(cluster_master_schedulable == 1) * 0 + 1) or (absent(cluster_master_schedulable == 1) * 0))))","health":"ok","evaluationTime":0.000397749,"lastEvaluation":"2023-01-09T15:40:56.859579408Z","type":"recording"},{"name":"cluster:usage:workload:capacity_physical_cpu_cores:min:5m","query":"min_over_time(workload:capacity_physical_cpu_cores:sum[5m:15s])","health":"ok","evaluationTime":0.000103107,"lastEvaluation":"2023-01-09T15:40:56.85997859Z","type":"recording"},{"name":"cluster:usage:workload:capacity_physical_cpu_cores:max:5m","query":"max_over_time(workload:capacity_physical_cpu_cores:sum[5m:15s])","health":"ok","evaluationTime":0.000093118,"lastEvaluation":"2023-01-09T15:40:56.860083041Z","type":"recording"},{"name":"cluster:kubelet_volume_stats_used_bytes:provisioner:sum","query":"sum by (provisioner) (topk by (namespace, persistentvolumeclaim) (1, kubelet_volume_stats_used_bytes) * on (namespace, persistentvolumeclaim) group_right () topk by (namespace, persistentvolumeclaim) (1, kube_persistentvolumeclaim_info * on (storageclass) group_left (provisioner) topk by (storageclass) (1, max by (storageclass, provisioner) (kube_storageclass_info))))","health":"ok","evaluationTime":0.000369223,"lastEvaluation":"2023-01-09T15:40:56.860177545Z","type":"recording"},{"name":"instance:etcd_object_counts:sum","query":"sum by (instance) (apiserver_storage_objects)","health":"ok","evaluationTime":0.00181026,"lastEvaluation":"2023-01-09T15:40:56.860548112Z","type":"recording"},{"name":"cluster:usage:resources:sum","query":"topk(500, max by (resource) (apiserver_storage_objects))","health":"ok","evaluationTime":0.002268892,"lastEvaluation":"2023-01-09T15:40:56.862360373Z","type":"recording"},{"name":"cluster:usage:pods:terminal:workload:sum","query":"count(count by (namespace, pod) (kube_pod_restart_policy{namespace!~\"openshift-.+\",type!=\"Always\"}))","health":"ok","evaluationTime":0.000166256,"lastEvaluation":"2023-01-09T15:40:56.864631447Z","type":"recording"},{"name":"cluster:usage:containers:sum","query":"sum(max by (instance) (kubelet_containers_per_pod_count_sum))","health":"ok","evaluationTime":0.000121114,"lastEvaluation":"2023-01-09T15:40:56.86479913Z","type":"recording"},{"name":"node_role_os_version_machine:cpu_capacity_cores:sum","query":"count by (label_kubernetes_io_arch, label_node_hyperthread_enabled, label_node_openshift_io_os_id, label_node_role_kubernetes_io_master, label_node_role_kubernetes_io_infra) (cluster:cpu_core_node_labels)","health":"ok","evaluationTime":0.000320714,"lastEvaluation":"2023-01-09T15:40:56.864921721Z","type":"recording"},{"name":"cluster:capacity_cpu_sockets_hyperthread_enabled:sum","query":"count by (label_beta_kubernetes_io_instance_type, label_node_hyperthread_enabled, label_node_role_kubernetes_io) (max by (node, package, label_beta_kubernetes_io_instance_type, label_node_hyperthread_enabled, label_node_role_kubernetes_io) (cluster:cpu_core_node_labels))","health":"ok","evaluationTime":0.000268264,"lastEvaluation":"2023-01-09T15:40:56.865244347Z","type":"recording"},{"name":"node_role_os_version_machine:cpu_capacity_sockets:sum","query":"count by (label_kubernetes_io_arch, label_node_hyperthread_enabled, label_node_openshift_io_os_id, label_node_role_kubernetes_io_master, label_node_role_kubernetes_io_infra) (max by (node, package, label_kubernetes_io_arch, label_node_hyperthread_enabled, label_node_openshift_io_os_id, label_node_role_kubernetes_io_master, label_node_role_kubernetes_io_infra) (cluster:cpu_core_node_labels))","health":"ok","evaluationTime":0.000272011,"lastEvaluation":"2023-01-09T15:40:56.865513865Z","type":"recording"},{"name":"cluster:alertmanager_integrations:max","query":"max(alertmanager_integrations{namespace=\"openshift-monitoring\"})","health":"ok","evaluationTime":0.000081937,"lastEvaluation":"2023-01-09T15:40:56.865787325Z","type":"recording"},{"name":"cluster:kube_persistentvolume_plugin_type_counts:sum","query":"sum by (plugin_name, volume_mode) (pv_collector_total_pv_count)","health":"ok","evaluationTime":0.000066012,"lastEvaluation":"2023-01-09T15:40:56.865870333Z","type":"recording"},{"name":"cluster:vsphere_vcenter_info:sum","query":"sum by (version) (vsphere_vcenter_info)","health":"ok","evaluationTime":0.000053379,"lastEvaluation":"2023-01-09T15:40:56.865938491Z","type":"recording"},{"name":"cluster:vsphere_esxi_version_total:sum","query":"sum by (version) (vsphere_esxi_version_total)","health":"ok","evaluationTime":0.000044475,"lastEvaluation":"2023-01-09T15:40:56.865993094Z","type":"recording"},{"name":"cluster:vsphere_node_hw_version_total:sum","query":"sum by (hw_version) (vsphere_node_hw_version_total)","health":"ok","evaluationTime":0.000048261,"lastEvaluation":"2023-01-09T15:40:56.866038491Z","type":"recording"},{"name":"cluster:control_plane:all_nodes_ready","query":"sum(min by (node) (kube_node_status_condition{condition=\"Ready\",status=\"true\"}) and max by (node) (kube_node_role{role=\"master\"})) == bool sum(kube_node_role{role=\"master\"})","health":"ok","evaluationTime":0.000255303,"lastEvaluation":"2023-01-09T15:40:56.866087845Z","type":"recording"},{"state":"inactive","name":"ClusterMonitoringOperatorReconciliationErrors","query":"max_over_time(cluster_monitoring_operator_last_reconciliation_successful[5m]) == 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Errors are occurring during reconciliation cycles. Inspect the cluster-monitoring-operator log for potential root causes.","summary":"Cluster Monitoring Operator is experiencing unexpected reconciliation errors."},"alerts":[],"health":"ok","evaluationTime":0.000099652,"lastEvaluation":"2023-01-09T15:40:56.866344923Z","type":"alerting"},{"state":"firing","name":"AlertmanagerReceiversNotConfigured","query":"cluster:alertmanager_integrations:max == 0","duration":600,"labels":{"namespace":"openshift-monitoring","severity":"warning"},"annotations":{"description":"Alerts are not configured to be sent to a notification system, meaning that you may not be notified in a timely fashion when important failures occur. Check the OpenShift documentation to learn how to configure notifications with Alertmanager.","summary":"Receivers (notification integrations) are not configured on Alertmanager"},"alerts":[{"labels":{"alertname":"AlertmanagerReceiversNotConfigured","namespace":"openshift-monitoring","severity":"warning"},"annotations":{"description":"Alerts are not configured to be sent to a notification system, meaning that you may not be notified in a timely fashion when important failures occur. Check the OpenShift documentation to learn how to configure notifications with Alertmanager.","summary":"Receivers (notification integrations) are not configured on Alertmanager"},"state":"firing","activeAt":"2023-01-09T04:49:26.815314228Z","value":"0e+00"}],"health":"ok","evaluationTime":0.000251649,"lastEvaluation":"2023-01-09T15:40:56.866446238Z","type":"alerting"},{"state":"inactive","name":"KubeDeploymentReplicasMismatch","query":"(((kube_deployment_spec_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e kube_deployment_status_replicas_available{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) and (changes(kube_deployment_status_replicas_updated{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[5m]) == 0)) * on () group_left () cluster:control_plane:all_nodes_ready) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Deployment {{ $labels.namespace }}/{{ $labels.deployment }} has not matched the expected number of replicas for longer than 15 minutes. This indicates that cluster infrastructure is unable to start or restart the necessary components. This most often occurs when one or more nodes are down or partioned from the cluster, or a fault occurs on the node that prevents the workload from starting. In rare cases this may indicate a new version of a cluster component cannot start due to a bug or configuration error. Assess the pods for this deployment to verify they are running on healthy nodes and then contact support.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubeDeploymentReplicasMismatch.md","summary":"Deployment has not matched the expected number of replicas"},"alerts":[],"health":"ok","evaluationTime":0.001980551,"lastEvaluation":"2023-01-09T15:40:56.866699188Z","type":"alerting"},{"state":"inactive","name":"MultipleContainersOOMKilled","query":"sum(max by (namespace, container, pod) (increase(kube_pod_container_status_restarts_total[12m])) and max by (namespace, container, pod) (kube_pod_container_status_last_terminated_reason{reason=\"OOMKilled\"}) == 1) \u003e 5","duration":900,"labels":{"namespace":"kube-system","severity":"info"},"annotations":{"description":"Multiple containers were out of memory killed within the past 15 minutes. There are many potential causes of OOM errors, however issues on a specific node or containers breaching their limits is common.","summary":"Containers are being killed due to OOM"},"alerts":[],"health":"ok","evaluationTime":0.003990179,"lastEvaluation":"2023-01-09T15:40:56.868681219Z","type":"alerting"},{"name":"cluster:usage:kube_schedulable_node_ready_reachable:avg5m","query":"avg_over_time((((count((max by (node) (up{job=\"kubelet\",metrics_path=\"/metrics\"} == 1) and max by (node) (kube_node_status_condition{condition=\"Ready\",status=\"true\"} == 1) and min by (node) (kube_node_spec_unschedulable == 0))) / scalar(count(min by (node) (kube_node_spec_unschedulable == 0))))))[5m:1s])","health":"ok","evaluationTime":0.011184203,"lastEvaluation":"2023-01-09T15:40:56.872673095Z","type":"recording"},{"name":"cluster:usage:kube_node_ready:avg5m","query":"avg_over_time((count(max by (node) (kube_node_status_condition{condition=\"Ready\",status=\"true\"} == 1)) / scalar(count(max by (node) (kube_node_status_condition{condition=\"Ready\",status=\"true\"}))))[5m:1s])","health":"ok","evaluationTime":0.004600144,"lastEvaluation":"2023-01-09T15:40:56.883859313Z","type":"recording"},{"name":"kube_running_pod_ready","query":"(max without (condition, container, endpoint, instance, job, service) (((kube_pod_status_ready{condition=\"false\"} == 1) * 0 or (kube_pod_status_ready{condition=\"true\"} == 1)) * on (pod, namespace) group_left () group by (pod, namespace) (kube_pod_status_phase{phase=~\"Running|Unknown|Pending\"} == 1)))","health":"ok","evaluationTime":0.011118611,"lastEvaluation":"2023-01-09T15:40:56.888461502Z","type":"recording"},{"name":"cluster:usage:openshift:kube_running_pod_ready:avg","query":"avg(kube_running_pod_ready{namespace=~\"openshift-.*\"})","health":"ok","evaluationTime":0.001351698,"lastEvaluation":"2023-01-09T15:40:56.899582999Z","type":"recording"},{"name":"cluster:usage:workload:kube_running_pod_ready:avg","query":"avg(kube_running_pod_ready{namespace!~\"openshift-.*\"})","health":"ok","evaluationTime":0.000359493,"lastEvaluation":"2023-01-09T15:40:56.900936767Z","type":"recording"},{"state":"firing","name":"KubePodNotScheduled","query":"last_over_time(kube_pod_status_unschedulable{namespace=~\"(openshift-.*|kube-.*|default)\"}[5m]) == 1","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"Pod {{ $labels.namespace }}/{{ $labels.pod }} cannot be scheduled for more than 30 minutes.\nCheck the details of the pod with the following command:\noc describe -n {{ $labels.namespace }} pod {{ $labels.pod }}","summary":"Pod cannot be scheduled."},"alerts":[{"labels":{"alertname":"KubePodNotScheduled","container":"kube-rbac-proxy-main","endpoint":"https-main","job":"kube-state-metrics","namespace":"openshift-logging","pod":"lokistack-sample-ruler-1","service":"kube-state-metrics","severity":"warning","uid":"6e246ac0-e4fb-4d34-ba51-f189984b1ca7"},"annotations":{"description":"Pod openshift-logging/lokistack-sample-ruler-1 cannot be scheduled for more than 30 minutes.\nCheck the details of the pod with the following command:\noc describe -n openshift-logging pod lokistack-sample-ruler-1","summary":"Pod cannot be scheduled."},"state":"firing","activeAt":"2023-01-09T06:13:56.815314228Z","value":"1e+00"},{"labels":{"alertname":"KubePodNotScheduled","container":"kube-rbac-proxy-main","endpoint":"https-main","job":"kube-state-metrics","namespace":"openshift-logging","pod":"lokistack-sample-ingester-1","service":"kube-state-metrics","severity":"warning","uid":"cad4407e-3698-46c7-9373-c76a9a8915a5"},"annotations":{"description":"Pod openshift-logging/lokistack-sample-ingester-1 cannot be scheduled for more than 30 minutes.\nCheck the details of the pod with the following command:\noc describe -n openshift-logging pod lokistack-sample-ingester-1","summary":"Pod cannot be scheduled."},"state":"firing","activeAt":"2023-01-09T06:14:56.815314228Z","value":"1e+00"}],"health":"ok","evaluationTime":0.000574071,"lastEvaluation":"2023-01-09T15:40:56.901297708Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.085282081,"lastEvaluation":"2023-01-09T15:40:56.816592216Z"},{"name":"openshift-monitoring.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"openshift:prometheus_tsdb_head_series:sum","query":"sum by (job, namespace) (max without (instance) (prometheus_tsdb_head_series{namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}))","health":"ok","evaluationTime":0.000241188,"lastEvaluation":"2023-01-09T15:40:46.709534578Z","type":"recording"},{"name":"openshift:prometheus_tsdb_head_samples_appended_total:sum","query":"sum by (job, namespace) (max without (instance) (rate(prometheus_tsdb_head_samples_appended_total{namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[2m])))","health":"ok","evaluationTime":0.000174031,"lastEvaluation":"2023-01-09T15:40:46.709778398Z","type":"recording"},{"name":"monitoring:container_memory_working_set_bytes:sum","query":"sum by (namespace) (max without (instance) (container_memory_working_set_bytes{container=\"\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}))","health":"ok","evaluationTime":0.000822776,"lastEvaluation":"2023-01-09T15:40:46.709953721Z","type":"recording"},{"name":"namespace_job:scrape_series_added:topk3_sum1h","query":"topk(3, sum by (namespace, job) (sum_over_time(scrape_series_added[1h])))","health":"ok","evaluationTime":0.003110358,"lastEvaluation":"2023-01-09T15:40:46.710779221Z","type":"recording"},{"name":"namespace_job:scrape_samples_post_metric_relabeling:topk3","query":"topk(3, max by (namespace, job) (topk by (namespace, job) (1, scrape_samples_post_metric_relabeling)))","health":"ok","evaluationTime":0.001299237,"lastEvaluation":"2023-01-09T15:40:46.713892084Z","type":"recording"},{"name":"monitoring:haproxy_server_http_responses_total:sum","query":"sum by (exported_service) (rate(haproxy_server_http_responses_total{exported_namespace=\"openshift-monitoring\",exported_service=~\"alertmanager-main|prometheus-k8s\"}[5m]))","health":"ok","evaluationTime":0.000682128,"lastEvaluation":"2023-01-09T15:40:46.715193637Z","type":"recording"},{"name":"namespace_workload_pod:kube_pod_owner:relabel","query":"max by (cluster, namespace, workload, pod) (label_replace(label_replace(kube_pod_owner{job=\"kube-state-metrics\",owner_kind=\"ReplicationController\"}, \"replicationcontroller\", \"$1\", \"owner_name\", \"(.*)\") * on (replicationcontroller, namespace) group_left (owner_name) topk by (replicationcontroller, namespace) (1, max by (replicationcontroller, namespace, owner_name) (kube_replicationcontroller_owner{job=\"kube-state-metrics\"})), \"workload\", \"$1\", \"owner_name\", \"(.*)\"))","labels":{"workload_type":"deploymentconfig"},"health":"ok","evaluationTime":0.000247294,"lastEvaluation":"2023-01-09T15:40:46.715877293Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.006596512,"lastEvaluation":"2023-01-09T15:40:46.709530556Z"},{"name":"openshift-sre.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-cluster-monitoring-operator-prometheus-rules-ecb5e092-c575-415e-9b63-ed3be5afb842.yaml","rules":[{"name":"code:apiserver_request_total:rate:sum","query":"sum by (code) (rate(apiserver_request_total{job=\"apiserver\"}[10m]))","health":"ok","evaluationTime":0.015834823,"lastEvaluation":"2023-01-09T15:41:02.003634588Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.015843524,"lastEvaluation":"2023-01-09T15:41:02.003629808Z"},{"name":"kube-state-metrics","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kube-state-metrics-rules-1a461d42-7a28-430e-972a-a26dc781e581.yaml","rules":[{"state":"inactive","name":"KubeStateMetricsListErrors","query":"(sum(rate(kube_state_metrics_list_total{job=\"kube-state-metrics\",result=\"error\"}[5m])) / sum(rate(kube_state_metrics_list_total{job=\"kube-state-metrics\"}[5m]))) \u003e 0.01","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"kube-state-metrics is experiencing errors at an elevated rate in list operations. This is likely causing it to not be able to expose metrics about Kubernetes objects correctly or at all.","summary":"kube-state-metrics is experiencing errors in list operations."},"alerts":[],"health":"ok","evaluationTime":0.00041007,"lastEvaluation":"2023-01-09T15:40:51.920171276Z","type":"alerting"},{"state":"inactive","name":"KubeStateMetricsWatchErrors","query":"(sum(rate(kube_state_metrics_watch_total{job=\"kube-state-metrics\",result=\"error\"}[5m])) / sum(rate(kube_state_metrics_watch_total{job=\"kube-state-metrics\"}[5m]))) \u003e 0.01","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"kube-state-metrics is experiencing errors at an elevated rate in watch operations. This is likely causing it to not be able to expose metrics about Kubernetes objects correctly or at all.","summary":"kube-state-metrics is experiencing errors in watch operations."},"alerts":[],"health":"ok","evaluationTime":0.000718181,"lastEvaluation":"2023-01-09T15:40:51.920582931Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001135443,"lastEvaluation":"2023-01-09T15:40:51.920168123Z"},{"name":"k8s.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"name":"node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate","query":"sum by (cluster, namespace, pod, container) (irate(container_cpu_usage_seconds_total{image!=\"\",job=\"kubelet\",metrics_path=\"/metrics/cadvisor\"}[5m])) * on (cluster, namespace, pod) group_left (node) topk by (cluster, namespace, pod) (1, max by (cluster, namespace, pod, node) (kube_pod_info{node!=\"\"}))","health":"ok","evaluationTime":0.010481789,"lastEvaluation":"2023-01-09T15:41:05.130067101Z","type":"recording"},{"name":"node_namespace_pod_container:container_memory_working_set_bytes","query":"container_memory_working_set_bytes{image!=\"\",job=\"kubelet\",metrics_path=\"/metrics/cadvisor\"} * on (namespace, pod) group_left (node) topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))","health":"ok","evaluationTime":0.009955843,"lastEvaluation":"2023-01-09T15:41:05.140553288Z","type":"recording"},{"name":"node_namespace_pod_container:container_memory_rss","query":"container_memory_rss{image!=\"\",job=\"kubelet\",metrics_path=\"/metrics/cadvisor\"} * on (namespace, pod) group_left (node) topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))","health":"ok","evaluationTime":0.009370931,"lastEvaluation":"2023-01-09T15:41:05.15051276Z","type":"recording"},{"name":"node_namespace_pod_container:container_memory_cache","query":"container_memory_cache{image!=\"\",job=\"kubelet\",metrics_path=\"/metrics/cadvisor\"} * on (namespace, pod) group_left (node) topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))","health":"ok","evaluationTime":0.009349702,"lastEvaluation":"2023-01-09T15:41:05.159887653Z","type":"recording"},{"name":"node_namespace_pod_container:container_memory_swap","query":"container_memory_swap{image!=\"\",job=\"kubelet\",metrics_path=\"/metrics/cadvisor\"} * on (namespace, pod) group_left (node) topk by (namespace, pod) (1, max by (namespace, pod, node) (kube_pod_info{node!=\"\"}))","health":"ok","evaluationTime":0.008473478,"lastEvaluation":"2023-01-09T15:41:05.169241054Z","type":"recording"},{"name":"cluster:namespace:pod_memory:active:kube_pod_container_resource_requests","query":"kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"memory\"} * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) ((kube_pod_status_phase{phase=~\"Pending|Running\"} == 1))","health":"ok","evaluationTime":0.01034433,"lastEvaluation":"2023-01-09T15:41:05.177717594Z","type":"recording"},{"name":"namespace_memory:kube_pod_container_resource_requests:sum","query":"sum by (namespace, cluster) (sum by (namespace, pod, cluster) (max by (namespace, pod, container, cluster) (kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"memory\"}) * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)))","health":"ok","evaluationTime":0.008069246,"lastEvaluation":"2023-01-09T15:41:05.188065987Z","type":"recording"},{"name":"cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests","query":"kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"cpu\"} * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) ((kube_pod_status_phase{phase=~\"Pending|Running\"} == 1))","health":"ok","evaluationTime":0.008664242,"lastEvaluation":"2023-01-09T15:41:05.196138368Z","type":"recording"},{"name":"namespace_cpu:kube_pod_container_resource_requests:sum","query":"sum by (namespace, cluster) (sum by (namespace, pod, cluster) (max by (namespace, pod, container, cluster) (kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"cpu\"}) * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)))","health":"ok","evaluationTime":0.007808791,"lastEvaluation":"2023-01-09T15:41:05.204805376Z","type":"recording"},{"name":"cluster:namespace:pod_memory:active:kube_pod_container_resource_limits","query":"kube_pod_container_resource_limits{job=\"kube-state-metrics\",resource=\"memory\"} * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) ((kube_pod_status_phase{phase=~\"Pending|Running\"} == 1))","health":"ok","evaluationTime":0.003978642,"lastEvaluation":"2023-01-09T15:41:05.212616389Z","type":"recording"},{"name":"namespace_memory:kube_pod_container_resource_limits:sum","query":"sum by (namespace, cluster) (sum by (namespace, pod, cluster) (max by (namespace, pod, container, cluster) (kube_pod_container_resource_limits{job=\"kube-state-metrics\",resource=\"memory\"}) * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)))","health":"ok","evaluationTime":0.00398888,"lastEvaluation":"2023-01-09T15:41:05.216596808Z","type":"recording"},{"name":"cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits","query":"kube_pod_container_resource_limits{job=\"kube-state-metrics\",resource=\"cpu\"} * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) ((kube_pod_status_phase{phase=~\"Pending|Running\"} == 1))","health":"ok","evaluationTime":0.004078522,"lastEvaluation":"2023-01-09T15:41:05.220587357Z","type":"recording"},{"name":"namespace_cpu:kube_pod_container_resource_limits:sum","query":"sum by (namespace, cluster) (sum by (namespace, pod, cluster) (max by (namespace, pod, container, cluster) (kube_pod_container_resource_limits{job=\"kube-state-metrics\",resource=\"cpu\"}) * on (namespace, pod, cluster) group_left () max by (namespace, pod, cluster) (kube_pod_status_phase{phase=~\"Pending|Running\"} == 1)))","health":"ok","evaluationTime":0.004367451,"lastEvaluation":"2023-01-09T15:41:05.224667643Z","type":"recording"},{"name":"namespace_workload_pod:kube_pod_owner:relabel","query":"max by (cluster, namespace, workload, pod) (label_replace(label_replace(kube_pod_owner{job=\"kube-state-metrics\",owner_kind=\"ReplicaSet\"}, \"replicaset\", \"$1\", \"owner_name\", \"(.*)\") * on (replicaset, namespace) group_left (owner_name) topk by (replicaset, namespace) (1, max by (replicaset, namespace, owner_name) (kube_replicaset_owner{job=\"kube-state-metrics\"})), \"workload\", \"$1\", \"owner_name\", \"(.*)\"))","labels":{"workload_type":"deployment"},"health":"ok","evaluationTime":0.004150495,"lastEvaluation":"2023-01-09T15:41:05.229037761Z","type":"recording"},{"name":"namespace_workload_pod:kube_pod_owner:relabel","query":"max by (cluster, namespace, workload, pod) (label_replace(kube_pod_owner{job=\"kube-state-metrics\",owner_kind=\"DaemonSet\"}, \"workload\", \"$1\", \"owner_name\", \"(.*)\"))","labels":{"workload_type":"daemonset"},"health":"ok","evaluationTime":0.00134638,"lastEvaluation":"2023-01-09T15:41:05.233191507Z","type":"recording"},{"name":"namespace_workload_pod:kube_pod_owner:relabel","query":"max by (cluster, namespace, workload, pod) (label_replace(kube_pod_owner{job=\"kube-state-metrics\",owner_kind=\"StatefulSet\"}, \"workload\", \"$1\", \"owner_name\", \"(.*)\"))","labels":{"workload_type":"statefulset"},"health":"ok","evaluationTime":0.000279407,"lastEvaluation":"2023-01-09T15:41:05.234540281Z","type":"recording"},{"name":"namespace_workload_pod:kube_pod_owner:relabel","query":"max by (cluster, namespace, workload, pod) (label_replace(kube_pod_owner{job=\"kube-state-metrics\",owner_kind=\"Job\"}, \"workload\", \"$1\", \"owner_name\", \"(.*)\"))","labels":{"workload_type":"job"},"health":"ok","evaluationTime":0.000180215,"lastEvaluation":"2023-01-09T15:41:05.234821003Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.104940916,"lastEvaluation":"2023-01-09T15:41:05.130062615Z"},{"name":"kube-scheduler.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"name":"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum without (instance, pod) (rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.000155855,"lastEvaluation":"2023-01-09T15:40:53.688457613Z","type":"recording"},{"name":"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum without (instance, pod) (rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.00048101,"lastEvaluation":"2023-01-09T15:40:53.688615605Z","type":"recording"},{"name":"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum without (instance, pod) (rate(scheduler_binding_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.000092031,"lastEvaluation":"2023-01-09T15:40:53.689098481Z","type":"recording"},{"name":"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile","query":"histogram_quantile(0.9, sum without (instance, pod) (rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.9"},"health":"ok","evaluationTime":0.000099991,"lastEvaluation":"2023-01-09T15:40:53.689191751Z","type":"recording"},{"name":"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile","query":"histogram_quantile(0.9, sum without (instance, pod) (rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.9"},"health":"ok","evaluationTime":0.000414837,"lastEvaluation":"2023-01-09T15:40:53.689292608Z","type":"recording"},{"name":"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile","query":"histogram_quantile(0.9, sum without (instance, pod) (rate(scheduler_binding_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.9"},"health":"ok","evaluationTime":0.000085082,"lastEvaluation":"2023-01-09T15:40:53.689709019Z","type":"recording"},{"name":"cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile","query":"histogram_quantile(0.5, sum without (instance, pod) (rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.5"},"health":"ok","evaluationTime":0.000089205,"lastEvaluation":"2023-01-09T15:40:53.689795101Z","type":"recording"},{"name":"cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile","query":"histogram_quantile(0.5, sum without (instance, pod) (rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.5"},"health":"ok","evaluationTime":0.000448876,"lastEvaluation":"2023-01-09T15:40:53.689885634Z","type":"recording"},{"name":"cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile","query":"histogram_quantile(0.5, sum without (instance, pod) (rate(scheduler_binding_duration_seconds_bucket{job=\"scheduler\"}[5m])))","labels":{"quantile":"0.5"},"health":"ok","evaluationTime":0.000091319,"lastEvaluation":"2023-01-09T15:40:53.690336129Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.001975842,"lastEvaluation":"2023-01-09T15:40:53.688453314Z"},{"name":"kubelet.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"name":"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile","query":"histogram_quantile(0.99, sum by (cluster, instance, le) (rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) * on (cluster, instance) group_left (node) kubelet_node_name{job=\"kubelet\",metrics_path=\"/metrics\"})","labels":{"quantile":"0.99"},"health":"ok","evaluationTime":0.000995335,"lastEvaluation":"2023-01-09T15:40:59.745761229Z","type":"recording"},{"name":"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile","query":"histogram_quantile(0.9, sum by (cluster, instance, le) (rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) * on (cluster, instance) group_left (node) kubelet_node_name{job=\"kubelet\",metrics_path=\"/metrics\"})","labels":{"quantile":"0.9"},"health":"ok","evaluationTime":0.000920507,"lastEvaluation":"2023-01-09T15:40:59.746758413Z","type":"recording"},{"name":"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile","query":"histogram_quantile(0.5, sum by (cluster, instance, le) (rate(kubelet_pleg_relist_duration_seconds_bucket[5m])) * on (cluster, instance) group_left (node) kubelet_node_name{job=\"kubelet\",metrics_path=\"/metrics\"})","labels":{"quantile":"0.5"},"health":"ok","evaluationTime":0.000958871,"lastEvaluation":"2023-01-09T15:40:59.747680486Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.002884192,"lastEvaluation":"2023-01-09T15:40:59.745757922Z"},{"name":"kubernetes-apps","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"inactive","name":"KubePodCrashLooping","query":"max_over_time(kube_pod_container_status_waiting_reason{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",reason=\"CrashLoopBackOff\"}[5m]) \u003e= 1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Pod {{ $labels.namespace }}/{{ $labels.pod }} ({{ $labels.container }}) is in waiting state (reason: \"CrashLoopBackOff\").","summary":"Pod is crash looping."},"alerts":[],"health":"ok","evaluationTime":0.000294083,"lastEvaluation":"2023-01-09T15:41:10.446063081Z","type":"alerting"},{"state":"pending","name":"KubePodNotReady","query":"sum by (namespace, pod, cluster) (max by (namespace, pod, cluster) (kube_pod_status_phase{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",phase=~\"Pending|Unknown\"} unless ignoring (phase) (kube_pod_status_unschedulable{job=\"kube-state-metrics\"} == 1)) * on (namespace, pod, cluster) group_left (owner_kind) topk by (namespace, pod, cluster) (1, max by (namespace, pod, owner_kind, cluster) (kube_pod_owner{owner_kind!=\"Job\"}))) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Pod {{ $labels.namespace }}/{{ $labels.pod }} has been in a non-ready state for longer than 15 minutes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePodNotReady.md","summary":"Pod has been in a non-ready state for more than 15 minutes."},"alerts":[{"labels":{"alertname":"KubePodNotReady","namespace":"openshift-debug-nvlhr","pod":"ip-10-0-145-4us-east-2computeinternal-debug","severity":"warning"},"annotations":{"description":"Pod openshift-debug-nvlhr/ip-10-0-145-4us-east-2computeinternal-debug has been in a non-ready state for longer than 15 minutes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePodNotReady.md","summary":"Pod has been in a non-ready state for more than 15 minutes."},"state":"pending","activeAt":"2023-01-09T15:40:40.445423243Z","value":"1e+00"}],"health":"ok","evaluationTime":0.008524951,"lastEvaluation":"2023-01-09T15:41:10.446358727Z","type":"alerting"},{"state":"inactive","name":"KubeDeploymentGenerationMismatch","query":"kube_deployment_status_observed_generation{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_deployment_metadata_generation{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Deployment generation for {{ $labels.namespace }}/{{ $labels.deployment }} does not match, this indicates that the Deployment has failed but has not been rolled back.","summary":"Deployment generation mismatch due to possible roll-back"},"alerts":[],"health":"ok","evaluationTime":0.001205877,"lastEvaluation":"2023-01-09T15:41:10.454886064Z","type":"alerting"},{"state":"firing","name":"KubeStatefulSetReplicasMismatch","query":"(kube_statefulset_status_replicas_ready{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_statefulset_status_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) and (changes(kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[10m]) == 0)","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} has not matched the expected number of replicas for longer than 15 minutes.","summary":"Deployment has not matched the expected number of replicas."},"alerts":[{"labels":{"alertname":"KubeStatefulSetReplicasMismatch","container":"kube-rbac-proxy-main","endpoint":"https-main","job":"kube-state-metrics","namespace":"openshift-logging","service":"kube-state-metrics","severity":"warning","statefulset":"lokistack-sample-ingester"},"annotations":{"description":"StatefulSet openshift-logging/lokistack-sample-ingester has not matched the expected number of replicas for longer than 15 minutes.","summary":"Deployment has not matched the expected number of replicas."},"state":"firing","activeAt":"2023-01-09T06:23:40.445423243Z","value":"1e+00"},{"labels":{"alertname":"KubeStatefulSetReplicasMismatch","container":"kube-rbac-proxy-main","endpoint":"https-main","job":"kube-state-metrics","namespace":"openshift-logging","service":"kube-state-metrics","severity":"warning","statefulset":"lokistack-sample-ruler"},"annotations":{"description":"StatefulSet openshift-logging/lokistack-sample-ruler has not matched the expected number of replicas for longer than 15 minutes.","summary":"Deployment has not matched the expected number of replicas."},"state":"firing","activeAt":"2023-01-09T06:13:40.445423243Z","value":"1e+00"}],"health":"ok","evaluationTime":0.000948435,"lastEvaluation":"2023-01-09T15:41:10.456093423Z","type":"alerting"},{"state":"inactive","name":"KubeStatefulSetGenerationMismatch","query":"kube_statefulset_status_observed_generation{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_statefulset_metadata_generation{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"StatefulSet generation for {{ $labels.namespace }}/{{ $labels.statefulset }} does not match, this indicates that the StatefulSet has failed but has not been rolled back.","summary":"StatefulSet generation mismatch due to possible roll-back"},"alerts":[],"health":"ok","evaluationTime":0.000437699,"lastEvaluation":"2023-01-09T15:41:10.457043653Z","type":"alerting"},{"state":"inactive","name":"KubeStatefulSetUpdateNotRolledOut","query":"(max without (revision) (kube_statefulset_status_current_revision{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} unless kube_statefulset_status_update_revision{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) * (kube_statefulset_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"})) and (changes(kube_statefulset_status_replicas_updated{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[5m]) == 0)","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} update has not been rolled out.","summary":"StatefulSet update has not been rolled out."},"alerts":[],"health":"ok","evaluationTime":0.000966682,"lastEvaluation":"2023-01-09T15:41:10.457482665Z","type":"alerting"},{"state":"inactive","name":"KubeDaemonSetRolloutStuck","query":"((kube_daemonset_status_current_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) or (kube_daemonset_status_number_misscheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != 0) or (kube_daemonset_status_updated_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) or (kube_daemonset_status_number_available{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"})) and (changes(kube_daemonset_status_updated_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[5m]) == 0)","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} has not finished or progressed for at least 30 minutes.","summary":"DaemonSet rollout is stuck."},"alerts":[],"health":"ok","evaluationTime":0.002024682,"lastEvaluation":"2023-01-09T15:41:10.458450664Z","type":"alerting"},{"state":"pending","name":"KubeContainerWaiting","query":"sum by (namespace, pod, container, cluster) (kube_pod_container_status_waiting_reason{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"pod/{{ $labels.pod }} in namespace {{ $labels.namespace }} on container {{ $labels.container}} has been in waiting state for longer than 1 hour.","summary":"Pod container waiting longer than 1 hour"},"alerts":[{"labels":{"alertname":"KubeContainerWaiting","container":"container-00","namespace":"openshift-debug-nvlhr","pod":"ip-10-0-145-4us-east-2computeinternal-debug","severity":"warning"},"annotations":{"description":"pod/ip-10-0-145-4us-east-2computeinternal-debug in namespace openshift-debug-nvlhr on container container-00 has been in waiting state for longer than 1 hour.","summary":"Pod container waiting longer than 1 hour"},"state":"pending","activeAt":"2023-01-09T15:40:40.445423243Z","value":"1e+00"}],"health":"ok","evaluationTime":0.000445909,"lastEvaluation":"2023-01-09T15:41:10.46047729Z","type":"alerting"},{"state":"inactive","name":"KubeDaemonSetNotScheduled","query":"kube_daemonset_status_desired_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} - kube_daemonset_status_current_number_scheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are not scheduled.","summary":"DaemonSet pods are not scheduled."},"alerts":[],"health":"ok","evaluationTime":0.000599405,"lastEvaluation":"2023-01-09T15:41:10.460925255Z","type":"alerting"},{"state":"inactive","name":"KubeDaemonSetMisScheduled","query":"kube_daemonset_status_number_misscheduled{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are running where they are not supposed to run.","summary":"DaemonSet pods are misscheduled."},"alerts":[],"health":"ok","evaluationTime":0.000292466,"lastEvaluation":"2023-01-09T15:41:10.461526Z","type":"alerting"},{"state":"inactive","name":"KubeJobNotCompleted","query":"time() - max by (namespace, job_name, cluster) (kube_job_status_start_time{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} and kube_job_status_active{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0) \u003e 43200","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"Job {{ $labels.namespace }}/{{ $labels.job_name }} is taking more than {{ \"43200\" | humanizeDuration }} to complete.","summary":"Job did not complete in time"},"alerts":[],"health":"ok","evaluationTime":0.0005095,"lastEvaluation":"2023-01-09T15:41:10.461819705Z","type":"alerting"},{"state":"inactive","name":"KubeJobFailed","query":"kube_job_failed{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete. Removing failed job after investigation should clear this alert.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubeJobFailed.md","summary":"Job failed to complete."},"alerts":[],"health":"ok","evaluationTime":0.000160741,"lastEvaluation":"2023-01-09T15:41:10.462330631Z","type":"alerting"},{"state":"inactive","name":"KubeHpaReplicasMismatch","query":"(kube_horizontalpodautoscaler_status_desired_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} != kube_horizontalpodautoscaler_status_current_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) and (kube_horizontalpodautoscaler_status_current_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e kube_horizontalpodautoscaler_spec_min_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) and (kube_horizontalpodautoscaler_status_current_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003c kube_horizontalpodautoscaler_spec_max_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) and changes(kube_horizontalpodautoscaler_status_current_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[15m]) == 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has not matched the desired number of replicas for longer than 15 minutes.","summary":"HPA has not matched desired number of replicas."},"alerts":[],"health":"ok","evaluationTime":0.000904731,"lastEvaluation":"2023-01-09T15:41:10.462492451Z","type":"alerting"},{"state":"inactive","name":"KubeHpaMaxedOut","query":"kube_horizontalpodautoscaler_status_current_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} == kube_horizontalpodautoscaler_spec_max_replicas{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has been running at max replicas for longer than 15 minutes.","summary":"HPA is running at max replicas"},"alerts":[],"health":"ok","evaluationTime":0.000279104,"lastEvaluation":"2023-01-09T15:41:10.463399608Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.017622237,"lastEvaluation":"2023-01-09T15:41:10.446058917Z"},{"name":"kubernetes-resources","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"firing","name":"KubeCPUOvercommit","query":"sum(namespace_cpu:kube_pod_container_resource_requests:sum) - (sum(kube_node_status_allocatable{resource=\"cpu\"}) - max(kube_node_status_allocatable{resource=\"cpu\"})) \u003e 0 and (sum(kube_node_status_allocatable{resource=\"cpu\"}) - max(kube_node_status_allocatable{resource=\"cpu\"})) \u003e 0","duration":600,"labels":{"namespace":"kube-system","severity":"warning"},"annotations":{"description":"Cluster has overcommitted CPU resource requests for Pods by {{ $value }} CPU shares and cannot tolerate node failure.","summary":"Cluster has overcommitted CPU resource requests."},"alerts":[{"labels":{"alertname":"KubeCPUOvercommit","namespace":"kube-system","severity":"warning"},"annotations":{"description":"Cluster has overcommitted CPU resource requests for Pods by 2.8659999999999854 CPU shares and cannot tolerate node failure.","summary":"Cluster has overcommitted CPU resource requests."},"state":"firing","activeAt":"2023-01-09T06:14:49.820234794Z","value":"2.8659999999999854e+00"}],"health":"ok","evaluationTime":0.000995877,"lastEvaluation":"2023-01-09T15:40:49.821930884Z","type":"alerting"},{"state":"inactive","name":"KubeMemoryOvercommit","query":"sum(namespace_memory:kube_pod_container_resource_requests:sum) - (sum(kube_node_status_allocatable{resource=\"memory\"}) - max(kube_node_status_allocatable{resource=\"memory\"})) \u003e 0 and (sum(kube_node_status_allocatable{resource=\"memory\"}) - max(kube_node_status_allocatable{resource=\"memory\"})) \u003e 0","duration":600,"labels":{"namespace":"kube-system","severity":"warning"},"annotations":{"description":"Cluster has overcommitted memory resource requests for Pods by {{ $value | humanize }} bytes and cannot tolerate node failure.","summary":"Cluster has overcommitted memory resource requests."},"alerts":[],"health":"ok","evaluationTime":0.000690126,"lastEvaluation":"2023-01-09T15:40:49.822929583Z","type":"alerting"},{"state":"inactive","name":"KubeCPUQuotaOvercommit","query":"sum(min without (resource) (kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",resource=~\"(cpu|requests.cpu)\",type=\"hard\"})) / sum(kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"cpu\"}) \u003e 1.5","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"Cluster has overcommitted CPU resource requests for Namespaces.","summary":"Cluster has overcommitted CPU resource requests."},"alerts":[],"health":"ok","evaluationTime":0.000520501,"lastEvaluation":"2023-01-09T15:40:49.823621688Z","type":"alerting"},{"state":"inactive","name":"KubeMemoryQuotaOvercommit","query":"sum(min without (resource) (kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",resource=~\"(memory|requests.memory)\",type=\"hard\"})) / sum(kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"memory\"}) \u003e 1.5","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"Cluster has overcommitted memory resource requests for Namespaces.","summary":"Cluster has overcommitted memory resource requests."},"alerts":[],"health":"ok","evaluationTime":0.000479715,"lastEvaluation":"2023-01-09T15:40:49.824144174Z","type":"alerting"},{"state":"inactive","name":"KubeQuotaAlmostFull","query":"kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"used\"} / ignoring (instance, job, type) (kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"hard\"} \u003e 0) \u003e 0.9 \u003c 1","duration":900,"labels":{"severity":"info"},"annotations":{"description":"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.","summary":"Namespace quota is going to be full."},"alerts":[],"health":"ok","evaluationTime":0.000443856,"lastEvaluation":"2023-01-09T15:40:49.824625581Z","type":"alerting"},{"state":"inactive","name":"KubeQuotaFullyUsed","query":"kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"used\"} / ignoring (instance, job, type) (kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"hard\"} \u003e 0) == 1","duration":900,"labels":{"severity":"info"},"annotations":{"description":"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.","summary":"Namespace quota is fully used."},"alerts":[],"health":"ok","evaluationTime":0.000420158,"lastEvaluation":"2023-01-09T15:40:49.82507092Z","type":"alerting"},{"state":"inactive","name":"KubeQuotaExceeded","query":"kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"used\"} / ignoring (instance, job, type) (kube_resourcequota{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",type=\"hard\"} \u003e 0) \u003e 1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.","summary":"Namespace quota has exceeded the limits."},"alerts":[],"health":"ok","evaluationTime":0.000389945,"lastEvaluation":"2023-01-09T15:40:49.825492908Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.003961958,"lastEvaluation":"2023-01-09T15:40:49.821923129Z"},{"name":"kubernetes-storage","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"inactive","name":"KubePersistentVolumeFillingUp","query":"(kubelet_volume_stats_available_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} / kubelet_volume_stats_capacity_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) \u003c 0.03 and kubelet_volume_stats_used_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_access_mode{access_mode=\"ReadOnlyMany\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_labels{label_alerts_k8s_io_kube_persistent_volume_filling_up=\"disabled\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1","duration":60,"labels":{"severity":"critical"},"annotations":{"description":"The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} is only {{ $value | humanizePercentage }} free.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePersistentVolumeFillingUp.md","summary":"PersistentVolume is filling up."},"alerts":[],"health":"ok","evaluationTime":0.001518888,"lastEvaluation":"2023-01-09T15:41:01.491329401Z","type":"alerting"},{"state":"inactive","name":"KubePersistentVolumeFillingUp","query":"(kubelet_volume_stats_available_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} / kubelet_volume_stats_capacity_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) \u003c 0.15 and kubelet_volume_stats_used_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0 and predict_linear(kubelet_volume_stats_available_bytes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[6h], 4 * 24 * 3600) \u003c 0 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_access_mode{access_mode=\"ReadOnlyMany\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_labels{label_alerts_k8s_io_kube_persistent_volume_filling_up=\"disabled\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} is expected to fill up within four days. Currently {{ $value | humanizePercentage }} is available.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePersistentVolumeFillingUp.md","summary":"PersistentVolume is filling up."},"alerts":[],"health":"ok","evaluationTime":0.005761201,"lastEvaluation":"2023-01-09T15:41:01.492850799Z","type":"alerting"},{"state":"inactive","name":"KubePersistentVolumeInodesFillingUp","query":"(kubelet_volume_stats_inodes_free{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} / kubelet_volume_stats_inodes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) \u003c 0.03 and kubelet_volume_stats_inodes_used{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_access_mode{access_mode=\"ReadOnlyMany\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_labels{label_alerts_k8s_io_kube_persistent_volume_filling_up=\"disabled\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1","duration":60,"labels":{"severity":"critical"},"annotations":{"description":"The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} only has {{ $value | humanizePercentage }} free inodes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePersistentVolumeInodesFillingUp.md","summary":"PersistentVolumeInodes are filling up."},"alerts":[],"health":"ok","evaluationTime":0.000985839,"lastEvaluation":"2023-01-09T15:41:01.498614058Z","type":"alerting"},{"state":"inactive","name":"KubePersistentVolumeInodesFillingUp","query":"(kubelet_volume_stats_inodes_free{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} / kubelet_volume_stats_inodes{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}) \u003c 0.15 and kubelet_volume_stats_inodes_used{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"} \u003e 0 and predict_linear(kubelet_volume_stats_inodes_free{job=\"kubelet\",metrics_path=\"/metrics\",namespace=~\"(openshift-.*|kube-.*|default)\"}[6h], 4 * 24 * 3600) \u003c 0 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_access_mode{access_mode=\"ReadOnlyMany\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1 unless on (namespace, persistentvolumeclaim) kube_persistentvolumeclaim_labels{label_alerts_k8s_io_kube_persistent_volume_filling_up=\"disabled\",namespace=~\"(openshift-.*|kube-.*|default)\"} == 1","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} is expected to run out of inodes within four days. Currently {{ $value | humanizePercentage }} of its inodes are free.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubePersistentVolumeInodesFillingUp.md","summary":"PersistentVolumeInodes are filling up."},"alerts":[],"health":"ok","evaluationTime":0.004641952,"lastEvaluation":"2023-01-09T15:41:01.499601759Z","type":"alerting"},{"state":"inactive","name":"KubePersistentVolumeErrors","query":"kube_persistentvolume_status_phase{job=\"kube-state-metrics\",namespace=~\"(openshift-.*|kube-.*|default)\",phase=~\"Failed|Pending\"} \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The persistent volume {{ $labels.persistentvolume }} has status {{ $labels.phase }}.","summary":"PersistentVolume is having issues with provisioning."},"alerts":[],"health":"ok","evaluationTime":0.000303807,"lastEvaluation":"2023-01-09T15:41:01.504245268Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.013228278,"lastEvaluation":"2023-01-09T15:41:01.491323241Z"},{"name":"kubernetes-system","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"inactive","name":"KubeClientErrors","query":"(sum by (cluster, instance, job, namespace) (rate(rest_client_requests_total{code=~\"5..\"}[5m])) / sum by (cluster, instance, job, namespace) (rate(rest_client_requests_total[5m]))) \u003e 0.01","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Kubernetes API server client '{{ $labels.job }}/{{ $labels.instance }}' is experiencing {{ $value | humanizePercentage }} errors.'","summary":"Kubernetes API server client is experiencing errors."},"alerts":[],"health":"ok","evaluationTime":0.003661106,"lastEvaluation":"2023-01-09T15:40:50.142470875Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.003667072,"lastEvaluation":"2023-01-09T15:40:50.142467752Z"},{"name":"kubernetes-system-apiserver","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"inactive","name":"KubeAggregatedAPIErrors","query":"sum by (name, namespace, cluster) (increase(aggregator_unavailable_apiservice_total[10m])) \u003e 4","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"Kubernetes aggregated API {{ $labels.name }}/{{ $labels.namespace }} has reported errors. It has appeared unavailable {{ $value | humanize }} times averaged over the past 10m.","summary":"Kubernetes aggregated API has reported errors."},"alerts":[],"health":"ok","evaluationTime":0.00015552,"lastEvaluation":"2023-01-09T15:40:52.652996078Z","type":"alerting"},{"state":"inactive","name":"KubeAggregatedAPIDown","query":"(1 - max by (name, namespace, cluster) (avg_over_time(aggregator_unavailable_apiservice[10m]))) * 100 \u003c 85","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Kubernetes aggregated API {{ $labels.name }}/{{ $labels.namespace }} has been only {{ $value | humanize }}% available over the last 10m.","summary":"Kubernetes aggregated API is down."},"alerts":[],"health":"ok","evaluationTime":0.001790546,"lastEvaluation":"2023-01-09T15:40:52.653153345Z","type":"alerting"},{"state":"inactive","name":"KubeAPIDown","query":"absent(up{job=\"apiserver\"} == 1)","duration":900,"labels":{"severity":"critical"},"annotations":{"description":"KubeAPI has disappeared from Prometheus target discovery.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubeAPIDown.md","summary":"Target disappeared from Prometheus target discovery."},"alerts":[],"health":"ok","evaluationTime":0.000129739,"lastEvaluation":"2023-01-09T15:40:52.654945301Z","type":"alerting"},{"state":"inactive","name":"KubeAPITerminatedRequests","query":"sum(rate(apiserver_request_terminations_total{job=\"apiserver\"}[10m])) / (sum(rate(apiserver_request_total{job=\"apiserver\"}[10m])) + sum(rate(apiserver_request_terminations_total{job=\"apiserver\"}[10m]))) \u003e 0.2","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests.","summary":"The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests."},"alerts":[],"health":"ok","evaluationTime":0.015793985,"lastEvaluation":"2023-01-09T15:40:52.655076617Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.017882386,"lastEvaluation":"2023-01-09T15:40:52.652990838Z"},{"name":"kubernetes-system-kubelet","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"state":"inactive","name":"KubeNodeNotReady","query":"kube_node_status_condition{condition=\"Ready\",job=\"kube-state-metrics\",status=\"true\"} == 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"{{ $labels.node }} has been unready for more than 15 minutes.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubeNodeNotReady.md","summary":"Node is not ready."},"alerts":[],"health":"ok","evaluationTime":0.000200736,"lastEvaluation":"2023-01-09T15:40:48.131350307Z","type":"alerting"},{"state":"inactive","name":"KubeNodeUnreachable","query":"(kube_node_spec_taint{effect=\"NoSchedule\",job=\"kube-state-metrics\",key=\"node.kubernetes.io/unreachable\"} unless ignoring (key, value) kube_node_spec_taint{job=\"kube-state-metrics\",key=~\"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn\"}) == 1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"{{ $labels.node }} is unreachable and some workloads may be rescheduled.","summary":"Node is unreachable."},"alerts":[],"health":"ok","evaluationTime":0.000278184,"lastEvaluation":"2023-01-09T15:40:48.131552528Z","type":"alerting"},{"state":"inactive","name":"KubeletTooManyPods","query":"count by (cluster, node) ((kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} == 1) * on (instance, pod, namespace, cluster) group_left (node) topk by (instance, pod, namespace, cluster) (1, kube_pod_info{job=\"kube-state-metrics\"})) / max by (cluster, node) (kube_node_status_capacity{job=\"kube-state-metrics\",resource=\"pods\"} != 1) \u003e 0.95","duration":900,"labels":{"severity":"info"},"annotations":{"description":"Kubelet '{{ $labels.node }}' is running at {{ $value | humanizePercentage }} of its Pod capacity.","summary":"Kubelet is running at capacity."},"alerts":[],"health":"ok","evaluationTime":0.005348084,"lastEvaluation":"2023-01-09T15:40:48.131832163Z","type":"alerting"},{"state":"inactive","name":"KubeNodeReadinessFlapping","query":"sum by (cluster, node) (changes(kube_node_status_condition{condition=\"Ready\",status=\"true\"}[15m])) \u003e 2","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"The readiness status of node {{ $labels.node }} has changed {{ $value }} times in the last 15 minutes.","summary":"Node readiness status is flapping."},"alerts":[],"health":"ok","evaluationTime":0.000199946,"lastEvaluation":"2023-01-09T15:40:48.137182082Z","type":"alerting"},{"state":"inactive","name":"KubeletPlegDurationHigh","query":"node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile{quantile=\"0.99\"} \u003e= 10","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"The Kubelet Pod Lifecycle Event Generator has a 99th percentile duration of {{ $value }} seconds on node {{ $labels.node }}.","summary":"Kubelet Pod Lifecycle Event Generator is taking too long to relist."},"alerts":[],"health":"ok","evaluationTime":0.000105097,"lastEvaluation":"2023-01-09T15:40:48.137383221Z","type":"alerting"},{"state":"inactive","name":"KubeletPodStartUpLatencyHigh","query":"histogram_quantile(0.99, sum by (cluster, instance, le) (rate(kubelet_pod_worker_duration_seconds_bucket{job=\"kubelet\",metrics_path=\"/metrics\"}[5m]))) * on (cluster, instance) group_left (node) kubelet_node_name{job=\"kubelet\",metrics_path=\"/metrics\"} \u003e 60","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Kubelet Pod startup 99th percentile latency is {{ $value }} seconds on node {{ $labels.node }}.","summary":"Kubelet Pod startup latency is too high."},"alerts":[],"health":"ok","evaluationTime":0.001877382,"lastEvaluation":"2023-01-09T15:40:48.137489405Z","type":"alerting"},{"state":"inactive","name":"KubeletClientCertificateRenewalErrors","query":"increase(kubelet_certificate_manager_client_expiration_renew_errors[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Kubelet on node {{ $labels.node }} has failed to renew its client certificate ({{ $value | humanize }} errors in the last 5 minutes).","summary":"Kubelet has failed to renew its client certificate."},"alerts":[],"health":"ok","evaluationTime":0.000140882,"lastEvaluation":"2023-01-09T15:40:48.139368605Z","type":"alerting"},{"state":"inactive","name":"KubeletServerCertificateRenewalErrors","query":"increase(kubelet_server_expiration_renew_errors[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Kubelet on node {{ $labels.node }} has failed to renew its server certificate ({{ $value | humanize }} errors in the last 5 minutes).","summary":"Kubelet has failed to renew its server certificate."},"alerts":[],"health":"ok","evaluationTime":0.000116239,"lastEvaluation":"2023-01-09T15:40:48.139510662Z","type":"alerting"},{"state":"inactive","name":"KubeletDown","query":"absent(up{job=\"kubelet\",metrics_path=\"/metrics\"} == 1)","duration":900,"labels":{"namespace":"kube-system","severity":"critical"},"annotations":{"description":"Kubelet has disappeared from Prometheus target discovery.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/KubeletDown.md","summary":"Target disappeared from Prometheus target discovery."},"alerts":[],"health":"ok","evaluationTime":0.000158453,"lastEvaluation":"2023-01-09T15:40:48.139627929Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.008442957,"lastEvaluation":"2023-01-09T15:40:48.131345562Z"},{"name":"node.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-kubernetes-monitoring-rules-c5ff804d-ceaa-4f31-955b-0a7b69ad8ebc.yaml","rules":[{"name":"node_namespace_pod:kube_pod_info:","query":"topk by (cluster, namespace, pod) (1, max by (cluster, node, namespace, pod) (label_replace(kube_pod_info{job=\"kube-state-metrics\",node!=\"\"}, \"pod\", \"$1\", \"pod\", \"(.*)\")))","health":"ok","evaluationTime":0.004331267,"lastEvaluation":"2023-01-09T15:41:01.000932049Z","type":"recording"},{"name":":node_memory_MemAvailable_bytes:sum","query":"sum by (cluster) (node_memory_MemAvailable_bytes{job=\"node-exporter\"} or (node_memory_Buffers_bytes{job=\"node-exporter\"} + node_memory_Cached_bytes{job=\"node-exporter\"} + node_memory_MemFree_bytes{job=\"node-exporter\"} + node_memory_Slab_bytes{job=\"node-exporter\"}))","health":"ok","evaluationTime":0.00050961,"lastEvaluation":"2023-01-09T15:41:01.005267979Z","type":"recording"},{"name":"cluster:node_cpu:ratio_rate5m","query":"sum(rate(node_cpu_seconds_total{job=\"node-exporter\",mode!=\"idle\",mode!=\"iowait\",mode!=\"steal\"}[5m])) / count(sum by (cluster, instance, cpu) (node_cpu_seconds_total{job=\"node-exporter\"}))","health":"ok","evaluationTime":0.00518758,"lastEvaluation":"2023-01-09T15:41:01.005779175Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.010044091,"lastEvaluation":"2023-01-09T15:41:01.000926099Z"},{"name":"node-exporter","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-node-exporter-rules-8910cd92-153c-428c-bac1-3b26a98cb8a2.yaml","rules":[{"state":"inactive","name":"NodeFilesystemSpaceFillingUp","query":"(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_size_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 15 and predict_linear(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"}[6h], 24 * 60 * 60) \u003c 0 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available space left and is filling up.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemSpaceFillingUp.md","summary":"Filesystem is predicted to run out of space within the next 24 hours."},"alerts":[],"health":"ok","evaluationTime":0.022346404,"lastEvaluation":"2023-01-09T15:41:10.875910613Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemSpaceFillingUp","query":"(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_size_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 10 and predict_linear(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"}[6h], 4 * 60 * 60) \u003c 0 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"critical"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available space left and is filling up fast.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemSpaceFillingUp.md","summary":"Filesystem is predicted to run out of space within the next 4 hours."},"alerts":[],"health":"ok","evaluationTime":0.014188459,"lastEvaluation":"2023-01-09T15:41:10.898260319Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemAlmostOutOfSpace","query":"(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_size_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 5 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":1800,"labels":{"severity":"warning"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available space left.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemAlmostOutOfSpace.md","summary":"Filesystem has less than 5% space left."},"alerts":[],"health":"ok","evaluationTime":0.001842522,"lastEvaluation":"2023-01-09T15:41:10.912450783Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemAlmostOutOfSpace","query":"(node_filesystem_avail_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_size_bytes{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 3 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":1800,"labels":{"severity":"critical"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available space left.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemAlmostOutOfSpace.md","summary":"Filesystem has less than 3% space left."},"alerts":[],"health":"ok","evaluationTime":0.001761906,"lastEvaluation":"2023-01-09T15:41:10.91429471Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemFilesFillingUp","query":"(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_files{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 40 and predict_linear(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"}[6h], 24 * 60 * 60) \u003c 0 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available inodes left and is filling up.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemFilesFillingUp.md","summary":"Filesystem is predicted to run out of inodes within the next 24 hours."},"alerts":[],"health":"ok","evaluationTime":0.013544493,"lastEvaluation":"2023-01-09T15:41:10.916057962Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemFilesFillingUp","query":"(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_files{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 20 and predict_linear(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"}[6h], 4 * 60 * 60) \u003c 0 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"critical"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available inodes left and is filling up fast.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemFilesFillingUp.md","summary":"Filesystem is predicted to run out of inodes within the next 4 hours."},"alerts":[],"health":"ok","evaluationTime":0.013431989,"lastEvaluation":"2023-01-09T15:41:10.929604386Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemAlmostOutOfFiles","query":"(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_files{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 5 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available inodes left.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemAlmostOutOfFiles.md","summary":"Filesystem has less than 5% inodes left."},"alerts":[],"health":"ok","evaluationTime":0.001804474,"lastEvaluation":"2023-01-09T15:41:10.943038259Z","type":"alerting"},{"state":"inactive","name":"NodeFilesystemAlmostOutOfFiles","query":"(node_filesystem_files_free{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} / node_filesystem_files{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} * 100 \u003c 3 and node_filesystem_readonly{fstype!=\"\",job=\"node-exporter\",mountpoint!=\"\"} == 0)","duration":3600,"labels":{"severity":"critical"},"annotations":{"description":"Filesystem on {{ $labels.device }} at {{ $labels.instance }} has only {{ printf \"%.2f\" $value }}% available inodes left.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFilesystemAlmostOutOfFiles.md","summary":"Filesystem has less than 3% inodes left."},"alerts":[],"health":"ok","evaluationTime":0.001764237,"lastEvaluation":"2023-01-09T15:41:10.944844406Z","type":"alerting"},{"state":"inactive","name":"NodeNetworkReceiveErrs","query":"rate(node_network_receive_errs_total[2m]) / rate(node_network_receive_packets_total[2m]) \u003e 0.01","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf \"%.0f\" $value }} receive errors in the last two minutes.","summary":"Network interface is reporting many receive errors."},"alerts":[],"health":"ok","evaluationTime":0.000789732,"lastEvaluation":"2023-01-09T15:41:10.946610298Z","type":"alerting"},{"state":"inactive","name":"NodeNetworkTransmitErrs","query":"rate(node_network_transmit_errs_total[2m]) / rate(node_network_transmit_packets_total[2m]) \u003e 0.01","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"{{ $labels.instance }} interface {{ $labels.device }} has encountered {{ printf \"%.0f\" $value }} transmit errors in the last two minutes.","summary":"Network interface is reporting many transmit errors."},"alerts":[],"health":"ok","evaluationTime":0.000958229,"lastEvaluation":"2023-01-09T15:41:10.947402497Z","type":"alerting"},{"state":"inactive","name":"NodeHighNumberConntrackEntriesUsed","query":"(node_nf_conntrack_entries / node_nf_conntrack_entries_limit) \u003e 0.75","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value | humanizePercentage }} of conntrack entries are used.","summary":"Number of conntrack are getting close to the limit."},"alerts":[],"health":"ok","evaluationTime":0.000204278,"lastEvaluation":"2023-01-09T15:41:10.948362216Z","type":"alerting"},{"state":"inactive","name":"NodeTextFileCollectorScrapeError","query":"node_textfile_scrape_error{job=\"node-exporter\"} == 1","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"Node Exporter text file collector failed to scrape.","summary":"Node Exporter text file collector failed to scrape."},"alerts":[],"health":"ok","evaluationTime":0.000110511,"lastEvaluation":"2023-01-09T15:41:10.948568083Z","type":"alerting"},{"state":"inactive","name":"NodeClockSkewDetected","query":"(node_timex_offset_seconds{job=\"node-exporter\"} \u003e 0.05 and deriv(node_timex_offset_seconds{job=\"node-exporter\"}[5m]) \u003e= 0) or (node_timex_offset_seconds{job=\"node-exporter\"} \u003c -0.05 and deriv(node_timex_offset_seconds{job=\"node-exporter\"}[5m]) \u003c= 0)","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Clock on {{ $labels.instance }} is out of sync by more than 300s. Ensure NTP is configured correctly on this host.","summary":"Clock skew detected."},"alerts":[],"health":"ok","evaluationTime":0.00034845,"lastEvaluation":"2023-01-09T15:41:10.948679824Z","type":"alerting"},{"state":"inactive","name":"NodeClockNotSynchronising","query":"min_over_time(node_timex_sync_status{job=\"node-exporter\"}[5m]) == 0 and node_timex_maxerror_seconds{job=\"node-exporter\"} \u003e= 16","duration":600,"labels":{"severity":"critical"},"annotations":{"description":"Clock on {{ $labels.instance }} is not synchronising. Ensure NTP is configured on this host.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeClockNotSynchronising.md","summary":"Clock not synchronising."},"alerts":[],"health":"ok","evaluationTime":0.000228862,"lastEvaluation":"2023-01-09T15:41:10.949029641Z","type":"alerting"},{"state":"inactive","name":"NodeRAIDDegraded","query":"node_md_disks_required{device=~\"mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+\",job=\"node-exporter\"} - ignoring (state) (node_md_disks{device=~\"mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+\",job=\"node-exporter\",state=\"active\"}) \u003e 0","duration":900,"labels":{"severity":"critical"},"annotations":{"description":"RAID array '{{ $labels.device }}' on {{ $labels.instance }} is in degraded state due to one or more disks failures. Number of spare drives is insufficient to fix issue automatically.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeRAIDDegraded.md","summary":"RAID Array is degraded"},"alerts":[],"health":"ok","evaluationTime":0.000243576,"lastEvaluation":"2023-01-09T15:41:10.949260223Z","type":"alerting"},{"state":"inactive","name":"NodeRAIDDiskFailure","query":"node_md_disks{device=~\"mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+\",job=\"node-exporter\",state=\"failed\"} \u003e 0","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"At least one device in RAID array on {{ $labels.instance }} failed. Array '{{ $labels.device }}' needs attention and possibly a disk swap.","summary":"Failed device in RAID array"},"alerts":[],"health":"ok","evaluationTime":0.00012272,"lastEvaluation":"2023-01-09T15:41:10.949504953Z","type":"alerting"},{"state":"inactive","name":"NodeFileDescriptorLimit","query":"(node_filefd_allocated{job=\"node-exporter\"} * 100 / node_filefd_maximum{job=\"node-exporter\"} \u003e 70)","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"File descriptors limit at {{ $labels.instance }} is currently at {{ printf \"%.2f\" $value }}%.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFileDescriptorLimit.md","summary":"Kernel is predicted to exhaust file descriptors limit soon."},"alerts":[],"health":"ok","evaluationTime":0.00020306,"lastEvaluation":"2023-01-09T15:41:10.949628819Z","type":"alerting"},{"state":"inactive","name":"NodeFileDescriptorLimit","query":"(node_filefd_allocated{job=\"node-exporter\"} * 100 / node_filefd_maximum{job=\"node-exporter\"} \u003e 90)","duration":900,"labels":{"severity":"critical"},"annotations":{"description":"File descriptors limit at {{ $labels.instance }} is currently at {{ printf \"%.2f\" $value }}%.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeFileDescriptorLimit.md","summary":"Kernel is predicted to exhaust file descriptors limit soon."},"alerts":[],"health":"ok","evaluationTime":0.000203455,"lastEvaluation":"2023-01-09T15:41:10.949833519Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.074135462,"lastEvaluation":"2023-01-09T15:41:10.875905018Z"},{"name":"node-exporter.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-node-exporter-rules-8910cd92-153c-428c-bac1-3b26a98cb8a2.yaml","rules":[{"name":"instance:node_num_cpu:sum","query":"count without (cpu, mode) (node_cpu_seconds_total{job=\"node-exporter\",mode=\"idle\"})","health":"ok","evaluationTime":0.000572152,"lastEvaluation":"2023-01-09T15:41:06.784194164Z","type":"recording"},{"name":"instance:node_cpu_utilisation:rate1m","query":"1 - avg without (cpu) (sum without (mode) (rate(node_cpu_seconds_total{job=\"node-exporter\",mode=~\"idle|iowait|steal\"}[1m])))","health":"ok","evaluationTime":0.001503534,"lastEvaluation":"2023-01-09T15:41:06.784768173Z","type":"recording"},{"name":"instance:node_load1_per_cpu:ratio","query":"(node_load1{job=\"node-exporter\"} / instance:node_num_cpu:sum{job=\"node-exporter\"})","health":"ok","evaluationTime":0.000201945,"lastEvaluation":"2023-01-09T15:41:06.786273873Z","type":"recording"},{"name":"instance:node_memory_utilisation:ratio","query":"1 - ((node_memory_MemAvailable_bytes{job=\"node-exporter\"} or (node_memory_Buffers_bytes{job=\"node-exporter\"} + node_memory_Cached_bytes{job=\"node-exporter\"} + node_memory_MemFree_bytes{job=\"node-exporter\"} + node_memory_Slab_bytes{job=\"node-exporter\"})) / node_memory_MemTotal_bytes{job=\"node-exporter\"})","health":"ok","evaluationTime":0.000562996,"lastEvaluation":"2023-01-09T15:41:06.78647705Z","type":"recording"},{"name":"instance:node_vmstat_pgmajfault:rate1m","query":"rate(node_vmstat_pgmajfault{job=\"node-exporter\"}[1m])","health":"ok","evaluationTime":0.000155347,"lastEvaluation":"2023-01-09T15:41:06.787041828Z","type":"recording"},{"name":"instance_device:node_disk_io_time_seconds:rate1m","query":"rate(node_disk_io_time_seconds_total{device=~\"mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+\",job=\"node-exporter\"}[1m])","health":"ok","evaluationTime":0.000304544,"lastEvaluation":"2023-01-09T15:41:06.78719842Z","type":"recording"},{"name":"instance_device:node_disk_io_time_weighted_seconds:rate1m","query":"rate(node_disk_io_time_weighted_seconds_total{device=~\"mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+\",job=\"node-exporter\"}[1m])","health":"ok","evaluationTime":0.000263566,"lastEvaluation":"2023-01-09T15:41:06.787504603Z","type":"recording"},{"name":"instance:node_network_receive_bytes_excluding_lo:rate1m","query":"sum without (device) (rate(node_network_receive_bytes_total{device!=\"lo\",job=\"node-exporter\"}[1m]))","health":"ok","evaluationTime":0.000334557,"lastEvaluation":"2023-01-09T15:41:06.787769517Z","type":"recording"},{"name":"instance:node_network_transmit_bytes_excluding_lo:rate1m","query":"sum without (device) (rate(node_network_transmit_bytes_total{device!=\"lo\",job=\"node-exporter\"}[1m]))","health":"ok","evaluationTime":0.000349043,"lastEvaluation":"2023-01-09T15:41:06.788105369Z","type":"recording"},{"name":"instance:node_network_receive_drop_excluding_lo:rate1m","query":"sum without (device) (rate(node_network_receive_drop_total{device!=\"lo\",job=\"node-exporter\"}[1m]))","health":"ok","evaluationTime":0.000309273,"lastEvaluation":"2023-01-09T15:41:06.788455948Z","type":"recording"},{"name":"instance:node_network_transmit_drop_excluding_lo:rate1m","query":"sum without (device) (rate(node_network_transmit_drop_total{device!=\"lo\",job=\"node-exporter\"}[1m]))","health":"ok","evaluationTime":0.000303321,"lastEvaluation":"2023-01-09T15:41:06.788766479Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.004880799,"lastEvaluation":"2023-01-09T15:41:06.784191283Z"},{"name":"prometheus","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-prometheus-k8s-prometheus-rules-043e4cd6-8ea1-4921-b4a4-fec759f95123.yaml","rules":[{"state":"inactive","name":"PrometheusBadConfig","query":"max_over_time(prometheus_config_last_reload_successful{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) == 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has failed to reload its configuration.","summary":"Failed Prometheus configuration reload."},"alerts":[],"health":"ok","evaluationTime":0.000180296,"lastEvaluation":"2023-01-09T15:40:59.773233129Z","type":"alerting"},{"state":"inactive","name":"PrometheusNotificationQueueRunningFull","query":"(predict_linear(prometheus_notifications_queue_length{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m], 60 * 30) \u003e min_over_time(prometheus_notifications_queue_capacity{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]))","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Alert notification queue of Prometheus {{$labels.namespace}}/{{$labels.pod}} is running full.","summary":"Prometheus alert notification queue predicted to run full in less than 30m."},"alerts":[],"health":"ok","evaluationTime":0.000279696,"lastEvaluation":"2023-01-09T15:40:59.773414887Z","type":"alerting"},{"state":"inactive","name":"PrometheusErrorSendingAlertsToSomeAlertmanagers","query":"(rate(prometheus_notifications_errors_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) / rate(prometheus_notifications_sent_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m])) * 100 \u003e 1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"{{ printf \"%.1f\" $value }}% errors while sending alerts from Prometheus {{$labels.namespace}}/{{$labels.pod}} to Alertmanager {{$labels.alertmanager}}.","summary":"Prometheus has encountered more than 1% errors sending alerts to a specific Alertmanager."},"alerts":[],"health":"ok","evaluationTime":0.000341322,"lastEvaluation":"2023-01-09T15:40:59.77369605Z","type":"alerting"},{"state":"inactive","name":"PrometheusNotConnectedToAlertmanagers","query":"max_over_time(prometheus_notifications_alertmanagers_discovered{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003c 1","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} is not connected to any Alertmanagers.","summary":"Prometheus is not connected to any Alertmanagers."},"alerts":[],"health":"ok","evaluationTime":0.000142363,"lastEvaluation":"2023-01-09T15:40:59.77403921Z","type":"alerting"},{"state":"inactive","name":"PrometheusTSDBReloadsFailing","query":"increase(prometheus_tsdb_reloads_failures_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[3h]) \u003e 0","duration":14400,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has detected {{$value | humanize}} reload failures over the last 3h.","summary":"Prometheus has issues reloading blocks from disk."},"alerts":[],"health":"ok","evaluationTime":0.000253405,"lastEvaluation":"2023-01-09T15:40:59.774182931Z","type":"alerting"},{"state":"inactive","name":"PrometheusTSDBCompactionsFailing","query":"increase(prometheus_tsdb_compactions_failed_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[3h]) \u003e 0","duration":14400,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has detected {{$value | humanize}} compaction failures over the last 3h.","summary":"Prometheus has issues compacting blocks."},"alerts":[],"health":"ok","evaluationTime":0.000206072,"lastEvaluation":"2023-01-09T15:40:59.774437562Z","type":"alerting"},{"state":"inactive","name":"PrometheusNotIngestingSamples","query":"(rate(prometheus_tsdb_head_samples_appended_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003c= 0 and (sum without (scrape_job) (prometheus_target_metadata_cache_entries{job=~\"prometheus-k8s|prometheus-user-workload\"}) \u003e 0 or sum without (rule_group) (prometheus_rule_group_rules{job=~\"prometheus-k8s|prometheus-user-workload\"}) \u003e 0))","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} is not ingesting samples.","summary":"Prometheus is not ingesting samples."},"alerts":[],"health":"ok","evaluationTime":0.002043941,"lastEvaluation":"2023-01-09T15:40:59.774644977Z","type":"alerting"},{"state":"inactive","name":"PrometheusDuplicateTimestamps","query":"rate(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} is dropping {{ printf \"%.4g\" $value  }} samples/s with different values but duplicated timestamp.","summary":"Prometheus is dropping samples with duplicate timestamps."},"alerts":[],"health":"ok","evaluationTime":0.000143176,"lastEvaluation":"2023-01-09T15:40:59.776690863Z","type":"alerting"},{"state":"inactive","name":"PrometheusOutOfOrderTimestamps","query":"rate(prometheus_target_scrapes_sample_out_of_order_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} is dropping {{ printf \"%.4g\" $value  }} samples/s with timestamps arriving out of order.","summary":"Prometheus drops samples with out-of-order timestamps."},"alerts":[],"health":"ok","evaluationTime":0.000115746,"lastEvaluation":"2023-01-09T15:40:59.776835339Z","type":"alerting"},{"state":"inactive","name":"PrometheusRemoteStorageFailures","query":"((rate(prometheus_remote_storage_failed_samples_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) or rate(prometheus_remote_storage_samples_failed_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m])) / ((rate(prometheus_remote_storage_failed_samples_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) or rate(prometheus_remote_storage_samples_failed_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m])) + (rate(prometheus_remote_storage_succeeded_samples_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) or rate(prometheus_remote_storage_samples_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m])))) * 100 \u003e 1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} failed to send {{ printf \"%.1f\" $value }}% of the samples to {{ $labels.remote_name}}:{{ $labels.url }}","summary":"Prometheus fails to send samples to remote storage."},"alerts":[],"health":"ok","evaluationTime":0.000426629,"lastEvaluation":"2023-01-09T15:40:59.776952176Z","type":"alerting"},{"state":"inactive","name":"PrometheusRemoteWriteBehind","query":"(max_over_time(prometheus_remote_storage_highest_timestamp_in_seconds{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) - ignoring (remote_name, url) group_right () max_over_time(prometheus_remote_storage_queue_highest_sent_timestamp_seconds{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m])) \u003e 120","duration":900,"labels":{"severity":"info"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} remote write is {{ printf \"%.1f\" $value }}s behind for {{ $labels.remote_name}}:{{ $labels.url }}.","summary":"Prometheus remote write is behind."},"alerts":[],"health":"ok","evaluationTime":0.000209298,"lastEvaluation":"2023-01-09T15:40:59.777380352Z","type":"alerting"},{"state":"inactive","name":"PrometheusRemoteWriteDesiredShards","query":"(max_over_time(prometheus_remote_storage_shards_desired{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e max_over_time(prometheus_remote_storage_shards_max{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]))","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} remote write desired shards calculation wants to run {{ $value }} shards for queue {{ $labels.remote_name}}:{{ $labels.url }}, which is more than the max of {{ printf `prometheus_remote_storage_shards_max{instance=\"%s\",job=~\"prometheus-k8s|prometheus-user-workload\"}` $labels.instance | query | first | value }}.","summary":"Prometheus remote write desired shards calculation wants to run more than configured max shards."},"alerts":[],"health":"ok","evaluationTime":0.000157462,"lastEvaluation":"2023-01-09T15:40:59.777591141Z","type":"alerting"},{"state":"inactive","name":"PrometheusRuleFailures","query":"increase(prometheus_rule_evaluation_failures_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has failed to evaluate {{ printf \"%.0f\" $value }} rules in the last 5m.","summary":"Prometheus is failing rule evaluations."},"alerts":[],"health":"ok","evaluationTime":0.001120756,"lastEvaluation":"2023-01-09T15:40:59.777750045Z","type":"alerting"},{"state":"inactive","name":"PrometheusMissingRuleEvaluations","query":"increase(prometheus_rule_group_iterations_missed_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has missed {{ printf \"%.0f\" $value }} rule group evaluations in the last 5m.","summary":"Prometheus is missing rule evaluations due to slow rule group evaluation."},"alerts":[],"health":"ok","evaluationTime":0.001118975,"lastEvaluation":"2023-01-09T15:40:59.778872316Z","type":"alerting"},{"state":"inactive","name":"PrometheusTargetLimitHit","query":"increase(prometheus_target_scrape_pool_exceeded_target_limit_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has dropped {{ printf \"%.0f\" $value }} targets because the number of targets exceeded the configured target_limit.","summary":"Prometheus has dropped targets because some scrape configs have exceeded the targets limit."},"alerts":[],"health":"ok","evaluationTime":0.000130926,"lastEvaluation":"2023-01-09T15:40:59.779992646Z","type":"alerting"},{"state":"inactive","name":"PrometheusLabelLimitHit","query":"increase(prometheus_target_scrape_pool_exceeded_label_limits_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has dropped {{ printf \"%.0f\" $value }} targets because some samples exceeded the configured label_limit, label_name_length_limit or label_value_length_limit.","summary":"Prometheus has dropped targets because some scrape configs have exceeded the labels limit."},"alerts":[],"health":"ok","evaluationTime":0.000123554,"lastEvaluation":"2023-01-09T15:40:59.780124653Z","type":"alerting"},{"state":"inactive","name":"PrometheusScrapeBodySizeLimitHit","query":"increase(prometheus_target_scrapes_exceeded_body_size_limit_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has failed {{ printf \"%.0f\" $value }} scrapes in the last 5m because some targets exceeded the configured body_size_limit.","summary":"Prometheus has dropped some targets that exceeded body size limit."},"alerts":[],"health":"ok","evaluationTime":0.000110836,"lastEvaluation":"2023-01-09T15:40:59.780249348Z","type":"alerting"},{"state":"inactive","name":"PrometheusScrapeSampleLimitHit","query":"increase(prometheus_target_scrapes_exceeded_sample_limit_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} has failed {{ printf \"%.0f\" $value }} scrapes in the last 5m because some targets exceeded the configured sample_limit.","summary":"Prometheus has failed scrapes that have exceeded the configured sample limit."},"alerts":[],"health":"ok","evaluationTime":0.000152737,"lastEvaluation":"2023-01-09T15:40:59.78036127Z","type":"alerting"},{"state":"inactive","name":"PrometheusTargetSyncFailure","query":"increase(prometheus_target_sync_failed_total{job=~\"prometheus-k8s|prometheus-user-workload\"}[30m]) \u003e 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"{{ printf \"%.0f\" $value }} targets in Prometheus {{$labels.namespace}}/{{$labels.pod}} have failed to sync because invalid configuration was supplied.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/PrometheusTargetSyncFailure.md","summary":"Prometheus has failed to sync targets."},"alerts":[],"health":"ok","evaluationTime":0.001457241,"lastEvaluation":"2023-01-09T15:40:59.780515814Z","type":"alerting"},{"state":"inactive","name":"PrometheusHighQueryLoad","query":"avg_over_time(prometheus_engine_queries{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) / max_over_time(prometheus_engine_queries_concurrent_max{job=~\"prometheus-k8s|prometheus-user-workload\"}[5m]) \u003e 0.8","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus {{$labels.namespace}}/{{$labels.pod}} query API has less than 20% available capacity in its query engine for the last 15 minutes.","summary":"Prometheus is reaching its maximum capacity serving concurrent requests."},"alerts":[],"health":"ok","evaluationTime":0.000249789,"lastEvaluation":"2023-01-09T15:40:59.781974713Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.008996573,"lastEvaluation":"2023-01-09T15:40:59.773230539Z"},{"name":"thanos-sidecar","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-prometheus-k8s-thanos-sidecar-rules-a2c776de-ad22-4404-b256-6e36e41ee414.yaml","rules":[{"state":"inactive","name":"ThanosSidecarBucketOperationsFailed","query":"sum by (namespace, job, instance) (rate(thanos_objstore_bucket_operation_failures_total{job=~\"prometheus-(k8s|user-workload)-thanos-sidecar\"}[5m])) \u003e 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Sidecar {{$labels.instance}} in {{$labels.namespace}} bucket operations are failing","summary":"Thanos Sidecar bucket operations are failing"},"alerts":[],"health":"ok","evaluationTime":0.000228045,"lastEvaluation":"2023-01-09T15:41:07.792326132Z","type":"alerting"},{"state":"inactive","name":"ThanosSidecarNoConnectionToStartedPrometheus","query":"thanos_sidecar_prometheus_up{job=~\"prometheus-(k8s|user-workload)-thanos-sidecar\"} == 0 and on (namespace, pod) prometheus_tsdb_data_replay_duration_seconds != 0","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Sidecar {{$labels.instance}} in {{$labels.namespace}} is unhealthy.","summary":"Thanos Sidecar cannot access Prometheus, even though Prometheus seems healthy and has reloaded WAL."},"alerts":[],"health":"ok","evaluationTime":0.000219854,"lastEvaluation":"2023-01-09T15:41:07.792555694Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00045895,"lastEvaluation":"2023-01-09T15:41:07.792321008Z"},{"name":"config-reloaders","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-prometheus-operator-rules-61ce5498-5e43-41fa-a11c-f6d06c0fede1.yaml","rules":[{"state":"inactive","name":"ConfigReloaderSidecarErrors","query":"max_over_time(reloader_last_reload_successful{namespace=~\".+\"}[5m]) == 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Errors encountered while the {{$labels.pod}} config-reloader sidecar attempts to sync config in {{$labels.namespace}} namespace.\nAs a result, configuration for service running in {{$labels.pod}} may be stale and cannot be updated anymore.","summary":"config-reloader sidecar has not had a successful reload for 10m"},"alerts":[],"health":"ok","evaluationTime":0.000270668,"lastEvaluation":"2023-01-09T15:40:43.606780971Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.00027774,"lastEvaluation":"2023-01-09T15:40:43.606776549Z"},{"name":"prometheus-operator","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-prometheus-operator-rules-61ce5498-5e43-41fa-a11c-f6d06c0fede1.yaml","rules":[{"state":"inactive","name":"PrometheusOperatorListErrors","query":"(sum by (controller, namespace) (rate(prometheus_operator_list_operations_failed_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[10m])) / sum by (controller, namespace) (rate(prometheus_operator_list_operations_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[10m]))) \u003e 0.4","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Errors while performing List operations in controller {{$labels.controller}} in {{$labels.namespace}} namespace.","summary":"Errors while performing list operations in controller."},"alerts":[],"health":"ok","evaluationTime":0.000401373,"lastEvaluation":"2023-01-09T15:41:06.821233476Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorWatchErrors","query":"(sum by (controller, namespace) (rate(prometheus_operator_watch_operations_failed_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m])) / sum by (controller, namespace) (rate(prometheus_operator_watch_operations_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m]))) \u003e 0.4","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"Errors while performing watch operations in controller {{$labels.controller}} in {{$labels.namespace}} namespace.","summary":"Errors while performing watch operations in controller."},"alerts":[],"health":"ok","evaluationTime":0.000287861,"lastEvaluation":"2023-01-09T15:41:06.821636562Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorSyncFailed","query":"min_over_time(prometheus_operator_syncs{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\",status=\"failed\"}[5m]) \u003e 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Controller {{ $labels.controller }} in {{ $labels.namespace }} namespace fails to reconcile {{ $value }} objects.","summary":"Last controller reconciliation failed"},"alerts":[],"health":"ok","evaluationTime":0.000134897,"lastEvaluation":"2023-01-09T15:41:06.821925831Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorReconcileErrors","query":"(sum by (controller, namespace) (rate(prometheus_operator_reconcile_errors_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m]))) / (sum by (controller, namespace) (rate(prometheus_operator_reconcile_operations_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m]))) \u003e 0.1","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"{{ $value | humanizePercentage }} of reconciling operations failed for {{ $labels.controller }} controller in {{ $labels.namespace }} namespace.","summary":"Errors while reconciling controller."},"alerts":[],"health":"ok","evaluationTime":0.000274722,"lastEvaluation":"2023-01-09T15:41:06.822061855Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorNodeLookupErrors","query":"rate(prometheus_operator_node_address_lookup_errors_total{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m]) \u003e 0.1","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Errors while reconciling Prometheus in {{ $labels.namespace }} Namespace.","summary":"Errors while reconciling Prometheus."},"alerts":[],"health":"ok","evaluationTime":0.000117461,"lastEvaluation":"2023-01-09T15:41:06.822337868Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorNotReady","query":"min by (controller, namespace) (max_over_time(prometheus_operator_ready{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\"}[5m]) == 0)","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus operator in {{ $labels.namespace }} namespace isn't ready to reconcile {{ $labels.controller }} resources.","summary":"Prometheus operator not ready"},"alerts":[],"health":"ok","evaluationTime":0.000166798,"lastEvaluation":"2023-01-09T15:41:06.822456503Z","type":"alerting"},{"state":"inactive","name":"PrometheusOperatorRejectedResources","query":"min_over_time(prometheus_operator_managed_resources{job=\"prometheus-operator\",namespace=~\"openshift-monitoring|openshift-user-workload-monitoring\",state=\"rejected\"}[5m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"Prometheus operator in {{ $labels.namespace }} namespace rejected {{ printf \"%0.0f\" $value }} {{ $labels.controller }}/{{ $labels.resource }} resources.","summary":"Resources rejected by Prometheus operator"},"alerts":[],"health":"ok","evaluationTime":0.000167645,"lastEvaluation":"2023-01-09T15:41:06.822624993Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001564007,"lastEvaluation":"2023-01-09T15:41:06.821230471Z"},{"name":"telemeter.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-telemetry-710381ae-ad4b-46f2-85b8-be8b37ccd22f.yaml","rules":[{"name":"cluster:telemetry_selected_series:count","query":"max(federate_samples - federate_filtered_samples)","health":"ok","evaluationTime":0.000182484,"lastEvaluation":"2023-01-09T15:40:49.835059254Z","type":"recording"},{"state":"inactive","name":"TelemeterClientFailures","query":"sum by (namespace) (rate(federate_requests_failed_total{job=\"telemeter-client\"}[15m])) / sum by (namespace) (rate(federate_requests_total{job=\"telemeter-client\"}[15m])) \u003e 0.2","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"The telemeter client in namespace {{ $labels.namespace }} fails {{ $value | humanize }} of the requests to the telemeter service.\nCheck the logs of the telemeter-client pod with the following command:\noc logs -n openshift-monitoring deployment.apps/telemeter-client -c telemeter-client\nIf the telemeter client fails to authenticate with the telemeter service, make sure that the global pull secret is up to date, see https://docs.openshift.com/container-platform/latest/openshift_images/managing_images/using-image-pull-secrets.html#images-update-global-pull-secret_using-image-pull-secrets for more details.","summary":"Telemeter client fails to send metrics"},"alerts":[],"health":"ok","evaluationTime":0.000218247,"lastEvaluation":"2023-01-09T15:40:49.835244024Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000408846,"lastEvaluation":"2023-01-09T15:40:49.835056204Z"},{"name":"thanos-query","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-monitoring-thanos-querier-31be6602-1b67-4766-bdd5-6361a4e9ad1f.yaml","rules":[{"state":"inactive","name":"ThanosQueryHttpRequestQueryErrorRateHigh","query":"(sum by (namespace, job) (rate(http_requests_total{code=~\"5..\",handler=\"query\",job=\"thanos-querier\"}[5m])) / sum by (namespace, job) (rate(http_requests_total{handler=\"query\",job=\"thanos-querier\"}[5m]))) * 100 \u003e 5","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} is failing to handle {{$value | humanize}}% of \"query\" requests.","summary":"Thanos Query is failing to handle requests."},"alerts":[],"health":"ok","evaluationTime":0.000320776,"lastEvaluation":"2023-01-09T15:41:08.785311544Z","type":"alerting"},{"state":"inactive","name":"ThanosQueryHttpRequestQueryRangeErrorRateHigh","query":"(sum by (namespace, job) (rate(http_requests_total{code=~\"5..\",handler=\"query_range\",job=\"thanos-querier\"}[5m])) / sum by (namespace, job) (rate(http_requests_total{handler=\"query_range\",job=\"thanos-querier\"}[5m]))) * 100 \u003e 5","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} is failing to handle {{$value | humanize}}% of \"query_range\" requests.","summary":"Thanos Query is failing to handle requests."},"alerts":[],"health":"ok","evaluationTime":0.000197028,"lastEvaluation":"2023-01-09T15:41:08.785633995Z","type":"alerting"},{"state":"inactive","name":"ThanosQueryGrpcServerErrorRate","query":"(sum by (namespace, job) (rate(grpc_server_handled_total{grpc_code=~\"Unknown|ResourceExhausted|Internal|Unavailable|DataLoss|DeadlineExceeded\",job=\"thanos-querier\"}[5m])) / sum by (namespace, job) (rate(grpc_server_started_total{job=\"thanos-querier\"}[5m])) * 100 \u003e 5)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} is failing to handle {{$value | humanize}}% of requests.","summary":"Thanos Query is failing to handle requests."},"alerts":[],"health":"ok","evaluationTime":0.001188688,"lastEvaluation":"2023-01-09T15:41:08.785832806Z","type":"alerting"},{"state":"inactive","name":"ThanosQueryGrpcClientErrorRate","query":"(sum by (namespace, job) (rate(grpc_client_handled_total{grpc_code!=\"OK\",job=\"thanos-querier\"}[5m])) / sum by (namespace, job) (rate(grpc_client_started_total{job=\"thanos-querier\"}[5m]))) * 100 \u003e 5","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} is failing to send {{$value | humanize}}% of requests.","summary":"Thanos Query is failing to send requests."},"alerts":[],"health":"ok","evaluationTime":0.000272052,"lastEvaluation":"2023-01-09T15:41:08.78702293Z","type":"alerting"},{"state":"inactive","name":"ThanosQueryHighDNSFailures","query":"(sum by (namespace, job) (rate(thanos_query_store_apis_dns_failures_total{job=\"thanos-querier\"}[5m])) / sum by (namespace, job) (rate(thanos_query_store_apis_dns_lookups_total{job=\"thanos-querier\"}[5m]))) * 100 \u003e 1","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} have {{$value | humanize}}% of failing DNS queries for store endpoints.","summary":"Thanos Query is having high number of DNS failures."},"alerts":[],"health":"ok","evaluationTime":0.000219729,"lastEvaluation":"2023-01-09T15:41:08.787296596Z","type":"alerting"},{"state":"inactive","name":"ThanosQueryOverload","query":"(max_over_time(thanos_query_concurrent_gate_queries_max[5m]) - avg_over_time(thanos_query_concurrent_gate_queries_in_flight[5m]) \u003c 1)","duration":3600,"labels":{"severity":"warning"},"annotations":{"description":"Thanos Query {{$labels.job}} in {{$labels.namespace}} has been overloaded for more than 15 minutes. This may be a symptom of excessive simultanous complex requests, low performance of the Prometheus API, or failures within these components. Assess the health of the Thanos query instances, the connnected Prometheus instances, look for potential senders of these requests and then contact support.","summary":"Thanos query reaches its maximum capacity serving concurrent requests."},"alerts":[],"health":"ok","evaluationTime":0.000165327,"lastEvaluation":"2023-01-09T15:41:08.787518951Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.002378358,"lastEvaluation":"2023-01-09T15:41:08.785308293Z"},{"name":"multus-admission-controller-monitor-service.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-multus-prometheus-k8s-rules-b8dfd243-455c-4734-9e55-d35c0f3d75a3.yaml","rules":[{"name":"cluster:network_attachment_definition_enabled_instance_up:max","query":"max by (networks) (network_attachment_definition_enabled_instance_up)","health":"ok","evaluationTime":0.000235643,"lastEvaluation":"2023-01-09T15:40:51.485005209Z","type":"recording"},{"name":"cluster:network_attachment_definition_instances:max","query":"max by (networks) (network_attachment_definition_instances)","health":"ok","evaluationTime":0.000140209,"lastEvaluation":"2023-01-09T15:40:51.485243757Z","type":"recording"}],"interval":30,"limit":0,"evaluationTime":0.0003852,"lastEvaluation":"2023-01-09T15:40:51.48500166Z"},{"name":"olm.csv_abnormal.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-operator-lifecycle-manager-olm-alert-rules-d545d316-485d-4bbd-80d5-5d8a17f28061.yaml","rules":[{"state":"inactive","name":"CsvAbnormalFailedOver2Min","query":"csv_abnormal{phase=~\"^Failed$\"}","duration":120,"labels":{"namespace":"{{ $labels.namespace }}","severity":"warning"},"annotations":{"description":"Fires whenever a CSV has been in the failed phase for more than 2 minutes.","message":"Failed to install Operator {{ $labels.name }} version {{ $labels.version }}. Reason-{{ $labels.reason }}","summary":"CSV failed for over 2 minutes"},"alerts":[],"health":"ok","evaluationTime":0.000121523,"lastEvaluation":"2023-01-09T15:41:06.46430534Z","type":"alerting"},{"state":"inactive","name":"CsvAbnormalOver30Min","query":"csv_abnormal{phase=~\"(^Replacing$|^Pending$|^Deleting$|^Unknown$)\"}","duration":1800,"labels":{"namespace":"{{ $labels.namespace }}","severity":"warning"},"annotations":{"description":"Fires whenever a CSV is in the Replacing, Pending, Deleting, or Unkown phase for more than 30 minutes.","message":"Failed to install Operator {{ $labels.name }} version {{ $labels.version }}. Phase-{{ $labels.phase }} Reason-{{ $labels.reason }}","summary":"CSV abnormal for over 30 minutes"},"alerts":[],"health":"ok","evaluationTime":0.000122849,"lastEvaluation":"2023-01-09T15:41:06.464428561Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000251013,"lastEvaluation":"2023-01-09T15:41:06.464302596Z"},{"name":"olm.installplan.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-operator-lifecycle-manager-olm-alert-rules-d545d316-485d-4bbd-80d5-5d8a17f28061.yaml","rules":[{"state":"inactive","name":"InstallPlanStepAppliedWithWarnings","query":"sum(increase(installplan_warnings_total[5m])) \u003e 0","duration":0,"labels":{"severity":"warning"},"annotations":{"description":"Fires whenever the API server returns a warning when attempting to modify an operator.","message":"The API server returned a warning during installation or upgrade of an operator. An Event with reason \"AppliedWithWarnings\" has been created with complete details, including a reference to the InstallPlan step that generated the warning.","summary":"API returned a warning when modifying an operator"},"alerts":[],"health":"ok","evaluationTime":0.000156166,"lastEvaluation":"2023-01-09T15:41:07.040628047Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.000161879,"lastEvaluation":"2023-01-09T15:41:07.040624926Z"},{"name":"cluster-network-operator-master.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-ovn-kubernetes-master-rules-4ac82e8a-eb99-48b4-8d21-6ecc8781f403.yaml","rules":[{"name":"cluster:ovnkube_master_egress_routing_via_host:max","query":"max(ovnkube_master_egress_routing_via_host)","health":"ok","evaluationTime":0.000189507,"lastEvaluation":"2023-01-09T15:40:59.483108694Z","type":"recording"},{"name":"cluster:ovn_db_nbdb_not_cluster_member:abs","query":"abs(count(ovn_db_cluster_server_status{db_name=\"OVN_Northbound\",server_status=\"cluster member\"}) - 3)","health":"ok","evaluationTime":0.000188646,"lastEvaluation":"2023-01-09T15:40:59.483300542Z","type":"recording"},{"name":"cluster:ovn_db_sbdb_not_cluster_member:abs","query":"abs(count(ovn_db_cluster_server_status{db_name=\"OVN_Southbound\",server_status=\"cluster member\"}) - 3)","health":"ok","evaluationTime":0.000185303,"lastEvaluation":"2023-01-09T15:40:59.483491056Z","type":"recording"},{"name":"cluster:ovn_db_nbdb_missing_inbound_connections:abs","query":"abs(sum(ovn_db_cluster_inbound_connections_total{db_name=\"OVN_Northbound\"}) - (3 * (3 - 1)))","health":"ok","evaluationTime":0.000148272,"lastEvaluation":"2023-01-09T15:40:59.483678062Z","type":"recording"},{"name":"cluster:ovn_db_sbdb_missing_inbound_connections:abs","query":"abs(sum(ovn_db_cluster_inbound_connections_total{db_name=\"OVN_Southbound\"}) - (3 * (3 - 1)))","health":"ok","evaluationTime":0.000137818,"lastEvaluation":"2023-01-09T15:40:59.483827574Z","type":"recording"},{"name":"cluster:ovn_db_nbdb_missing_outbound_connections:abs","query":"abs(sum(ovn_db_cluster_outbound_connections_total{db_name=\"OVN_Northbound\"}) - (3 * (3 - 1)))","health":"ok","evaluationTime":0.000138684,"lastEvaluation":"2023-01-09T15:40:59.483966808Z","type":"recording"},{"name":"cluster:ovn_db_sbdb_missing_outbound_connections:abs","query":"abs(sum(ovn_db_cluster_outbound_connections_total{db_name=\"OVN_Southbound\"}) - (3 * (3 - 1)))","health":"ok","evaluationTime":0.000154994,"lastEvaluation":"2023-01-09T15:40:59.484106852Z","type":"recording"},{"state":"inactive","name":"NoRunningOvnMaster","query":"absent(up{job=\"ovnkube-master\",namespace=\"openshift-ovn-kubernetes\"} == 1)","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"critical"},"annotations":{"description":"Networking control plane is degraded. Networking configuration updates applied to the cluster will not be\nimplemented while there are no OVN Kubernetes pods.\n","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/NoRunningOvnMaster.md","summary":"There is no running ovn-kubernetes master."},"alerts":[],"health":"ok","evaluationTime":0.00011122,"lastEvaluation":"2023-01-09T15:40:59.484263122Z","type":"alerting"},{"state":"inactive","name":"NoOvnMasterLeader","query":"max by (namespace) (max_over_time(ovnkube_master_leader[5m])) == 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"Networking control plane is degraded. Networking configuration updates applied to the cluster will not be\nimplemented while there is no OVN Kubernetes leader. Existing workloads should continue to have connectivity.\nOVN-Kubernetes control plane is not functional.\n","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/NoOvnMasterLeader.md","summary":"There is no ovn-kubernetes master leader."},"alerts":[],"health":"ok","evaluationTime":0.000127477,"lastEvaluation":"2023-01-09T15:40:59.484375592Z","type":"alerting"},{"state":"inactive","name":"V4SubnetAllocationThresholdExceeded","query":"ovnkube_master_allocated_v4_host_subnets / ovnkube_master_num_v4_host_subnets \u003e 0.8","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"More than 80% of IPv4 subnets are used. Insufficient IPv4 subnets could degrade provisioning of workloads.","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/V4SubnetAllocationThresholdExceeded.md","summary":"More than 80% of v4 subnets available to assign to the nodes are allocated. Current v4 subnet allocation percentage is {{ $value | humanizePercentage }}."},"alerts":[],"health":"ok","evaluationTime":0.000114444,"lastEvaluation":"2023-01-09T15:40:59.484504324Z","type":"alerting"},{"state":"inactive","name":"V6SubnetAllocationThresholdExceeded","query":"ovnkube_master_allocated_v6_host_subnets / ovnkube_master_num_v6_host_subnets \u003e 0.8","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"More than 80% of IPv6 subnets are used. Insufficient IPv6 subnets could degrade provisioning of workloads.","summary":"More than 80% of the v6 subnets available to assign to the nodes are allocated. Current v6 subnet allocation percentage is {{ $value | humanizePercentage }}."},"alerts":[],"health":"ok","evaluationTime":0.000119529,"lastEvaluation":"2023-01-09T15:40:59.484620326Z","type":"alerting"},{"state":"inactive","name":"NorthboundStale","query":"time() - max_over_time(ovnkube_master_nb_e2e_timestamp[5m]) \u003e 120","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Networking control plane is degraded. Networking configuration updates applied to the cluster will not be\nimplemented. Existing workloads should continue to have connectivity. OVN-Kubernetes control plane and/or\nOVN northbound database may not be functional.\n","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/NorthboundStaleAlert.md","summary":"ovn-kubernetes has not written anything to the northbound database for too long."},"alerts":[],"health":"ok","evaluationTime":0.000091069,"lastEvaluation":"2023-01-09T15:40:59.484740957Z","type":"alerting"},{"state":"inactive","name":"SouthboundStale","query":"max_over_time(ovnkube_master_nb_e2e_timestamp[5m]) - max_over_time(ovnkube_master_sb_e2e_timestamp[5m]) \u003e 120","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Networking control plane is degraded. Networking configuration updates may not be applied to the cluster or\ntaking a long time to apply. This usually means there is a large load on OVN component 'northd' or it is not\nfunctioning.\n","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/SouthboundStaleAlert.md","summary":"ovn-northd has not successfully synced any changes to the southbound DB for too long."},"alerts":[],"health":"ok","evaluationTime":0.0001605,"lastEvaluation":"2023-01-09T15:40:59.484833054Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseClusterIDError","query":"count by (namespace) (count by (cluster_id, namespace) (min_over_time(ovn_db_cluster_id{db_name=\"OVN_Northbound\"}[5m]))) \u003e 1","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"More than one OVN northbound database cluster ID indicates degraded OVN database high availability and possible database split brain.","summary":"Multiple OVN northbound database cluster IDs exist."},"alerts":[],"health":"ok","evaluationTime":0.0001469,"lastEvaluation":"2023-01-09T15:40:59.484995753Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseClusterIDError","query":"count by (namespace) (count by (cluster_id, namespace) (min_over_time(ovn_db_cluster_id{db_name=\"OVN_Southbound\"}[5m]))) \u003e 1","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"More than one OVN southbound database cluster ID indicates degraded OVN database high availability and possible database split brain.","summary":"Multiple OVN southbound database cluster IDs exist."},"alerts":[],"health":"ok","evaluationTime":0.000213511,"lastEvaluation":"2023-01-09T15:40:59.485143792Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseTermLag","query":"max by (namespace) (max_over_time(ovn_db_cluster_term{db_name=\"OVN_Northbound\"}[5m])) - min by (namespace) (max_over_time(ovn_db_cluster_term{db_name=\"OVN_Northbound\"}[5m])) \u003e 0","duration":1500,"labels":{"severity":"warning"},"annotations":{"description":"OVN northbound database(s) RAFT term have not been equal which may indicate degraded OVN database high availability.","summary":"OVN northbound databases RAFT term have not been equal for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000236429,"lastEvaluation":"2023-01-09T15:40:59.485359107Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseTermLag","query":"max by (namespace) (max_over_time(ovn_db_cluster_term{db_name=\"OVN_Southbound\"}[5m])) - min by (namespace) (max_over_time(ovn_db_cluster_term{db_name=\"OVN_Southbound\"}[5m])) \u003e 0","duration":1500,"labels":{"severity":"warning"},"annotations":{"description":"OVN southbound database(s) RAFT term have not been equal which may indicate degraded OVN database high availability.","summary":"OVN southbound databases RAFT term have not been equal for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000195573,"lastEvaluation":"2023-01-09T15:40:59.485596935Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseLeaderError","query":"count by (namespace) (max_over_time(ovn_db_cluster_server_role{db_name=\"OVN_Northbound\",server_role=\"leader\"}[5m])) == 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"OVN northbound database(s) have no RAFT leader. Networking control plane is degraded.","summary":"OVN northbound database(s) have no RAFT leader"},"alerts":[],"health":"ok","evaluationTime":0.000115445,"lastEvaluation":"2023-01-09T15:40:59.485794133Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseLeaderError","query":"count by (namespace) (max_over_time(ovn_db_cluster_server_role{db_name=\"OVN_Southbound\",server_role=\"leader\"}[5m])) == 0","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"OVN southbound database(s) have no leader. Networking control plane is degraded.","summary":"OVN southbound database(s) have no RAFT leader"},"alerts":[],"health":"ok","evaluationTime":0.000091063,"lastEvaluation":"2023-01-09T15:40:59.485910752Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseMultipleLeadersError","query":"count by (leader, namespace) (min_over_time(ovn_db_cluster_server_role{db_name=\"OVN_Northbound\",server_role=\"leader\"}[1m])) \u003e 1","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"OVN northbound database(s) have multiple RAFT leaders which may indicate degraded OVN database high availability.","summary":"OVN northbound database(s) have multiple RAFT leaders"},"alerts":[],"health":"ok","evaluationTime":0.000100808,"lastEvaluation":"2023-01-09T15:40:59.486002918Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseMultipleLeadersError","query":"count by (leader, namespace) (min_over_time(ovn_db_cluster_server_role{db_name=\"OVN_Southbound\",server_role=\"leader\"}[1m])) \u003e 1","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"OVN southbound database(s) have multiple RAFT leaders which may indicate degraded OVN database high availability.","summary":"OVN southbound database(s) have multiple RAFT leaders"},"alerts":[],"health":"ok","evaluationTime":0.000130398,"lastEvaluation":"2023-01-09T15:40:59.486105008Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseClusterMemberError","query":"min_over_time(cluster:ovn_db_nbdb_not_cluster_member:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN northbound database server(s) has not been a RAFT cluster member for a period of time which may indicate degraded OVN database high availability cluster.","summary":"OVN northbound database server(s) has not been a member of the databases high availability for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000080252,"lastEvaluation":"2023-01-09T15:40:59.486237149Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseClusterMemberError","query":"min_over_time(cluster:ovn_db_sbdb_not_cluster_member:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN southbound database server(s) has not been a RAFT cluster member for a period of time which may indicate degraded OVN database high availability.","summary":"OVN southbound database server(s) has not been a member of the databases high availability for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000080534,"lastEvaluation":"2023-01-09T15:40:59.486318477Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseInboundConnectionError","query":"min_over_time(ovn_db_cluster_inbound_connections_error_total{db_name=\"OVN_Northbound\"}[5m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"OVN northbound database server(s) is experiencing inbound RAFT connectivity errors which may indicate degraded OVN database high availability.","summary":"OVN northbound database server(s) is experiencing inbound RAFT connectivity errors."},"alerts":[],"health":"ok","evaluationTime":0.000109733,"lastEvaluation":"2023-01-09T15:40:59.486400167Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseInboundConnectionError","query":"min_over_time(ovn_db_cluster_inbound_connections_error_total{db_name=\"OVN_Southbound\"}[5m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"OVN southbound database server(s) is experiencing inbound RAFT connectivity errors which may indicate degraded OVN database high availability.","summary":"OVN southbound database server(s) is experiencing inbound RAFT connectivity errors."},"alerts":[],"health":"ok","evaluationTime":0.000093302,"lastEvaluation":"2023-01-09T15:40:59.486511295Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseOutboundConnectionError","query":"min_over_time(ovn_db_cluster_outbound_connections_error_total{db_name=\"OVN_Northbound\"}[5m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"OVN northbound database server(s) outbound RAFT connectivity errors may indicate degraded OVN database high availability.","summary":"OVN northbound database server(s) is experiencing outbound RAFT connectivity errors."},"alerts":[],"health":"ok","evaluationTime":0.000097672,"lastEvaluation":"2023-01-09T15:40:59.486605931Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseOutboundConnectionError","query":"min_over_time(ovn_db_cluster_outbound_connections_error_total{db_name=\"OVN_Southbound\"}[5m]) \u003e 0","duration":300,"labels":{"severity":"warning"},"annotations":{"description":"OVN southbound database server(s) outbound RAFT connectivity errors which may indicate degraded OVN database high availability.","summary":"OVN southbound database server(s) is experiencing outbound RAFT connectivity errors."},"alerts":[],"health":"ok","evaluationTime":0.000097686,"lastEvaluation":"2023-01-09T15:40:59.486704886Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseInboundConnectionMissing","query":"min_over_time(cluster:ovn_db_nbdb_missing_inbound_connections:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN northbound database server(s) do not have expected number of inbound connections for a RAFT cluster which may indicate degraded OVN database high availability.","summary":"OVN northbound database server(s) do not have expected number of inbound RAFT connections."},"alerts":[],"health":"ok","evaluationTime":0.000076294,"lastEvaluation":"2023-01-09T15:40:59.486803784Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseInboundConnectionMissing","query":"min_over_time(cluster:ovn_db_sbdb_missing_inbound_connections:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN southbound database server(s) do not have expected number of inbound connections for a RAFT cluster which may indicate degraded OVN database high availability.","summary":"OVN southbound database server(s) do not have expected number of inbound RAFT connections."},"alerts":[],"health":"ok","evaluationTime":0.000084566,"lastEvaluation":"2023-01-09T15:40:59.486881301Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseOutboundConnectionMissing","query":"min_over_time(cluster:ovn_db_nbdb_missing_outbound_connections:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN northbound database server(s) do not have expected number of outbound connections for a RAFT cluster which may indicate degraded OVN database high availability.","summary":"OVN northbound database server(s) do not have expected number of outbound RAFT connections."},"alerts":[],"health":"ok","evaluationTime":0.00007174,"lastEvaluation":"2023-01-09T15:40:59.486966939Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseOutboundConnectionMissing","query":"min_over_time(cluster:ovn_db_sbdb_missing_outbound_connections:abs[5m]) != 0","duration":300,"labels":{"namespace":"openshift-ovn-kubernetes","severity":"warning"},"annotations":{"description":"OVN southbound database server(s) do not have expected number of outbound connections for a RAFT cluster which may indicate degraded OVN database high availability.","summary":"OVN southbound database server(s) do not have expected number of outbound RAFT connections."},"alerts":[],"health":"ok","evaluationTime":0.000078838,"lastEvaluation":"2023-01-09T15:40:59.487039858Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthboundDatabaseCPUUsageHigh","query":"(sum by (instance, name, namespace) (rate(container_cpu_usage_seconds_total{container=\"nbdb\"}[5m]))) \u003e 0.8","duration":900,"labels":{"severity":"info"},"annotations":{"description":"High OVN northbound CPU usage indicates high load on the networking control plane.","summary":"OVN northbound database {{ $labels.instance }} is greater than {{ $value | humanizePercentage }} percent CPU usage for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000158415,"lastEvaluation":"2023-01-09T15:40:59.48711999Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesSouthboundDatabaseCPUUsageHigh","query":"(sum by (instance, name, namespace) (rate(container_cpu_usage_seconds_total{container=\"sbdb\"}[5m]))) \u003e 0.8","duration":900,"labels":{"severity":"info"},"annotations":{"description":"High OVN southbound CPU usage indicates high load on the networking control plane.","summary":"OVN southbound database {{ $labels.instance }} is greater than {{ $value | humanizePercentage }} percent CPU usage for a period of time."},"alerts":[],"health":"ok","evaluationTime":0.000137568,"lastEvaluation":"2023-01-09T15:40:59.487279768Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNorthdInactive","query":"count by (namespace) (ovn_northd_status == 1) != 1","duration":300,"labels":{"severity":"critical"},"annotations":{"description":"Exactly one OVN northd must have an active status within the high availability set. Networking control plane is degraded.","summary":"Exactly one OVN northd instance must have an active status."},"alerts":[],"health":"ok","evaluationTime":0.00010672,"lastEvaluation":"2023-01-09T15:40:59.487418625Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.004425167,"lastEvaluation":"2023-01-09T15:40:59.483103013Z"},{"name":"cluster-network-operator-ovn.rules","file":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0/openshift-ovn-kubernetes-networking-rules-8e643667-c882-427d-84db-ebe41d161b0c.yaml","rules":[{"state":"inactive","name":"NodeWithoutOVNKubeNodePodRunning","query":"(kube_node_info unless on (node) (kube_pod_info{namespace=\"openshift-ovn-kubernetes\",pod=~\"ovnkube-node.*\"} or kube_node_labels{label_kubernetes_io_os=\"windows\"})) \u003e 0","duration":1200,"labels":{"severity":"warning"},"annotations":{"description":"Networking is degraded on nodes that do not have a functioning ovnkube-node pod. Existing workloads on the\nnode may continue to have connectivity but any changes to the networking control plane will not be implemented.\n","runbook_url":"https://github.com/openshift/runbooks/blob/master/alerts/cluster-network-operator/NodeWithoutOVNKubeNodePodRunning.md","summary":"All Linux nodes should be running an ovnkube-node pod, {{ $labels.node }} is not."},"alerts":[],"health":"ok","evaluationTime":0.000476518,"lastEvaluation":"2023-01-09T15:40:53.391369355Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesControllerDisconnectedSouthboundDatabase","query":"max_over_time(ovn_controller_southbound_database_connected[5m]) == 0","duration":600,"labels":{"severity":"warning"},"annotations":{"description":"Networking is degraded on nodes when OVN controller is not connected to OVN southbound database connection. No networking control plane updates will be applied to the node.\n","summary":"Networking control plane is degraded on node {{ $labels.node }} because OVN controller is not connected to OVN southbound database."},"alerts":[],"health":"ok","evaluationTime":0.000164682,"lastEvaluation":"2023-01-09T15:40:53.391848152Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNodePodAddError","query":"(sum by (instance, namespace) (rate(ovnkube_node_cni_request_duration_seconds_count{command=\"ADD\",err=\"true\"}[5m])) / sum by (instance, namespace) (rate(ovnkube_node_cni_request_duration_seconds_count{command=\"ADD\"}[5m]))) \u003e 0.1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"OVN Kubernetes experiences pod creation errors at an elevated rate. The pods will be retried.","summary":"OVN Kubernetes is experiencing pod creation errors at an elevated rate."},"alerts":[],"health":"ok","evaluationTime":0.000234083,"lastEvaluation":"2023-01-09T15:40:53.392014305Z","type":"alerting"},{"state":"inactive","name":"OVNKubernetesNodePodDeleteError","query":"(sum by (instance, namespace) (rate(ovnkube_node_cni_request_duration_seconds_count{command=\"DEL\",err=\"true\"}[5m])) / sum by (instance, namespace) (rate(ovnkube_node_cni_request_duration_seconds_count{command=\"DEL\"}[5m]))) \u003e 0.1","duration":900,"labels":{"severity":"warning"},"annotations":{"description":"OVN Kubernetes experiences pod deletion errors at an elevated rate. The pods will be retried.","summary":"OVN Kubernetes experiencing pod deletion errors at an elevated rate."},"alerts":[],"health":"ok","evaluationTime":0.000249195,"lastEvaluation":"2023-01-09T15:40:53.39225065Z","type":"alerting"}],"interval":30,"limit":0,"evaluationTime":0.001137455,"lastEvaluation":"2023-01-09T15:40:53.391364915Z"}]}}